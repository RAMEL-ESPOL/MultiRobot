\hypertarget{classaruco_1_1FiducidalMarkers}{}\doxysection{aruco\+::Fiducidal\+Markers Class Reference}
\label{classaruco_1_1FiducidalMarkers}\index{aruco::FiducidalMarkers@{aruco::FiducidalMarkers}}


{\ttfamily \#include $<$arucofidmarkers.\+h$>$}

\doxysubsection*{Static Public Member Functions}
\begin{DoxyCompactItemize}
\item 
static cv\+::\+Mat \mbox{\hyperlink{classaruco_1_1FiducidalMarkers_a47f92ec85722ff997a687d7283d0ed78}{create\+Marker\+Image}} (int id, int size)  throw (cv\+::\+Exception)
\begin{DoxyCompactList}\small\item\em Creates an ar marker with the id specified using a modified version of the hamming code. There are two type of markers\+: a) These of 10 bits b) these of 3 bits. The latter are employed for applications that need few marker but they must be small. The two type of markers are distinguished by their ids. While the first type of markers have ids in the interval \mbox{[}0-\/1023\mbox{]}, the second type ids in the interval \mbox{[}2000-\/2006\mbox{]}. \end{DoxyCompactList}\item 
static int \mbox{\hyperlink{classaruco_1_1FiducidalMarkers_add9709849669088020ca67b9417e5496}{detect}} (const cv\+::\+Mat \&in, int \&n\+Rotations)
\item 
static cv\+::\+Mat \mbox{\hyperlink{classaruco_1_1FiducidalMarkers_a3390126a77b1667d3350dabcc683cc9e}{get\+Marker\+Mat}} (int id)  throw (cv\+::\+Exception)
\item 
static cv\+::\+Mat \mbox{\hyperlink{classaruco_1_1FiducidalMarkers_a5f68938f08b06aeba830908a2a6dee96}{create\+Board\+Image}} (cv\+::\+Size grid\+Size, int Marker\+Size, int Marker\+Distance, \mbox{\hyperlink{classaruco_1_1BoardConfiguration}{Board\+Configuration}} \&TInfo, vector$<$ int $>$ $\ast$excluded\+Ids=NULL)  throw (cv\+::\+Exception)
\item 
static cv\+::\+Mat \mbox{\hyperlink{classaruco_1_1FiducidalMarkers_a5e57e6262326e1831c8174d2d0111ab7}{create\+Board\+Image\+\_\+\+Chess\+Board}} (cv\+::\+Size grid\+Size, int Marker\+Size, \mbox{\hyperlink{classaruco_1_1BoardConfiguration}{Board\+Configuration}} \&TInfo, bool set\+Data\+Centered=true, vector$<$ int $>$ $\ast$excluded\+Ids=NULL)  throw (cv\+::\+Exception)
\item 
static cv\+::\+Mat \mbox{\hyperlink{classaruco_1_1FiducidalMarkers_a98347db467ae251ab3d709c07aa983f1}{create\+Board\+Image\+\_\+\+Frame}} (cv\+::\+Size grid\+Size, int Marker\+Size, int Marker\+Distance, \mbox{\hyperlink{classaruco_1_1BoardConfiguration}{Board\+Configuration}} \&TInfo, bool set\+Data\+Centered=true, vector$<$ int $>$ $\ast$excluded\+Ids=NULL)  throw (cv\+::\+Exception)
\end{DoxyCompactItemize}
\doxysubsection*{Static Private Member Functions}
\begin{DoxyCompactItemize}
\item 
static vector$<$ int $>$ \mbox{\hyperlink{classaruco_1_1FiducidalMarkers_a4eab429fc336e4f32014f41f977507c5}{get\+List\+Of\+Valid\+Markers\+Ids\+\_\+random}} (int n\+Markers, vector$<$ int $>$ $\ast$excluded)  throw (cv\+::\+Exception)
\item 
static cv\+::\+Mat \mbox{\hyperlink{classaruco_1_1FiducidalMarkers_ad80dda43c48261bbf4fb9df7b5323ff7}{rotate}} (const cv\+::\+Mat \&in)
\item 
static int \mbox{\hyperlink{classaruco_1_1FiducidalMarkers_a60a79890673b9d0c930d807df594715e}{hamm\+Dist\+Marker}} (cv\+::\+Mat bits)
\item 
static int \mbox{\hyperlink{classaruco_1_1FiducidalMarkers_a38c71a2c01171ae23f346a90613f31d0}{analyze\+Marker\+Image}} (cv\+::\+Mat \&grey, int \&n\+Rotations)
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}


Definition at line 37 of file arucofidmarkers.\+h.



\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{classaruco_1_1FiducidalMarkers_a38c71a2c01171ae23f346a90613f31d0}\label{classaruco_1_1FiducidalMarkers_a38c71a2c01171ae23f346a90613f31d0}} 
\index{aruco::FiducidalMarkers@{aruco::FiducidalMarkers}!analyzeMarkerImage@{analyzeMarkerImage}}
\index{analyzeMarkerImage@{analyzeMarkerImage}!aruco::FiducidalMarkers@{aruco::FiducidalMarkers}}
\doxysubsubsection{\texorpdfstring{analyzeMarkerImage()}{analyzeMarkerImage()}}
{\footnotesize\ttfamily int aruco\+::\+Fiducidal\+Markers\+::analyze\+Marker\+Image (\begin{DoxyParamCaption}\item[{cv\+::\+Mat \&}]{grey,  }\item[{int \&}]{n\+Rotations }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}, {\ttfamily [private]}}



Definition at line 316 of file arucofidmarkers.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{317   \{}
\DoxyCodeLine{318 }
\DoxyCodeLine{319     \textcolor{comment}{//Markers  are divided in 7x7 regions, of which the inner 5x5 belongs to marker info}}
\DoxyCodeLine{320     \textcolor{comment}{//the external border shoould be entirely black}}
\DoxyCodeLine{321 }
\DoxyCodeLine{322     \textcolor{keywordtype}{int} swidth=grey.rows/7;}
\DoxyCodeLine{323     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} y=0;y<7;y++)}
\DoxyCodeLine{324     \{}
\DoxyCodeLine{325       \textcolor{keywordtype}{int} inc=6;}
\DoxyCodeLine{326       \textcolor{keywordflow}{if} (y==0 || y==6) inc=1;\textcolor{comment}{//for first and last row, check the whole border}}
\DoxyCodeLine{327       \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} x=0;x<7;x+=inc)}
\DoxyCodeLine{328       \{}
\DoxyCodeLine{329         \textcolor{keywordtype}{int} Xstart=(x)*(swidth);}
\DoxyCodeLine{330         \textcolor{keywordtype}{int} Ystart=(y)*(swidth);}
\DoxyCodeLine{331         Mat square=grey(Rect(Xstart,Ystart,swidth,swidth));}
\DoxyCodeLine{332         \textcolor{keywordtype}{int} nZ=countNonZero(square);}
\DoxyCodeLine{333         \textcolor{keywordflow}{if} (nZ> (swidth*swidth) /2) \{}
\DoxyCodeLine{334           \textcolor{comment}{//        cout<<"{}neb"{}<<endl;}}
\DoxyCodeLine{335           \textcolor{keywordflow}{return} -\/1;\textcolor{comment}{//can not be a marker because the border element is not black!}}
\DoxyCodeLine{336         \}}
\DoxyCodeLine{337       \}}
\DoxyCodeLine{338     \}}
\DoxyCodeLine{339 }
\DoxyCodeLine{340     \textcolor{comment}{//now,}}
\DoxyCodeLine{341     vector<int> markerInfo(5);}
\DoxyCodeLine{342     Mat \_bits=Mat::zeros(5,5,CV\_8UC1);}
\DoxyCodeLine{343     \textcolor{comment}{//get information(for each inner square, determine if it is  black or white)}}
\DoxyCodeLine{344 }
\DoxyCodeLine{345     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} y=0;y<5;y++)}
\DoxyCodeLine{346     \{}
\DoxyCodeLine{347 }
\DoxyCodeLine{348       \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} x=0;x<5;x++)}
\DoxyCodeLine{349       \{}
\DoxyCodeLine{350         \textcolor{keywordtype}{int} Xstart=(x+1)*(swidth);}
\DoxyCodeLine{351         \textcolor{keywordtype}{int} Ystart=(y+1)*(swidth);}
\DoxyCodeLine{352         Mat square=grey(Rect(Xstart,Ystart,swidth,swidth));}
\DoxyCodeLine{353         \textcolor{keywordtype}{int} nZ=countNonZero(square);}
\DoxyCodeLine{354         \textcolor{keywordflow}{if} (nZ> (swidth*swidth) /2)  \_bits.at<uchar>( y,x)=1;}
\DoxyCodeLine{355       \}}
\DoxyCodeLine{356     \}}
\DoxyCodeLine{357     \textcolor{comment}{//      printMat<uchar>( \_bits,"{}or mat"{});}}
\DoxyCodeLine{358 }
\DoxyCodeLine{359     \textcolor{comment}{//checkl all possible rotations}}
\DoxyCodeLine{360     Mat \_bitsFlip;}
\DoxyCodeLine{361     Mat Rotations[4];}
\DoxyCodeLine{362     Rotations[0]=\_bits;}
\DoxyCodeLine{363     \textcolor{keywordtype}{int} dists[4];}
\DoxyCodeLine{364     dists[0]=\mbox{\hyperlink{classaruco_1_1FiducidalMarkers_a60a79890673b9d0c930d807df594715e}{hammDistMarker}}( Rotations[0]) ;}
\DoxyCodeLine{365     pair<int,int> minDist( dists[0],0);}
\DoxyCodeLine{366     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i=1;i<4;i++)}
\DoxyCodeLine{367     \{}
\DoxyCodeLine{368       \textcolor{comment}{//rotate}}
\DoxyCodeLine{369       Rotations[i]=\mbox{\hyperlink{classaruco_1_1FiducidalMarkers_ad80dda43c48261bbf4fb9df7b5323ff7}{rotate}}(Rotations[i-\/1]);}
\DoxyCodeLine{370       \textcolor{comment}{//get the hamming distance to the nearest possible word}}
\DoxyCodeLine{371       dists[i]=\mbox{\hyperlink{classaruco_1_1FiducidalMarkers_a60a79890673b9d0c930d807df594715e}{hammDistMarker}}( Rotations[i]) ;}
\DoxyCodeLine{372       \textcolor{keywordflow}{if} (dists[i]<minDist.first)}
\DoxyCodeLine{373       \{}
\DoxyCodeLine{374         minDist.first=  dists[i];}
\DoxyCodeLine{375         minDist.second=i;}
\DoxyCodeLine{376       \}}
\DoxyCodeLine{377     \}}
\DoxyCodeLine{378     \textcolor{comment}{//              printMat<uchar>( Rotations [ minDist.second]);}}
\DoxyCodeLine{379     \textcolor{comment}{//          cout<<"{}MinDist="{}<<minDist.first<<"{} "{}<<minDist.second<<endl;}}
\DoxyCodeLine{380 }
\DoxyCodeLine{381     nRotations=minDist.second;}
\DoxyCodeLine{382     \textcolor{keywordflow}{if} (minDist.first!=0)    \textcolor{comment}{//FUTURE WORK: correct if any error}}
\DoxyCodeLine{383       \textcolor{keywordflow}{return} -\/1;}
\DoxyCodeLine{384     \textcolor{keywordflow}{else} \{\textcolor{comment}{//Get id of the marker}}
\DoxyCodeLine{385       \textcolor{keywordtype}{int} MatID=0;}
\DoxyCodeLine{386       cv::Mat bits=Rotations [ minDist.second];}
\DoxyCodeLine{387       \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} y=0;y<5;y++)}
\DoxyCodeLine{388       \{}
\DoxyCodeLine{389         MatID<<=1;}
\DoxyCodeLine{390         \textcolor{keywordflow}{if} ( bits.at<uchar>(y,1)) MatID|=1;}
\DoxyCodeLine{391         MatID<<=1;}
\DoxyCodeLine{392         \textcolor{keywordflow}{if} ( bits.at<uchar>(y,3)) MatID|=1;}
\DoxyCodeLine{393       \}}
\DoxyCodeLine{394       \textcolor{keywordflow}{return} MatID;}
\DoxyCodeLine{395     \}}
\DoxyCodeLine{396   \}}

\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classaruco_1_1FiducidalMarkers_a38c71a2c01171ae23f346a90613f31d0_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classaruco_1_1FiducidalMarkers_a5f68938f08b06aeba830908a2a6dee96}\label{classaruco_1_1FiducidalMarkers_a5f68938f08b06aeba830908a2a6dee96}} 
\index{aruco::FiducidalMarkers@{aruco::FiducidalMarkers}!createBoardImage@{createBoardImage}}
\index{createBoardImage@{createBoardImage}!aruco::FiducidalMarkers@{aruco::FiducidalMarkers}}
\doxysubsubsection{\texorpdfstring{createBoardImage()}{createBoardImage()}}
{\footnotesize\ttfamily cv\+::\+Mat aruco\+::\+Fiducidal\+Markers\+::create\+Board\+Image (\begin{DoxyParamCaption}\item[{cv\+::\+Size}]{grid\+Size,  }\item[{int}]{Marker\+Size,  }\item[{int}]{Marker\+Distance,  }\item[{\mbox{\hyperlink{classaruco_1_1BoardConfiguration}{Board\+Configuration}} \&}]{TInfo,  }\item[{vector$<$ int $>$ $\ast$}]{excluded\+Ids = {\ttfamily NULL} }\end{DoxyParamCaption}) throw ( cv\+::\+Exception) \hspace{0.3cm}{\ttfamily [static]}}

Creates a printable image of a board 
\begin{DoxyParams}{Parameters}
{\em grid\+Size} & grid layout (numer of sqaures in x and Y) \\
\hline
{\em Marker\+Size} & size of markers sides in pixels \\
\hline
{\em Marker\+Distance} & distance between the markers \\
\hline
{\em TInfo} & output \\
\hline
{\em excluded\+Ids} & set of ids excluded from the board \\
\hline
\end{DoxyParams}


Definition at line 95 of file arucofidmarkers.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{96   \{}
\DoxyCodeLine{97 }
\DoxyCodeLine{98 }
\DoxyCodeLine{99 }
\DoxyCodeLine{100     srand(cv::getTickCount());}
\DoxyCodeLine{101     \textcolor{keywordtype}{int} nMarkers=gridSize.height*gridSize.width;}
\DoxyCodeLine{102     TInfo.resize(nMarkers);}
\DoxyCodeLine{103     vector<int> ids=\mbox{\hyperlink{classaruco_1_1FiducidalMarkers_a4eab429fc336e4f32014f41f977507c5}{getListOfValidMarkersIds\_random}}(nMarkers,excludedIds);}
\DoxyCodeLine{104     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i=0;i<nMarkers;i++)}
\DoxyCodeLine{105       TInfo[i].\textcolor{keywordtype}{id}=ids[i];}
\DoxyCodeLine{106 }
\DoxyCodeLine{107     \textcolor{keywordtype}{int} sizeY=gridSize.height*MarkerSize+(gridSize.height-\/1)*MarkerDistance;}
\DoxyCodeLine{108     \textcolor{keywordtype}{int} sizeX=gridSize.width*MarkerSize+(gridSize.width-\/1)*MarkerDistance;}
\DoxyCodeLine{109     \textcolor{comment}{//find the center so that the ref systeem is in it}}
\DoxyCodeLine{110     \textcolor{keywordtype}{int} centerX=sizeX/2;}
\DoxyCodeLine{111     \textcolor{keywordtype}{int} centerY=sizeY/2;}
\DoxyCodeLine{112 }
\DoxyCodeLine{113     \textcolor{comment}{//indicate the data is expressed in pixels}}
\DoxyCodeLine{114     TInfo.mInfoType=\mbox{\hyperlink{classaruco_1_1BoardConfiguration_adb69c6517b1c71e1e55773310d3229d7a34033d50a964da5808954a87bbf7b03a}{BoardConfiguration::PIX}};}
\DoxyCodeLine{115     Mat tableImage(sizeY,sizeX,CV\_8UC1);}
\DoxyCodeLine{116     tableImage.setTo(Scalar(255));}
\DoxyCodeLine{117     \textcolor{keywordtype}{int} idp=0;}
\DoxyCodeLine{118     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} y=0;y<gridSize.height;y++)}
\DoxyCodeLine{119       \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} x=0;x<gridSize.width;x++,idp++) \{}
\DoxyCodeLine{120         Mat subrect(tableImage,Rect( x*(MarkerDistance+MarkerSize),y*(MarkerDistance+MarkerSize),MarkerSize,MarkerSize));}
\DoxyCodeLine{121         Mat marker=\mbox{\hyperlink{classaruco_1_1FiducidalMarkers_a47f92ec85722ff997a687d7283d0ed78}{createMarkerImage}}( TInfo[idp].\textcolor{keywordtype}{id},MarkerSize);}
\DoxyCodeLine{122         \textcolor{comment}{//set the location of the corners}}
\DoxyCodeLine{123         TInfo[idp].resize(4);}
\DoxyCodeLine{124         TInfo[idp][0]=cv::Point3f( x*(MarkerDistance+MarkerSize),y*(MarkerDistance+MarkerSize),0);}
\DoxyCodeLine{125         TInfo[idp][1]=cv::Point3f( x*(MarkerDistance+MarkerSize)+MarkerSize,y*(MarkerDistance+MarkerSize),0);}
\DoxyCodeLine{126         TInfo[idp][2]=cv::Point3f( x*(MarkerDistance+MarkerSize)+MarkerSize,y*(MarkerDistance+MarkerSize)+MarkerSize,0);}
\DoxyCodeLine{127         TInfo[idp][3]=cv::Point3f( x*(MarkerDistance+MarkerSize),y*(MarkerDistance+MarkerSize)+MarkerSize,0);}
\DoxyCodeLine{128         \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i=0;i<4;i++) TInfo[idp][i]-\/=cv::Point3f(centerX,centerY,0);}
\DoxyCodeLine{129         marker.copyTo(subrect);}
\DoxyCodeLine{130       \}}
\DoxyCodeLine{131 }
\DoxyCodeLine{132     \textcolor{keywordflow}{return} tableImage;}
\DoxyCodeLine{133   \}}

\end{DoxyCode}
\mbox{\Hypertarget{classaruco_1_1FiducidalMarkers_a5e57e6262326e1831c8174d2d0111ab7}\label{classaruco_1_1FiducidalMarkers_a5e57e6262326e1831c8174d2d0111ab7}} 
\index{aruco::FiducidalMarkers@{aruco::FiducidalMarkers}!createBoardImage\_ChessBoard@{createBoardImage\_ChessBoard}}
\index{createBoardImage\_ChessBoard@{createBoardImage\_ChessBoard}!aruco::FiducidalMarkers@{aruco::FiducidalMarkers}}
\doxysubsubsection{\texorpdfstring{createBoardImage\_ChessBoard()}{createBoardImage\_ChessBoard()}}
{\footnotesize\ttfamily cv\+::\+Mat aruco\+::\+Fiducidal\+Markers\+::create\+Board\+Image\+\_\+\+Chess\+Board (\begin{DoxyParamCaption}\item[{cv\+::\+Size}]{grid\+Size,  }\item[{int}]{Marker\+Size,  }\item[{\mbox{\hyperlink{classaruco_1_1BoardConfiguration}{Board\+Configuration}} \&}]{TInfo,  }\item[{bool}]{set\+Data\+Centered = {\ttfamily true},  }\item[{vector$<$ int $>$ $\ast$}]{excluded\+Ids = {\ttfamily NULL} }\end{DoxyParamCaption}) throw ( cv\+::\+Exception) \hspace{0.3cm}{\ttfamily [static]}}

Creates a printable image of a board in chessboard\+\_\+like manner 
\begin{DoxyParams}{Parameters}
{\em grid\+Size} & grid layout (numer of sqaures in x and Y) \\
\hline
{\em Marker\+Size} & size of markers sides in pixels \\
\hline
{\em TInfo} & output \\
\hline
{\em set\+Data\+Centered} & indicates if the center is set at the center of the board. Otherwise it is the left-\/upper corner \\
\hline
\end{DoxyParams}


Definition at line 141 of file arucofidmarkers.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{142   \{}
\DoxyCodeLine{143 }
\DoxyCodeLine{144 }
\DoxyCodeLine{145     srand(cv::getTickCount());}
\DoxyCodeLine{146 }
\DoxyCodeLine{147     \textcolor{comment}{//determine the total number of markers required}}
\DoxyCodeLine{148     \textcolor{keywordtype}{int} nMarkers= 3*(gridSize.width*gridSize.height)/4;\textcolor{comment}{//overdetermine  the number of marker read}}
\DoxyCodeLine{149     vector<int> idsVector=\mbox{\hyperlink{classaruco_1_1FiducidalMarkers_a4eab429fc336e4f32014f41f977507c5}{getListOfValidMarkersIds\_random}}(nMarkers,excludedIds);}
\DoxyCodeLine{150 }
\DoxyCodeLine{151 }
\DoxyCodeLine{152     \textcolor{keywordtype}{int} sizeY=gridSize.height*MarkerSize;}
\DoxyCodeLine{153     \textcolor{keywordtype}{int} sizeX=gridSize.width*MarkerSize;}
\DoxyCodeLine{154     \textcolor{comment}{//find the center so that the ref systeem is in it}}
\DoxyCodeLine{155     \textcolor{keywordtype}{int} centerX=sizeX/2;}
\DoxyCodeLine{156     \textcolor{keywordtype}{int} centerY=sizeY/2;}
\DoxyCodeLine{157 }
\DoxyCodeLine{158     Mat tableImage(sizeY,sizeX,CV\_8UC1);}
\DoxyCodeLine{159     tableImage.setTo(Scalar(255));}
\DoxyCodeLine{160     TInfo.mInfoType=\mbox{\hyperlink{classaruco_1_1BoardConfiguration_adb69c6517b1c71e1e55773310d3229d7a34033d50a964da5808954a87bbf7b03a}{BoardConfiguration::PIX}};}
\DoxyCodeLine{161     \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} CurMarkerIdx=0;}
\DoxyCodeLine{162     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} y=0;y<gridSize.height;y++) \{}
\DoxyCodeLine{163 }
\DoxyCodeLine{164       \textcolor{keywordtype}{bool} toWrite;}
\DoxyCodeLine{165       \textcolor{keywordflow}{if} (y\%2==0) toWrite=\textcolor{keyword}{false};}
\DoxyCodeLine{166       \textcolor{keywordflow}{else} toWrite=\textcolor{keyword}{true};}
\DoxyCodeLine{167       \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} x=0;x<gridSize.width;x++) \{}
\DoxyCodeLine{168         toWrite=!toWrite;}
\DoxyCodeLine{169         \textcolor{keywordflow}{if} (toWrite) \{}
\DoxyCodeLine{170           \textcolor{keywordflow}{if} (CurMarkerIdx>=idsVector.size()) \textcolor{keywordflow}{throw} cv::Exception(999,\textcolor{stringliteral}{"{} FiducidalMarkers::createBoardImage\_ChessBoard"{}},\textcolor{stringliteral}{"{}INTERNAL ERROR. REWRITE THIS!!"{}},\_\_FILE\_\_,\_\_LINE\_\_);}
\DoxyCodeLine{171           TInfo.push\_back( MarkerInfo(idsVector[CurMarkerIdx++]));}
\DoxyCodeLine{172 }
\DoxyCodeLine{173           Mat subrect(tableImage,Rect( x*MarkerSize,y*MarkerSize,MarkerSize,MarkerSize));}
\DoxyCodeLine{174           Mat marker=\mbox{\hyperlink{classaruco_1_1FiducidalMarkers_a47f92ec85722ff997a687d7283d0ed78}{createMarkerImage}}( TInfo.back().id,MarkerSize);}
\DoxyCodeLine{175           \textcolor{comment}{//set the location of the corners}}
\DoxyCodeLine{176           TInfo.back().resize(4);}
\DoxyCodeLine{177           TInfo.back()[0]=cv::Point3f( x*(MarkerSize),y*(MarkerSize),0);}
\DoxyCodeLine{178           TInfo.back()[1]=cv::Point3f( x*(MarkerSize)+MarkerSize,y*(MarkerSize),0);}
\DoxyCodeLine{179           TInfo.back()[2]=cv::Point3f( x*(MarkerSize)+MarkerSize,y*(MarkerSize)+MarkerSize,0);}
\DoxyCodeLine{180           TInfo.back()[3]=cv::Point3f( x*(MarkerSize),y*(MarkerSize)+MarkerSize,0);}
\DoxyCodeLine{181           \textcolor{keywordflow}{if} (centerData) \{}
\DoxyCodeLine{182             \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i=0;i<4;i++)}
\DoxyCodeLine{183               TInfo.back()[i]-\/=cv::Point3f(centerX,centerY,0);}
\DoxyCodeLine{184           \}}
\DoxyCodeLine{185           marker.copyTo(subrect);}
\DoxyCodeLine{186         \}}
\DoxyCodeLine{187       \}}
\DoxyCodeLine{188     \}}
\DoxyCodeLine{189 }
\DoxyCodeLine{190     \textcolor{keywordflow}{return} tableImage;}
\DoxyCodeLine{191   \}}

\end{DoxyCode}
\mbox{\Hypertarget{classaruco_1_1FiducidalMarkers_a98347db467ae251ab3d709c07aa983f1}\label{classaruco_1_1FiducidalMarkers_a98347db467ae251ab3d709c07aa983f1}} 
\index{aruco::FiducidalMarkers@{aruco::FiducidalMarkers}!createBoardImage\_Frame@{createBoardImage\_Frame}}
\index{createBoardImage\_Frame@{createBoardImage\_Frame}!aruco::FiducidalMarkers@{aruco::FiducidalMarkers}}
\doxysubsubsection{\texorpdfstring{createBoardImage\_Frame()}{createBoardImage\_Frame()}}
{\footnotesize\ttfamily cv\+::\+Mat aruco\+::\+Fiducidal\+Markers\+::create\+Board\+Image\+\_\+\+Frame (\begin{DoxyParamCaption}\item[{cv\+::\+Size}]{grid\+Size,  }\item[{int}]{Marker\+Size,  }\item[{int}]{Marker\+Distance,  }\item[{\mbox{\hyperlink{classaruco_1_1BoardConfiguration}{Board\+Configuration}} \&}]{TInfo,  }\item[{bool}]{set\+Data\+Centered = {\ttfamily true},  }\item[{vector$<$ int $>$ $\ast$}]{excluded\+Ids = {\ttfamily NULL} }\end{DoxyParamCaption}) throw ( cv\+::\+Exception) \hspace{0.3cm}{\ttfamily [static]}}

Creates a printable image of a board in a frame fashion 
\begin{DoxyParams}{Parameters}
{\em grid\+Size} & grid layout (numer of sqaures in x and Y) \\
\hline
{\em Marker\+Size} & size of markers sides in pixels \\
\hline
{\em Marker\+Distance} & distance between the markers \\
\hline
{\em TInfo} & output \\
\hline
{\em set\+Data\+Centered} & indicates if the center is set at the center of the board. Otherwise it is the left-\/upper corner \\
\hline
\end{DoxyParams}


Definition at line 201 of file arucofidmarkers.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{202   \{}
\DoxyCodeLine{203     srand(cv::getTickCount());}
\DoxyCodeLine{204     \textcolor{keywordtype}{int} nMarkers=2*gridSize.height*2*gridSize.width;}
\DoxyCodeLine{205     vector<int> idsVector=\mbox{\hyperlink{classaruco_1_1FiducidalMarkers_a4eab429fc336e4f32014f41f977507c5}{getListOfValidMarkersIds\_random}}(nMarkers,excludedIds);}
\DoxyCodeLine{206 }
\DoxyCodeLine{207     \textcolor{keywordtype}{int} sizeY=gridSize.height*MarkerSize+MarkerDistance*(gridSize.height-\/1);}
\DoxyCodeLine{208     \textcolor{keywordtype}{int} sizeX=gridSize.width*MarkerSize+MarkerDistance*(gridSize.width-\/1);}
\DoxyCodeLine{209     \textcolor{comment}{//find the center so that the ref systeem is in it}}
\DoxyCodeLine{210     \textcolor{keywordtype}{int} centerX=sizeX/2;}
\DoxyCodeLine{211     \textcolor{keywordtype}{int} centerY=sizeY/2;}
\DoxyCodeLine{212 }
\DoxyCodeLine{213     Mat tableImage(sizeY,sizeX,CV\_8UC1);}
\DoxyCodeLine{214     tableImage.setTo(Scalar(255));}
\DoxyCodeLine{215     TInfo.mInfoType=\mbox{\hyperlink{classaruco_1_1BoardConfiguration_adb69c6517b1c71e1e55773310d3229d7a34033d50a964da5808954a87bbf7b03a}{BoardConfiguration::PIX}};}
\DoxyCodeLine{216     \textcolor{keywordtype}{int} CurMarkerIdx=0;}
\DoxyCodeLine{217     \textcolor{keywordtype}{int} mSize=MarkerSize+MarkerDistance;}
\DoxyCodeLine{218     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} y=0;y<gridSize.height;y++) \{}
\DoxyCodeLine{219       \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} x=0;x<gridSize.width;x++) \{}
\DoxyCodeLine{220         \textcolor{keywordflow}{if} (y==0 || y==gridSize.height-\/1 || x==0 ||  x==gridSize.width-\/1) \{}
\DoxyCodeLine{221           TInfo.push\_back(  MarkerInfo(idsVector[CurMarkerIdx++]));}
\DoxyCodeLine{222           Mat subrect(tableImage,Rect( x*mSize,y*mSize,MarkerSize,MarkerSize));}
\DoxyCodeLine{223           Mat marker=\mbox{\hyperlink{classaruco_1_1FiducidalMarkers_a47f92ec85722ff997a687d7283d0ed78}{createMarkerImage}}( TInfo.back().id,MarkerSize);}
\DoxyCodeLine{224           marker.copyTo(subrect);}
\DoxyCodeLine{225           \textcolor{comment}{//set the location of the corners}}
\DoxyCodeLine{226           TInfo.back().resize(4);}
\DoxyCodeLine{227           TInfo.back()[0]=cv::Point3f( x*(mSize),y*(mSize),0);}
\DoxyCodeLine{228           TInfo.back()[1]=cv::Point3f( x*(mSize)+MarkerSize,y*(mSize),0);}
\DoxyCodeLine{229           TInfo.back()[2]=cv::Point3f( x*(mSize)+MarkerSize,y*(mSize)+MarkerSize,0);}
\DoxyCodeLine{230           TInfo.back()[3]=cv::Point3f( x*(mSize),y*(mSize)+MarkerSize,0);}
\DoxyCodeLine{231           \textcolor{keywordflow}{if} (centerData) \{}
\DoxyCodeLine{232             \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i=0;i<4;i++)}
\DoxyCodeLine{233               TInfo.back()[i]-\/=cv::Point3f(centerX,centerY,0);}
\DoxyCodeLine{234           \}}
\DoxyCodeLine{235 }
\DoxyCodeLine{236         \}}
\DoxyCodeLine{237       \}}
\DoxyCodeLine{238     \}}
\DoxyCodeLine{239 }
\DoxyCodeLine{240     \textcolor{keywordflow}{return} tableImage;}
\DoxyCodeLine{241   \}}

\end{DoxyCode}
\mbox{\Hypertarget{classaruco_1_1FiducidalMarkers_a47f92ec85722ff997a687d7283d0ed78}\label{classaruco_1_1FiducidalMarkers_a47f92ec85722ff997a687d7283d0ed78}} 
\index{aruco::FiducidalMarkers@{aruco::FiducidalMarkers}!createMarkerImage@{createMarkerImage}}
\index{createMarkerImage@{createMarkerImage}!aruco::FiducidalMarkers@{aruco::FiducidalMarkers}}
\doxysubsubsection{\texorpdfstring{createMarkerImage()}{createMarkerImage()}}
{\footnotesize\ttfamily Mat aruco\+::\+Fiducidal\+Markers\+::create\+Marker\+Image (\begin{DoxyParamCaption}\item[{int}]{id,  }\item[{int}]{size }\end{DoxyParamCaption}) throw ( cv\+::\+Exception) \hspace{0.3cm}{\ttfamily [static]}}



Creates an ar marker with the id specified using a modified version of the hamming code. There are two type of markers\+: a) These of 10 bits b) these of 3 bits. The latter are employed for applications that need few marker but they must be small. The two type of markers are distinguished by their ids. While the first type of markers have ids in the interval \mbox{[}0-\/1023\mbox{]}, the second type ids in the interval \mbox{[}2000-\/2006\mbox{]}. 

\hypertarget{classaruco_1_1FiducidalMarkers_autotoc_md0}{}\doxysubsubsection{10 bits markers}\label{classaruco_1_1FiducidalMarkers_autotoc_md0}
There are a total of 5 rows of 5 cols. Each row encodes a total of 2 bits, so there are 2$^\wedge$10 bits\+:(0-\/1023).

The least significative bytes are first (from left-\/up to to right-\/bottom)

Example\+: the id = 110 (decimal) is be represented in binary as \+: 00 01 10 11 10.

Then, it will generate the following marker\+:


\begin{DoxyEnumerate}
\item 1st row encodes 00\+: 1 0 0 0 0 \+: hex 0x10
\item 2nd row encodes 01\+: 1 0 1 1 1 \+: hex 0x17
\item 3nd row encodes 10\+: 0 1 0 0 1 \+: hex 0x09
\item 4th row encodes 11\+: 0 1 1 1 0 \+: hex 0x0e
\item 5th row encodes 10\+: 0 1 0 0 1 \+: hex 0x09
\end{DoxyEnumerate}

Note that \+: The first bit, is the inverse of the hamming parity. This avoids the 0 0 0 0 0 to be valid These marker are detected by the function get\+Fiduciadl\+Marker\+\_\+\+Aruco\+\_\+\+Type1 

Definition at line 44 of file arucofidmarkers.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{45   \{}
\DoxyCodeLine{46     Mat marker(size,size, CV\_8UC1);}
\DoxyCodeLine{47     marker.setTo(Scalar(0));}
\DoxyCodeLine{48     \textcolor{keywordflow}{if} (0<=\textcolor{keywordtype}{id} \&\& \textcolor{keywordtype}{id}<1024) \{}
\DoxyCodeLine{49       \textcolor{comment}{//for each line, create}}
\DoxyCodeLine{50       \textcolor{keywordtype}{int} swidth=size/7;}
\DoxyCodeLine{51       \textcolor{keywordtype}{int} ids[4]=\{0x10,0x17,0x09,0x0e\};}
\DoxyCodeLine{52       \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} y=0;y<5;y++) \{}
\DoxyCodeLine{53         \textcolor{keywordtype}{int} index=(\textcolor{keywordtype}{id}>>2*(4-\/y)) \& 0x0003;}
\DoxyCodeLine{54         \textcolor{keywordtype}{int} val=ids[index];}
\DoxyCodeLine{55         \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} x=0;x<5;x++) \{}
\DoxyCodeLine{56           Mat roi=marker(Rect((x+1)* swidth,(y+1)* swidth,swidth,swidth));}
\DoxyCodeLine{57           \textcolor{keywordflow}{if} ( ( val>>(4-\/x) ) \& 0x0001 ) roi.setTo(Scalar(255));}
\DoxyCodeLine{58           \textcolor{keywordflow}{else} roi.setTo(Scalar(0));}
\DoxyCodeLine{59         \}}
\DoxyCodeLine{60       \}}
\DoxyCodeLine{61     \}}
\DoxyCodeLine{62     \textcolor{keywordflow}{else}  \textcolor{keywordflow}{throw} cv::Exception(9004,\textcolor{stringliteral}{"{}id invalid"{}},\textcolor{stringliteral}{"{}createMarker"{}},\_\_FILE\_\_,\_\_LINE\_\_);}
\DoxyCodeLine{63 }
\DoxyCodeLine{64     \textcolor{keywordflow}{return} marker;}
\DoxyCodeLine{65   \}}

\end{DoxyCode}
\mbox{\Hypertarget{classaruco_1_1FiducidalMarkers_add9709849669088020ca67b9417e5496}\label{classaruco_1_1FiducidalMarkers_add9709849669088020ca67b9417e5496}} 
\index{aruco::FiducidalMarkers@{aruco::FiducidalMarkers}!detect@{detect}}
\index{detect@{detect}!aruco::FiducidalMarkers@{aruco::FiducidalMarkers}}
\doxysubsubsection{\texorpdfstring{detect()}{detect()}}
{\footnotesize\ttfamily int aruco\+::\+Fiducidal\+Markers\+::detect (\begin{DoxyParamCaption}\item[{const cv\+::\+Mat \&}]{in,  }\item[{int \&}]{n\+Rotations }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}

Detection of fiducidal aruco markers (10 bits) 
\begin{DoxyParams}{Parameters}
{\em in} & input image with the patch that contains the possible marker \\
\hline
{\em n\+Rotations} & number of 90deg rotations in clockwise direction needed to set the marker in correct position \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
-\/1 if the image passed is a not a valid marker, and its id in case it really is a marker 
\end{DoxyReturn}


Definition at line 405 of file arucofidmarkers.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{406   \{}
\DoxyCodeLine{407     assert(in.rows==in.cols);}
\DoxyCodeLine{408     Mat grey;}
\DoxyCodeLine{409     \textcolor{keywordflow}{if} ( in.type()==CV\_8UC1) grey=in;}
\DoxyCodeLine{410     \textcolor{keywordflow}{else} cv::cvtColor(in,grey,CV\_BGR2GRAY);}
\DoxyCodeLine{411     \textcolor{comment}{//threshold image}}
\DoxyCodeLine{412     threshold(grey, grey,125, 255, THRESH\_BINARY|THRESH\_OTSU);}
\DoxyCodeLine{413 }
\DoxyCodeLine{414     \textcolor{comment}{//now, analyze the interior in order to get the id}}
\DoxyCodeLine{415     \textcolor{comment}{//try first with the big ones}}
\DoxyCodeLine{416 }
\DoxyCodeLine{417     \textcolor{keywordflow}{return} \mbox{\hyperlink{classaruco_1_1FiducidalMarkers_a38c71a2c01171ae23f346a90613f31d0}{analyzeMarkerImage}}(grey,nRotations);;}
\DoxyCodeLine{418     \textcolor{comment}{//too many false positives}}
\DoxyCodeLine{419     \textcolor{comment}{/*    int id=analyzeMarkerImage(grey,nRotations);}}
\DoxyCodeLine{420 \textcolor{comment}{        if (id!=-\/1) return id;}}
\DoxyCodeLine{421 \textcolor{comment}{        id=analyzeMarkerImage\_type2(grey,nRotations);}}
\DoxyCodeLine{422 \textcolor{comment}{        if (id!=-\/1) return id;}}
\DoxyCodeLine{423 \textcolor{comment}{        return -\/1;*/}}
\DoxyCodeLine{424   \}}

\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classaruco_1_1FiducidalMarkers_add9709849669088020ca67b9417e5496_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classaruco_1_1FiducidalMarkers_a4eab429fc336e4f32014f41f977507c5}\label{classaruco_1_1FiducidalMarkers_a4eab429fc336e4f32014f41f977507c5}} 
\index{aruco::FiducidalMarkers@{aruco::FiducidalMarkers}!getListOfValidMarkersIds\_random@{getListOfValidMarkersIds\_random}}
\index{getListOfValidMarkersIds\_random@{getListOfValidMarkersIds\_random}!aruco::FiducidalMarkers@{aruco::FiducidalMarkers}}
\doxysubsubsection{\texorpdfstring{getListOfValidMarkersIds\_random()}{getListOfValidMarkersIds\_random()}}
{\footnotesize\ttfamily vector$<$ int $>$ aruco\+::\+Fiducidal\+Markers\+::get\+List\+Of\+Valid\+Markers\+Ids\+\_\+random (\begin{DoxyParamCaption}\item[{int}]{n\+Markers,  }\item[{vector$<$ int $>$ $\ast$}]{excluded }\end{DoxyParamCaption}) throw ( cv\+::\+Exception) \hspace{0.3cm}{\ttfamily [static]}, {\ttfamily [private]}}



Definition at line 426 of file arucofidmarkers.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{427   \{}
\DoxyCodeLine{428 }
\DoxyCodeLine{429     \textcolor{keywordflow}{if} (excluded!=NULL)}
\DoxyCodeLine{430       \textcolor{keywordflow}{if} (nMarkers+excluded-\/>size()>1024) \textcolor{keywordflow}{throw} cv::Exception(8888,\textcolor{stringliteral}{"{}FiducidalMarkers::getListOfValidMarkersIds\_random"{}},\textcolor{stringliteral}{"{}Number of possible markers is exceeded"{}},\_\_FILE\_\_,\_\_LINE\_\_);}
\DoxyCodeLine{431 }
\DoxyCodeLine{432     vector<int> listOfMarkers(1024);}
\DoxyCodeLine{433     \textcolor{comment}{//set a list with all ids}}
\DoxyCodeLine{434     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i=0;i<1024;i++) listOfMarkers[i]=i;}
\DoxyCodeLine{435 }
\DoxyCodeLine{436     \textcolor{keywordflow}{if} (excluded!=NULL)\textcolor{comment}{//set excluded to -\/1}}
\DoxyCodeLine{437       \textcolor{keywordflow}{for} (\textcolor{keywordtype}{size\_t} i=0;i<excluded-\/>size();++i)}
\DoxyCodeLine{438         listOfMarkers[excluded-\/>at(i)]=-\/1;}
\DoxyCodeLine{439     \textcolor{comment}{//random shuffle}}
\DoxyCodeLine{440     random\_shuffle(listOfMarkers.begin(),listOfMarkers.end());}
\DoxyCodeLine{441     \textcolor{comment}{//now, take the first  nMarkers elements with value !=-\/1}}
\DoxyCodeLine{442     \textcolor{keywordtype}{int} i=0;}
\DoxyCodeLine{443     vector<int> retList;}
\DoxyCodeLine{444     \textcolor{keywordflow}{while} (\textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}(retList.size())<nMarkers) \{}
\DoxyCodeLine{445       \textcolor{keywordflow}{if} (listOfMarkers[i]!=-\/1)}
\DoxyCodeLine{446         retList.push\_back(listOfMarkers[i]);}
\DoxyCodeLine{447       ++i;}
\DoxyCodeLine{448     \}}
\DoxyCodeLine{449     \textcolor{keywordflow}{return} retList;}
\DoxyCodeLine{450   \}}

\end{DoxyCode}
\mbox{\Hypertarget{classaruco_1_1FiducidalMarkers_a3390126a77b1667d3350dabcc683cc9e}\label{classaruco_1_1FiducidalMarkers_a3390126a77b1667d3350dabcc683cc9e}} 
\index{aruco::FiducidalMarkers@{aruco::FiducidalMarkers}!getMarkerMat@{getMarkerMat}}
\index{getMarkerMat@{getMarkerMat}!aruco::FiducidalMarkers@{aruco::FiducidalMarkers}}
\doxysubsubsection{\texorpdfstring{getMarkerMat()}{getMarkerMat()}}
{\footnotesize\ttfamily cv\+::\+Mat aruco\+::\+Fiducidal\+Markers\+::get\+Marker\+Mat (\begin{DoxyParamCaption}\item[{int}]{id }\end{DoxyParamCaption}) throw ( cv\+::\+Exception) \hspace{0.3cm}{\ttfamily [static]}}

Similar to create\+Marker\+Image. Instead of returning a visible image, returns a 8UC1 matrix of 0s and 1s with the marker info 

Definition at line 69 of file arucofidmarkers.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{70   \{}
\DoxyCodeLine{71     Mat marker(5,5, CV\_8UC1);}
\DoxyCodeLine{72     marker.setTo(Scalar(0));}
\DoxyCodeLine{73     \textcolor{keywordflow}{if} (0<=\textcolor{keywordtype}{id} \&\& \textcolor{keywordtype}{id}<1024) \{}
\DoxyCodeLine{74       \textcolor{comment}{//for each line, create}}
\DoxyCodeLine{75       \textcolor{keywordtype}{int} ids[4]=\{0x10,0x17,0x09,0x0e\};}
\DoxyCodeLine{76       \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} y=0;y<5;y++) \{}
\DoxyCodeLine{77         \textcolor{keywordtype}{int} index=(\textcolor{keywordtype}{id}>>2*(4-\/y)) \& 0x0003;}
\DoxyCodeLine{78         \textcolor{keywordtype}{int} val=ids[index];}
\DoxyCodeLine{79         \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} x=0;x<5;x++) \{}
\DoxyCodeLine{80           \textcolor{keywordflow}{if} ( ( val>>(4-\/x) ) \& 0x0001 ) marker.at<uchar>(y,x)=1;}
\DoxyCodeLine{81           \textcolor{keywordflow}{else} marker.at<uchar>(y,x)=0;}
\DoxyCodeLine{82         \}}
\DoxyCodeLine{83       \}}
\DoxyCodeLine{84     \}}
\DoxyCodeLine{85     \textcolor{keywordflow}{else} \textcolor{keywordflow}{throw} cv::Exception (9189,\textcolor{stringliteral}{"{}Invalid marker id"{}},\textcolor{stringliteral}{"{}aruco::fiducidal::createMarkerMat"{}},\_\_FILE\_\_,\_\_LINE\_\_);}
\DoxyCodeLine{86     \textcolor{keywordflow}{return} marker;}
\DoxyCodeLine{87   \}}

\end{DoxyCode}
\mbox{\Hypertarget{classaruco_1_1FiducidalMarkers_a60a79890673b9d0c930d807df594715e}\label{classaruco_1_1FiducidalMarkers_a60a79890673b9d0c930d807df594715e}} 
\index{aruco::FiducidalMarkers@{aruco::FiducidalMarkers}!hammDistMarker@{hammDistMarker}}
\index{hammDistMarker@{hammDistMarker}!aruco::FiducidalMarkers@{aruco::FiducidalMarkers}}
\doxysubsubsection{\texorpdfstring{hammDistMarker()}{hammDistMarker()}}
{\footnotesize\ttfamily int aruco\+::\+Fiducidal\+Markers\+::hamm\+Dist\+Marker (\begin{DoxyParamCaption}\item[{cv\+::\+Mat}]{bits }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}, {\ttfamily [private]}}



Definition at line 269 of file arucofidmarkers.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{270   \{}
\DoxyCodeLine{271     \textcolor{keywordtype}{int} ids[4][5]=}
\DoxyCodeLine{272     \{}
\DoxyCodeLine{273       \{}
\DoxyCodeLine{274         1,0,0,0,0}
\DoxyCodeLine{275       \}}
\DoxyCodeLine{276       ,}
\DoxyCodeLine{277       \{}
\DoxyCodeLine{278         1,0,1,1,1}
\DoxyCodeLine{279       \}}
\DoxyCodeLine{280       ,}
\DoxyCodeLine{281       \{}
\DoxyCodeLine{282         0,1,0,0,1}
\DoxyCodeLine{283       \}}
\DoxyCodeLine{284       ,}
\DoxyCodeLine{285       \{}
\DoxyCodeLine{286         0, 1, 1, 1, 0}
\DoxyCodeLine{287       \}}
\DoxyCodeLine{288     \};}
\DoxyCodeLine{289     \textcolor{keywordtype}{int} dist=0;}
\DoxyCodeLine{290 }
\DoxyCodeLine{291     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} y=0;y<5;y++)}
\DoxyCodeLine{292     \{}
\DoxyCodeLine{293       \textcolor{keywordtype}{int} minSum=1e5;}
\DoxyCodeLine{294       \textcolor{comment}{//hamming distance to each possible word}}
\DoxyCodeLine{295       \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} p=0;p<4;p++)}
\DoxyCodeLine{296       \{}
\DoxyCodeLine{297         \textcolor{keywordtype}{int} sum=0;}
\DoxyCodeLine{298         \textcolor{comment}{//now, count}}
\DoxyCodeLine{299         \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} x=0;x<5;x++)}
\DoxyCodeLine{300           sum+=  bits.at<uchar>(y,x) == ids[p][x]?0:1;}
\DoxyCodeLine{301         \textcolor{keywordflow}{if} (minSum>sum) minSum=sum;}
\DoxyCodeLine{302       \}}
\DoxyCodeLine{303       \textcolor{comment}{//do the and}}
\DoxyCodeLine{304       dist+=minSum;}
\DoxyCodeLine{305     \}}
\DoxyCodeLine{306 }
\DoxyCodeLine{307     \textcolor{keywordflow}{return} dist;}
\DoxyCodeLine{308   \}}

\end{DoxyCode}
\mbox{\Hypertarget{classaruco_1_1FiducidalMarkers_ad80dda43c48261bbf4fb9df7b5323ff7}\label{classaruco_1_1FiducidalMarkers_ad80dda43c48261bbf4fb9df7b5323ff7}} 
\index{aruco::FiducidalMarkers@{aruco::FiducidalMarkers}!rotate@{rotate}}
\index{rotate@{rotate}!aruco::FiducidalMarkers@{aruco::FiducidalMarkers}}
\doxysubsubsection{\texorpdfstring{rotate()}{rotate()}}
{\footnotesize\ttfamily Mat aruco\+::\+Fiducidal\+Markers\+::rotate (\begin{DoxyParamCaption}\item[{const cv\+::\+Mat \&}]{in }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}, {\ttfamily [private]}}



Definition at line 248 of file arucofidmarkers.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{249   \{}
\DoxyCodeLine{250     Mat out;}
\DoxyCodeLine{251     in.copyTo(out);}
\DoxyCodeLine{252     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i=0;i<in.rows;i++)}
\DoxyCodeLine{253     \{}
\DoxyCodeLine{254       \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} j=0;j<in.cols;j++)}
\DoxyCodeLine{255       \{}
\DoxyCodeLine{256         out.at<uchar>(i,j)=in.at<uchar>(in.cols-\/j-\/1,i);}
\DoxyCodeLine{257       \}}
\DoxyCodeLine{258     \}}
\DoxyCodeLine{259     \textcolor{keywordflow}{return} out;}
\DoxyCodeLine{260   \}}

\end{DoxyCode}


The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
aruco/include/aruco/\mbox{\hyperlink{arucofidmarkers_8h}{arucofidmarkers.\+h}}\item 
aruco/src/aruco/\mbox{\hyperlink{arucofidmarkers_8cpp}{arucofidmarkers.\+cpp}}\end{DoxyCompactItemize}
