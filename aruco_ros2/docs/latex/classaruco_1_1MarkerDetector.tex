\hypertarget{classaruco_1_1MarkerDetector}{}\doxysection{aruco\+::Marker\+Detector Class Reference}
\label{classaruco_1_1MarkerDetector}\index{aruco::MarkerDetector@{aruco::MarkerDetector}}


Main class for marker detection.  




{\ttfamily \#include $<$markerdetector.\+h$>$}

\doxysubsection*{Classes}
\begin{DoxyCompactItemize}
\item 
class \mbox{\hyperlink{classaruco_1_1MarkerDetector_1_1MarkerCandidate}{Marker\+Candidate}}
\end{DoxyCompactItemize}
\doxysubsection*{Public Types}
\begin{DoxyCompactItemize}
\item 
enum \mbox{\hyperlink{classaruco_1_1MarkerDetector_a1d6ee5812484ae973ea2638aa054b389}{Threshold\+Methods}} \{ \mbox{\hyperlink{classaruco_1_1MarkerDetector_a1d6ee5812484ae973ea2638aa054b389abbc9aaab9cd6580cfc292b76bb287fe5}{FIXED\+\_\+\+THRES}}
, \mbox{\hyperlink{classaruco_1_1MarkerDetector_a1d6ee5812484ae973ea2638aa054b389afdbf9cecf1d818516da5701666639c67}{ADPT\+\_\+\+THRES}}
, \mbox{\hyperlink{classaruco_1_1MarkerDetector_a1d6ee5812484ae973ea2638aa054b389a597d69a6a2c7166947ed5c885d63b65c}{CANNY}}
 \}
\item 
enum \mbox{\hyperlink{classaruco_1_1MarkerDetector_ace0069f60aa5cef25a455be1e3d66dc1}{Corner\+Refinement\+Method}} \{ \mbox{\hyperlink{classaruco_1_1MarkerDetector_ace0069f60aa5cef25a455be1e3d66dc1a818e862759af62704385015cf0ca2239}{NONE}}
, \mbox{\hyperlink{classaruco_1_1MarkerDetector_ace0069f60aa5cef25a455be1e3d66dc1a96acc78a258cbd0ee75815a114c82367}{HARRIS}}
, \mbox{\hyperlink{classaruco_1_1MarkerDetector_ace0069f60aa5cef25a455be1e3d66dc1a6a41c357297ab089899bad573f91cc58}{SUBPIX}}
, \mbox{\hyperlink{classaruco_1_1MarkerDetector_ace0069f60aa5cef25a455be1e3d66dc1a96976a499df924efb6218a01cd226e1f}{LINES}}
 \}
\end{DoxyCompactItemize}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classaruco_1_1MarkerDetector_aeb11e4c8d99e619338f9453b03252722}{Marker\+Detector}} ()
\item 
\mbox{\hyperlink{classaruco_1_1MarkerDetector_aafadf4a0b81a7f03e443f0ad79fdf8a9}{$\sim$\+Marker\+Detector}} ()
\item 
void \mbox{\hyperlink{classaruco_1_1MarkerDetector_ac6da81367de2a8468925e1ac1b45760c}{detect}} (const cv\+::\+Mat \&input, std\+::vector$<$ \mbox{\hyperlink{classaruco_1_1Marker}{Marker}} $>$ \&detected\+Markers, cv\+::\+Mat cam\+Matrix=cv\+::\+Mat(), cv\+::\+Mat dist\+Coeff=cv\+::\+Mat(), float marker\+Size\+Meters=-\/1, bool set\+YPerpendicular=true)  throw (cv\+::\+Exception)
\item 
void \mbox{\hyperlink{classaruco_1_1MarkerDetector_a48c485fdfe357d5283f87628829a65c7}{detect}} (const cv\+::\+Mat \&input, std\+::vector$<$ \mbox{\hyperlink{classaruco_1_1Marker}{Marker}} $>$ \&detected\+Markers, \mbox{\hyperlink{classaruco_1_1CameraParameters}{Camera\+Parameters}} cam\+Params, float marker\+Size\+Meters=-\/1, bool set\+YPerpendicular=true)  throw (cv\+::\+Exception)
\item 
void \mbox{\hyperlink{classaruco_1_1MarkerDetector_af9f4d48cb107559f29a5c594ef6260b7}{set\+Threshold\+Method}} (\mbox{\hyperlink{classaruco_1_1MarkerDetector_a1d6ee5812484ae973ea2638aa054b389}{Threshold\+Methods}} m)
\item 
\mbox{\hyperlink{classaruco_1_1MarkerDetector_a1d6ee5812484ae973ea2638aa054b389}{Threshold\+Methods}} \mbox{\hyperlink{classaruco_1_1MarkerDetector_a3b82148fd92145a36f24eb08aea75fb6}{get\+Threshold\+Method}} () const
\item 
void \mbox{\hyperlink{classaruco_1_1MarkerDetector_ae62e6b62bc82793d640c9c04ff00335c}{set\+Threshold\+Params}} (double param1, double param2)
\item 
void \mbox{\hyperlink{classaruco_1_1MarkerDetector_a6a3f7889bd057f47425ade483833953d}{get\+Threshold\+Params}} (double \&param1, double \&param2) const
\item 
const cv\+::\+Mat \& \mbox{\hyperlink{classaruco_1_1MarkerDetector_af5d46972fb431b3b147c78bdac2096f3}{get\+Thresholded\+Image}} ()
\item 
void \mbox{\hyperlink{classaruco_1_1MarkerDetector_ae46e37f9795c2d95084fab9f46a36a7a}{set\+Corner\+Refinement\+Method}} (\mbox{\hyperlink{classaruco_1_1MarkerDetector_ace0069f60aa5cef25a455be1e3d66dc1}{Corner\+Refinement\+Method}} method)
\item 
\mbox{\hyperlink{classaruco_1_1MarkerDetector_ace0069f60aa5cef25a455be1e3d66dc1}{Corner\+Refinement\+Method}} \mbox{\hyperlink{classaruco_1_1MarkerDetector_ac6775c929bb5fc017cceaa1abdb5aca2}{get\+Corner\+Refinement\+Method}} () const
\item 
void \mbox{\hyperlink{classaruco_1_1MarkerDetector_a759698a524bb93ff3dd2a30dcb7e3d87}{set\+Min\+Max\+Size}} (float min=0.\+03, float max=0.\+5)  throw (cv\+::\+Exception)
\item 
void \mbox{\hyperlink{classaruco_1_1MarkerDetector_a79a701055cdccd7816f509c91887fa2b}{get\+Min\+Max\+Size}} (float \&min, float \&max)
\item 
void \mbox{\hyperlink{classaruco_1_1MarkerDetector_a85d4908f578ea80f0815b11c912c31e0}{enable\+Erosion}} (bool enable)
\item 
void \mbox{\hyperlink{classaruco_1_1MarkerDetector_a334888d444947beff4b92b7c37cf4a6a}{set\+Desired\+Speed}} (int val)
\item 
int \mbox{\hyperlink{classaruco_1_1MarkerDetector_a7076508d26ba9a3e0606052d2a570bb8}{get\+Desired\+Speed}} () const
\item 
void \mbox{\hyperlink{classaruco_1_1MarkerDetector_a016caa551b0d14ca74913fa2036d0b5c}{set\+Maker\+Detector\+Function}} (int($\ast$markerdetector\+\_\+func)(const cv\+::\+Mat \&in, int \&n\+Rotations))
\item 
void \mbox{\hyperlink{classaruco_1_1MarkerDetector_a8a6f10343676f588c64a2978f3091e74}{pyr\+Down}} (unsigned int level)
\item 
void \mbox{\hyperlink{classaruco_1_1MarkerDetector_a0c45520746ab01c710b1e6dcc550c0db}{thres\+Hold}} (int method, const cv\+::\+Mat \&\mbox{\hyperlink{classaruco_1_1MarkerDetector_a4d67711d5b81e75832dd837401886209}{grey}}, cv\+::\+Mat \&thres\+Img, double param1=-\/1, double param2=-\/1)  throw (cv\+::\+Exception)
\item 
void \mbox{\hyperlink{classaruco_1_1MarkerDetector_a37be5db247987122dbc3e616da47e3e3}{detect\+Rectangles}} (const cv\+::\+Mat \&thres\+Img, vector$<$ std\+::vector$<$ cv\+::\+Point2f $>$ $>$ \&candidates)
\item 
const vector$<$ std\+::vector$<$ cv\+::\+Point2f $>$ $>$ \& \mbox{\hyperlink{classaruco_1_1MarkerDetector_a6d42fe278bfc251659d4e28796601c2f}{get\+Candidates}} ()
\item 
bool \mbox{\hyperlink{classaruco_1_1MarkerDetector_aedcd73ff274bad9885b3086d3b216b08}{warp}} (cv\+::\+Mat \&in, cv\+::\+Mat \&out, cv\+::\+Size size, std\+::vector$<$ cv\+::\+Point2f $>$ points)  throw (cv\+::\+Exception)
\item 
void \mbox{\hyperlink{classaruco_1_1MarkerDetector_af81636179989d4eb8489025edf8d6cee}{refine\+Candidate\+Lines}} (\mbox{\hyperlink{classaruco_1_1MarkerDetector_1_1MarkerCandidate}{Marker\+Candidate}} \&candidate)
\end{DoxyCompactItemize}
\doxysubsection*{Static Public Member Functions}
\begin{DoxyCompactItemize}
\item 
static void \mbox{\hyperlink{classaruco_1_1MarkerDetector_a3e0bfae23d10f3e9c3ea4c4de7bea90b}{gl\+Get\+Projection\+Matrix}} (\mbox{\hyperlink{classaruco_1_1CameraParameters}{Camera\+Parameters}} \&Cam\+Matrix, cv\+::\+Size org\+Img\+Size, cv\+::\+Size size, double proj\+\_\+matrix\mbox{[}16\mbox{]}, double gnear, double gfar, bool invert=false)  throw (cv\+::\+Exception)
\end{DoxyCompactItemize}
\doxysubsection*{Private Member Functions}
\begin{DoxyCompactItemize}
\item 
bool \mbox{\hyperlink{classaruco_1_1MarkerDetector_a2095fdc39ea281d13adcd1f919d24a2f}{warp\+\_\+cylinder}} (cv\+::\+Mat \&in, cv\+::\+Mat \&out, cv\+::\+Size size, \mbox{\hyperlink{classaruco_1_1MarkerDetector_1_1MarkerCandidate}{Marker\+Candidate}} \&mc)  throw ( cv\+::\+Exception )
\item 
void \mbox{\hyperlink{classaruco_1_1MarkerDetector_a177784637b4527e9981bbde5f5117507}{detect\+Rectangles}} (const cv\+::\+Mat \&thres\+Img, vector$<$ \mbox{\hyperlink{classaruco_1_1MarkerDetector_1_1MarkerCandidate}{Marker\+Candidate}} $>$ \&candidates)
\item 
bool \mbox{\hyperlink{classaruco_1_1MarkerDetector_a29b5f940d888f76b491dd2b5affac0a7}{is\+Into}} (cv\+::\+Mat \&contour, std\+::vector$<$ cv\+::\+Point2f $>$ \&b)
\item 
int \mbox{\hyperlink{classaruco_1_1MarkerDetector_a6a3008d48ede27c2a3f64123ef57b7c5}{perimeter}} (std\+::vector$<$ cv\+::\+Point2f $>$ \&a)
\item 
void \mbox{\hyperlink{classaruco_1_1MarkerDetector_a25bb4af8f8ea17ac41c14541c2387c12}{find\+Best\+Corner\+In\+Region\+\_\+harris}} (const cv\+::\+Mat \&\mbox{\hyperlink{classaruco_1_1MarkerDetector_a4d67711d5b81e75832dd837401886209}{grey}}, vector$<$ cv\+::\+Point2f $>$ \&Corners, int block\+Size)
\item 
void \mbox{\hyperlink{classaruco_1_1MarkerDetector_afff23657f5022efef54011546b8c60e0}{interpolate2\+Dline}} (const vector$<$ cv\+::\+Point $>$ \&in\+Points, cv\+::\+Point3f \&out\+Line)
\item 
cv\+::\+Point2f \mbox{\hyperlink{classaruco_1_1MarkerDetector_a4cfa657029c6398e6d2f6dacf37da354}{get\+Cross\+Point}} (const cv\+::\+Point3f \&line1, const cv\+::\+Point3f \&line2)
\item 
{\footnotesize template$<$typename T $>$ }\\void \mbox{\hyperlink{classaruco_1_1MarkerDetector_adfe27f2dc4d057ee803ef24b2671d77b}{remove\+Elements}} (vector$<$ T $>$ \&vinout, const vector$<$ bool $>$ \&to\+Remove)
\item 
void \mbox{\hyperlink{classaruco_1_1MarkerDetector_ac9146a2fa8d44211ad04945dbc097c09}{draw\+Approx\+Curve}} (cv\+::\+Mat \&in, std\+::vector$<$ cv\+::\+Point $>$ \&approx\+Curve, cv\+::\+Scalar color)
\item 
void \mbox{\hyperlink{classaruco_1_1MarkerDetector_a7bb7bf643750654e4f4435605e5d6c60}{draw\+Contour}} (cv\+::\+Mat \&in, std\+::vector$<$ cv\+::\+Point $>$ \&contour, cv\+::\+Scalar)
\item 
void \mbox{\hyperlink{classaruco_1_1MarkerDetector_a9d7a1bfe2daf7226fad2c8bec704e04d}{draw\+All\+Contours}} (cv\+::\+Mat input, std\+::vector$<$ std\+::vector$<$ cv\+::\+Point $>$ $>$ \&contours)
\item 
void \mbox{\hyperlink{classaruco_1_1MarkerDetector_a351b148668f21c4a6650396d64927eb0}{draw}} (cv\+::\+Mat out, const std\+::vector$<$ \mbox{\hyperlink{classaruco_1_1Marker}{Marker}} $>$ \&markers)
\end{DoxyCompactItemize}
\doxysubsection*{Private Attributes}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{classaruco_1_1MarkerDetector_a553912ba834b47dc2be5eb00db09a45f}\label{classaruco_1_1MarkerDetector_a553912ba834b47dc2be5eb00db09a45f}} 
bool {\bfseries \+\_\+enable\+Cylinder\+Warp}
\item 
\mbox{\Hypertarget{classaruco_1_1MarkerDetector_a4d9d5280ef63b2fa70afb8ce3f89e1c8}\label{classaruco_1_1MarkerDetector_a4d9d5280ef63b2fa70afb8ce3f89e1c8}} 
\mbox{\hyperlink{classaruco_1_1MarkerDetector_a1d6ee5812484ae973ea2638aa054b389}{Threshold\+Methods}} {\bfseries \+\_\+thres\+Method}
\item 
\mbox{\Hypertarget{classaruco_1_1MarkerDetector_acc8735a854af013a402ad796aeb42e4e}\label{classaruco_1_1MarkerDetector_acc8735a854af013a402ad796aeb42e4e}} 
double {\bfseries \+\_\+thres\+Param1}
\item 
\mbox{\Hypertarget{classaruco_1_1MarkerDetector_a805f25c325fa30cf42f6f1b6ee40f1a0}\label{classaruco_1_1MarkerDetector_a805f25c325fa30cf42f6f1b6ee40f1a0}} 
double {\bfseries \+\_\+thres\+Param2}
\item 
\mbox{\Hypertarget{classaruco_1_1MarkerDetector_a26dbffecbb478d5e2198da4494345066}\label{classaruco_1_1MarkerDetector_a26dbffecbb478d5e2198da4494345066}} 
\mbox{\hyperlink{classaruco_1_1MarkerDetector_ace0069f60aa5cef25a455be1e3d66dc1}{Corner\+Refinement\+Method}} {\bfseries \+\_\+corner\+Method}
\item 
\mbox{\Hypertarget{classaruco_1_1MarkerDetector_a483bf4b430ccd79d2841ed17540fa16f}\label{classaruco_1_1MarkerDetector_a483bf4b430ccd79d2841ed17540fa16f}} 
float {\bfseries \+\_\+min\+Size}
\item 
\mbox{\Hypertarget{classaruco_1_1MarkerDetector_a976cf5f634ddab80ba50c4616b35cd14}\label{classaruco_1_1MarkerDetector_a976cf5f634ddab80ba50c4616b35cd14}} 
float {\bfseries \+\_\+max\+Size}
\item 
\mbox{\Hypertarget{classaruco_1_1MarkerDetector_a65f05a8ebd1dbfb9b56fba32e2e4f796}\label{classaruco_1_1MarkerDetector_a65f05a8ebd1dbfb9b56fba32e2e4f796}} 
int {\bfseries \+\_\+speed}
\item 
\mbox{\Hypertarget{classaruco_1_1MarkerDetector_a1e5759f7f1cdfd30cb3f747fab669337}\label{classaruco_1_1MarkerDetector_a1e5759f7f1cdfd30cb3f747fab669337}} 
int {\bfseries \+\_\+marker\+Warp\+Size}
\item 
\mbox{\Hypertarget{classaruco_1_1MarkerDetector_a3534fbcee660e087bbbf972a6ca8cd89}\label{classaruco_1_1MarkerDetector_a3534fbcee660e087bbbf972a6ca8cd89}} 
bool {\bfseries \+\_\+do\+Erosion}
\item 
\mbox{\Hypertarget{classaruco_1_1MarkerDetector_a9fda59f95b8b009596027f49a502bbfc}\label{classaruco_1_1MarkerDetector_a9fda59f95b8b009596027f49a502bbfc}} 
vector$<$ std\+::vector$<$ cv\+::\+Point2f $>$ $>$ {\bfseries \+\_\+candidates}
\item 
\mbox{\Hypertarget{classaruco_1_1MarkerDetector_a922c5bba1739391191622de0b62b59c9}\label{classaruco_1_1MarkerDetector_a922c5bba1739391191622de0b62b59c9}} 
int {\bfseries pyrdown\+\_\+level}
\item 
\mbox{\Hypertarget{classaruco_1_1MarkerDetector_a4d67711d5b81e75832dd837401886209}\label{classaruco_1_1MarkerDetector_a4d67711d5b81e75832dd837401886209}} 
cv\+::\+Mat {\bfseries grey}
\item 
\mbox{\Hypertarget{classaruco_1_1MarkerDetector_a9b34f63ac4459452b50f7975efad045a}\label{classaruco_1_1MarkerDetector_a9b34f63ac4459452b50f7975efad045a}} 
cv\+::\+Mat {\bfseries thres}
\item 
\mbox{\Hypertarget{classaruco_1_1MarkerDetector_a501c65be2a65fea777d90851b8122643}\label{classaruco_1_1MarkerDetector_a501c65be2a65fea777d90851b8122643}} 
cv\+::\+Mat {\bfseries thres2}
\item 
\mbox{\Hypertarget{classaruco_1_1MarkerDetector_a48cd5deae0b8575030497e0b57b82e7e}\label{classaruco_1_1MarkerDetector_a48cd5deae0b8575030497e0b57b82e7e}} 
cv\+::\+Mat {\bfseries reduced}
\item 
\mbox{\Hypertarget{classaruco_1_1MarkerDetector_ac9dae9c42a0b3535fb5669bba684db5e}\label{classaruco_1_1MarkerDetector_ac9dae9c42a0b3535fb5669bba684db5e}} 
int($\ast$ {\bfseries marker\+Id\+Detector\+\_\+ptrfunc} )(const cv\+::\+Mat \&in, int \&n\+Rotations)
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Main class for marker detection. 

Definition at line 44 of file markerdetector.\+h.



\doxysubsection{Member Enumeration Documentation}
\mbox{\Hypertarget{classaruco_1_1MarkerDetector_ace0069f60aa5cef25a455be1e3d66dc1}\label{classaruco_1_1MarkerDetector_ace0069f60aa5cef25a455be1e3d66dc1}} 
\index{aruco::MarkerDetector@{aruco::MarkerDetector}!CornerRefinementMethod@{CornerRefinementMethod}}
\index{CornerRefinementMethod@{CornerRefinementMethod}!aruco::MarkerDetector@{aruco::MarkerDetector}}
\doxysubsubsection{\texorpdfstring{CornerRefinementMethod}{CornerRefinementMethod}}
{\footnotesize\ttfamily enum \mbox{\hyperlink{classaruco_1_1MarkerDetector_ace0069f60aa5cef25a455be1e3d66dc1}{aruco\+::\+Marker\+Detector\+::\+Corner\+Refinement\+Method}}}

Methods for corner refinement \begin{DoxyEnumFields}{Enumerator}
\raisebox{\heightof{T}}[0pt][0pt]{\index{NONE@{NONE}!aruco::MarkerDetector@{aruco::MarkerDetector}}\index{aruco::MarkerDetector@{aruco::MarkerDetector}!NONE@{NONE}}}\mbox{\Hypertarget{classaruco_1_1MarkerDetector_ace0069f60aa5cef25a455be1e3d66dc1a818e862759af62704385015cf0ca2239}\label{classaruco_1_1MarkerDetector_ace0069f60aa5cef25a455be1e3d66dc1a818e862759af62704385015cf0ca2239}} 
NONE&\\
\hline

\raisebox{\heightof{T}}[0pt][0pt]{\index{HARRIS@{HARRIS}!aruco::MarkerDetector@{aruco::MarkerDetector}}\index{aruco::MarkerDetector@{aruco::MarkerDetector}!HARRIS@{HARRIS}}}\mbox{\Hypertarget{classaruco_1_1MarkerDetector_ace0069f60aa5cef25a455be1e3d66dc1a96acc78a258cbd0ee75815a114c82367}\label{classaruco_1_1MarkerDetector_ace0069f60aa5cef25a455be1e3d66dc1a96acc78a258cbd0ee75815a114c82367}} 
HARRIS&\\
\hline

\raisebox{\heightof{T}}[0pt][0pt]{\index{SUBPIX@{SUBPIX}!aruco::MarkerDetector@{aruco::MarkerDetector}}\index{aruco::MarkerDetector@{aruco::MarkerDetector}!SUBPIX@{SUBPIX}}}\mbox{\Hypertarget{classaruco_1_1MarkerDetector_ace0069f60aa5cef25a455be1e3d66dc1a6a41c357297ab089899bad573f91cc58}\label{classaruco_1_1MarkerDetector_ace0069f60aa5cef25a455be1e3d66dc1a6a41c357297ab089899bad573f91cc58}} 
SUBPIX&\\
\hline

\raisebox{\heightof{T}}[0pt][0pt]{\index{LINES@{LINES}!aruco::MarkerDetector@{aruco::MarkerDetector}}\index{aruco::MarkerDetector@{aruco::MarkerDetector}!LINES@{LINES}}}\mbox{\Hypertarget{classaruco_1_1MarkerDetector_ace0069f60aa5cef25a455be1e3d66dc1a96976a499df924efb6218a01cd226e1f}\label{classaruco_1_1MarkerDetector_ace0069f60aa5cef25a455be1e3d66dc1a96976a499df924efb6218a01cd226e1f}} 
LINES&\\
\hline

\end{DoxyEnumFields}


Definition at line 144 of file markerdetector.\+h.


\begin{DoxyCode}{0}
\DoxyCodeLine{144 \{\mbox{\hyperlink{classaruco_1_1MarkerDetector_ace0069f60aa5cef25a455be1e3d66dc1a818e862759af62704385015cf0ca2239}{NONE}},\mbox{\hyperlink{classaruco_1_1MarkerDetector_ace0069f60aa5cef25a455be1e3d66dc1a96acc78a258cbd0ee75815a114c82367}{HARRIS}},\mbox{\hyperlink{classaruco_1_1MarkerDetector_ace0069f60aa5cef25a455be1e3d66dc1a6a41c357297ab089899bad573f91cc58}{SUBPIX}},\mbox{\hyperlink{classaruco_1_1MarkerDetector_ace0069f60aa5cef25a455be1e3d66dc1a96976a499df924efb6218a01cd226e1f}{LINES}}\};}

\end{DoxyCode}
\mbox{\Hypertarget{classaruco_1_1MarkerDetector_a1d6ee5812484ae973ea2638aa054b389}\label{classaruco_1_1MarkerDetector_a1d6ee5812484ae973ea2638aa054b389}} 
\index{aruco::MarkerDetector@{aruco::MarkerDetector}!ThresholdMethods@{ThresholdMethods}}
\index{ThresholdMethods@{ThresholdMethods}!aruco::MarkerDetector@{aruco::MarkerDetector}}
\doxysubsubsection{\texorpdfstring{ThresholdMethods}{ThresholdMethods}}
{\footnotesize\ttfamily enum \mbox{\hyperlink{classaruco_1_1MarkerDetector_a1d6ee5812484ae973ea2638aa054b389}{aruco\+::\+Marker\+Detector\+::\+Threshold\+Methods}}}

This set the type of thresholding methods available \begin{DoxyEnumFields}{Enumerator}
\raisebox{\heightof{T}}[0pt][0pt]{\index{FIXED\_THRES@{FIXED\_THRES}!aruco::MarkerDetector@{aruco::MarkerDetector}}\index{aruco::MarkerDetector@{aruco::MarkerDetector}!FIXED\_THRES@{FIXED\_THRES}}}\mbox{\Hypertarget{classaruco_1_1MarkerDetector_a1d6ee5812484ae973ea2638aa054b389abbc9aaab9cd6580cfc292b76bb287fe5}\label{classaruco_1_1MarkerDetector_a1d6ee5812484ae973ea2638aa054b389abbc9aaab9cd6580cfc292b76bb287fe5}} 
FIXED\+\_\+\+THRES&\\
\hline

\raisebox{\heightof{T}}[0pt][0pt]{\index{ADPT\_THRES@{ADPT\_THRES}!aruco::MarkerDetector@{aruco::MarkerDetector}}\index{aruco::MarkerDetector@{aruco::MarkerDetector}!ADPT\_THRES@{ADPT\_THRES}}}\mbox{\Hypertarget{classaruco_1_1MarkerDetector_a1d6ee5812484ae973ea2638aa054b389afdbf9cecf1d818516da5701666639c67}\label{classaruco_1_1MarkerDetector_a1d6ee5812484ae973ea2638aa054b389afdbf9cecf1d818516da5701666639c67}} 
ADPT\+\_\+\+THRES&\\
\hline

\raisebox{\heightof{T}}[0pt][0pt]{\index{CANNY@{CANNY}!aruco::MarkerDetector@{aruco::MarkerDetector}}\index{aruco::MarkerDetector@{aruco::MarkerDetector}!CANNY@{CANNY}}}\mbox{\Hypertarget{classaruco_1_1MarkerDetector_a1d6ee5812484ae973ea2638aa054b389a597d69a6a2c7166947ed5c885d63b65c}\label{classaruco_1_1MarkerDetector_a1d6ee5812484ae973ea2638aa054b389a597d69a6a2c7166947ed5c885d63b65c}} 
CANNY&\\
\hline

\end{DoxyEnumFields}


Definition at line 100 of file markerdetector.\+h.


\begin{DoxyCode}{0}
\DoxyCodeLine{100 \{\mbox{\hyperlink{classaruco_1_1MarkerDetector_a1d6ee5812484ae973ea2638aa054b389abbc9aaab9cd6580cfc292b76bb287fe5}{FIXED\_THRES}},\mbox{\hyperlink{classaruco_1_1MarkerDetector_a1d6ee5812484ae973ea2638aa054b389afdbf9cecf1d818516da5701666639c67}{ADPT\_THRES}},\mbox{\hyperlink{classaruco_1_1MarkerDetector_a1d6ee5812484ae973ea2638aa054b389a597d69a6a2c7166947ed5c885d63b65c}{CANNY}}\};}

\end{DoxyCode}


\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{classaruco_1_1MarkerDetector_aeb11e4c8d99e619338f9453b03252722}\label{classaruco_1_1MarkerDetector_aeb11e4c8d99e619338f9453b03252722}} 
\index{aruco::MarkerDetector@{aruco::MarkerDetector}!MarkerDetector@{MarkerDetector}}
\index{MarkerDetector@{MarkerDetector}!aruco::MarkerDetector@{aruco::MarkerDetector}}
\doxysubsubsection{\texorpdfstring{MarkerDetector()}{MarkerDetector()}}
{\footnotesize\ttfamily aruco\+::\+Marker\+Detector\+::\+Marker\+Detector (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

See 

Definition at line 46 of file markerdetector.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{47   \{}
\DoxyCodeLine{48     \mbox{\hyperlink{classaruco_1_1MarkerDetector_a3534fbcee660e087bbbf972a6ca8cd89}{\_doErosion}}=\textcolor{keyword}{false};}
\DoxyCodeLine{49     \mbox{\hyperlink{classaruco_1_1MarkerDetector_a553912ba834b47dc2be5eb00db09a45f}{\_enableCylinderWarp}}=\textcolor{keyword}{false};}
\DoxyCodeLine{50     \mbox{\hyperlink{classaruco_1_1MarkerDetector_a4d9d5280ef63b2fa70afb8ce3f89e1c8}{\_thresMethod}}=\mbox{\hyperlink{classaruco_1_1MarkerDetector_a1d6ee5812484ae973ea2638aa054b389afdbf9cecf1d818516da5701666639c67}{ADPT\_THRES}};}
\DoxyCodeLine{51     \mbox{\hyperlink{classaruco_1_1MarkerDetector_acc8735a854af013a402ad796aeb42e4e}{\_thresParam1}}=\mbox{\hyperlink{classaruco_1_1MarkerDetector_a805f25c325fa30cf42f6f1b6ee40f1a0}{\_thresParam2}}=7;}
\DoxyCodeLine{52     \mbox{\hyperlink{classaruco_1_1MarkerDetector_a26dbffecbb478d5e2198da4494345066}{\_cornerMethod}}=\mbox{\hyperlink{classaruco_1_1MarkerDetector_ace0069f60aa5cef25a455be1e3d66dc1a96976a499df924efb6218a01cd226e1f}{LINES}};}
\DoxyCodeLine{53     \mbox{\hyperlink{classaruco_1_1MarkerDetector_a1e5759f7f1cdfd30cb3f747fab669337}{\_markerWarpSize}}=56;}
\DoxyCodeLine{54     \mbox{\hyperlink{classaruco_1_1MarkerDetector_a65f05a8ebd1dbfb9b56fba32e2e4f796}{\_speed}}=0;}
\DoxyCodeLine{55     \mbox{\hyperlink{classaruco_1_1MarkerDetector_ac9dae9c42a0b3535fb5669bba684db5e}{markerIdDetector\_ptrfunc}}=\mbox{\hyperlink{classaruco_1_1FiducidalMarkers_add9709849669088020ca67b9417e5496}{aruco::FiducidalMarkers::detect}};}
\DoxyCodeLine{56     \mbox{\hyperlink{classaruco_1_1MarkerDetector_a922c5bba1739391191622de0b62b59c9}{pyrdown\_level}}=0; \textcolor{comment}{// no image reduction}}
\DoxyCodeLine{57     \mbox{\hyperlink{classaruco_1_1MarkerDetector_a483bf4b430ccd79d2841ed17540fa16f}{\_minSize}}=0.04;}
\DoxyCodeLine{58     \mbox{\hyperlink{classaruco_1_1MarkerDetector_a976cf5f634ddab80ba50c4616b35cd14}{\_maxSize}}=0.5;}
\DoxyCodeLine{59   \}}

\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classaruco_1_1MarkerDetector_aeb11e4c8d99e619338f9453b03252722_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classaruco_1_1MarkerDetector_aafadf4a0b81a7f03e443f0ad79fdf8a9}\label{classaruco_1_1MarkerDetector_aafadf4a0b81a7f03e443f0ad79fdf8a9}} 
\index{aruco::MarkerDetector@{aruco::MarkerDetector}!````~MarkerDetector@{$\sim$MarkerDetector}}
\index{````~MarkerDetector@{$\sim$MarkerDetector}!aruco::MarkerDetector@{aruco::MarkerDetector}}
\doxysubsubsection{\texorpdfstring{$\sim$MarkerDetector()}{~MarkerDetector()}}
{\footnotesize\ttfamily aruco\+::\+Marker\+Detector\+::$\sim$\+Marker\+Detector (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Definition at line 67 of file markerdetector.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{68   \{}
\DoxyCodeLine{69 }
\DoxyCodeLine{70   \}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{classaruco_1_1MarkerDetector_a48c485fdfe357d5283f87628829a65c7}\label{classaruco_1_1MarkerDetector_a48c485fdfe357d5283f87628829a65c7}} 
\index{aruco::MarkerDetector@{aruco::MarkerDetector}!detect@{detect}}
\index{detect@{detect}!aruco::MarkerDetector@{aruco::MarkerDetector}}
\doxysubsubsection{\texorpdfstring{detect()}{detect()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily void aruco\+::\+Marker\+Detector\+::detect (\begin{DoxyParamCaption}\item[{const cv\+::\+Mat \&}]{input,  }\item[{std\+::vector$<$ \mbox{\hyperlink{classaruco_1_1Marker}{Marker}} $>$ \&}]{detected\+Markers,  }\item[{\mbox{\hyperlink{classaruco_1_1CameraParameters}{Camera\+Parameters}}}]{cam\+Params,  }\item[{float}]{marker\+Size\+Meters = {\ttfamily -\/1},  }\item[{bool}]{set\+YPerpendicular = {\ttfamily true} }\end{DoxyParamCaption}) throw ( cv\+::\+Exception) }

Detects the markers in the image passed

If you provide information about the camera parameters and the size of the marker, then, the extrinsics of the markers are detected


\begin{DoxyParams}{Parameters}
{\em input} & input color image \\
\hline
{\em detected\+Markers} & output vector with the markers detected \\
\hline
{\em cam\+Params} & Camera parameters \\
\hline
{\em marker\+Size\+Meters} & size of the marker sides expressed in meters \\
\hline
{\em set\+YPerpendicular} & If set the Y axis will be perpendicular to the surface. Otherwise, it will be the Z axis \\
\hline
\end{DoxyParams}


Definition at line 107 of file markerdetector.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{108   \{}
\DoxyCodeLine{109     \mbox{\hyperlink{classaruco_1_1MarkerDetector_ac6da81367de2a8468925e1ac1b45760c}{detect}} ( input, detectedMarkers,camParams.CameraMatrix ,camParams.Distorsion,  markerSizeMeters ,setYPerpendicular);}
\DoxyCodeLine{110   \}}

\end{DoxyCode}
\mbox{\Hypertarget{classaruco_1_1MarkerDetector_ac6da81367de2a8468925e1ac1b45760c}\label{classaruco_1_1MarkerDetector_ac6da81367de2a8468925e1ac1b45760c}} 
\index{aruco::MarkerDetector@{aruco::MarkerDetector}!detect@{detect}}
\index{detect@{detect}!aruco::MarkerDetector@{aruco::MarkerDetector}}
\doxysubsubsection{\texorpdfstring{detect()}{detect()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily void aruco\+::\+Marker\+Detector\+::detect (\begin{DoxyParamCaption}\item[{const cv\+::\+Mat \&}]{input,  }\item[{std\+::vector$<$ \mbox{\hyperlink{classaruco_1_1Marker}{Marker}} $>$ \&}]{detected\+Markers,  }\item[{cv\+::\+Mat}]{cam\+Matrix = {\ttfamily cv\+:\+:Mat()},  }\item[{cv\+::\+Mat}]{dist\+Coeff = {\ttfamily cv\+:\+:Mat()},  }\item[{float}]{marker\+Size\+Meters = {\ttfamily -\/1},  }\item[{bool}]{set\+YPerpendicular = {\ttfamily true} }\end{DoxyParamCaption}) throw ( cv\+::\+Exception) }

Detects the markers in the image passed

If you provide information about the camera parameters and the size of the marker, then, the extrinsics of the markers are detected


\begin{DoxyParams}{Parameters}
{\em input} & input color image \\
\hline
{\em detected\+Markers} & output vector with the markers detected \\
\hline
{\em cam\+Matrix} & intrinsic camera information. \\
\hline
{\em dist\+Coeff} & camera distorsion coefficient. If set Mat() if is assumed no camera distorion \\
\hline
{\em marker\+Size\+Meters} & size of the marker sides expressed in meters \\
\hline
{\em set\+YPerpendicular} & If set the Y axis will be perpendicular to the surface. Otherwise, it will be the Z axis \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{classaruco_1_1MarkerDetector_a177784637b4527e9981bbde5f5117507}\label{classaruco_1_1MarkerDetector_a177784637b4527e9981bbde5f5117507}} 
\index{aruco::MarkerDetector@{aruco::MarkerDetector}!detectRectangles@{detectRectangles}}
\index{detectRectangles@{detectRectangles}!aruco::MarkerDetector@{aruco::MarkerDetector}}
\doxysubsubsection{\texorpdfstring{detectRectangles()}{detectRectangles()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily void aruco\+::\+Marker\+Detector\+::detect\+Rectangles (\begin{DoxyParamCaption}\item[{const cv\+::\+Mat \&}]{thres\+Img,  }\item[{vector$<$ \mbox{\hyperlink{classaruco_1_1MarkerDetector_1_1MarkerCandidate}{Marker\+Candidate}} $>$ \&}]{candidates }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}

Detection of candidates to be markers, i.\+e., rectangles. This function returns in candidates all the rectangles found in a thresolded image for each contour, analyze if it is a paralelepiped likely to be the marker

sort the points in anti-\/clockwise order

remove these elements whise corners are too close to each other

Definition at line 271 of file markerdetector.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{272   \{}
\DoxyCodeLine{273     vector<MarkerCandidate>  MarkerCanditates;}
\DoxyCodeLine{274     \textcolor{comment}{//calcualte the min\_max contour sizes}}
\DoxyCodeLine{275     \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} minSize=\mbox{\hyperlink{classaruco_1_1MarkerDetector_a483bf4b430ccd79d2841ed17540fa16f}{\_minSize}}*std::max(thresImg.cols,thresImg.rows)*4;}
\DoxyCodeLine{276     \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} maxSize=\mbox{\hyperlink{classaruco_1_1MarkerDetector_a976cf5f634ddab80ba50c4616b35cd14}{\_maxSize}}*std::max(thresImg.cols,thresImg.rows)*4;}
\DoxyCodeLine{277     std::vector<std::vector<cv::Point> > contours2;}
\DoxyCodeLine{278     std::vector<cv::Vec4i> hierarchy2;}
\DoxyCodeLine{279 }
\DoxyCodeLine{280     thresImg.copyTo ( \mbox{\hyperlink{classaruco_1_1MarkerDetector_a501c65be2a65fea777d90851b8122643}{thres2}} );}
\DoxyCodeLine{281     cv::findContours ( \mbox{\hyperlink{classaruco_1_1MarkerDetector_a501c65be2a65fea777d90851b8122643}{thres2}} , contours2, hierarchy2,CV\_RETR\_TREE, CV\_CHAIN\_APPROX\_NONE );}
\DoxyCodeLine{282     vector<Point>  approxCurve;}
\DoxyCodeLine{284 }
\DoxyCodeLine{285     \textcolor{keywordflow}{for} ( \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} i=0;i<contours2.size();i++ )}
\DoxyCodeLine{286     \{}
\DoxyCodeLine{287 }
\DoxyCodeLine{288 }
\DoxyCodeLine{289       \textcolor{comment}{//check it is a possible element by first checking is has enough points}}
\DoxyCodeLine{290       \textcolor{keywordflow}{if} ( minSize< contours2[i].size() \&\&contours2[i].size()<maxSize  )}
\DoxyCodeLine{291       \{}
\DoxyCodeLine{292         \textcolor{comment}{//approximate to a poligon}}
\DoxyCodeLine{293         approxPolyDP (  contours2[i]  ,approxCurve , \textcolor{keywordtype}{double} ( contours2[i].size() ) *0.05 , \textcolor{keyword}{true} );}
\DoxyCodeLine{294         \textcolor{comment}{//              drawApproxCurve(copy,approxCurve,Scalar(0,0,255));}}
\DoxyCodeLine{295         \textcolor{comment}{//check that the poligon has 4 points}}
\DoxyCodeLine{296         \textcolor{keywordflow}{if} ( approxCurve.size() ==4 )}
\DoxyCodeLine{297         \{}
\DoxyCodeLine{298 }
\DoxyCodeLine{299           \textcolor{comment}{//       drawContour(input,contours2[i],Scalar(255,0,225));}}
\DoxyCodeLine{300           \textcolor{comment}{//          namedWindow("{}input"{});}}
\DoxyCodeLine{301           \textcolor{comment}{//        imshow("{}input"{},input);}}
\DoxyCodeLine{302           \textcolor{comment}{//        waitKey(0);}}
\DoxyCodeLine{303           \textcolor{comment}{//and is convex}}
\DoxyCodeLine{304           \textcolor{keywordflow}{if} ( isContourConvex ( Mat ( approxCurve ) ) )}
\DoxyCodeLine{305           \{}
\DoxyCodeLine{306             \textcolor{comment}{//                        drawApproxCurve(input,approxCurve,Scalar(255,0,255));}}
\DoxyCodeLine{307             \textcolor{comment}{//                      //ensure that the   distace between consecutive points is large enough}}
\DoxyCodeLine{308             \textcolor{keywordtype}{float} minDist=1e10;}
\DoxyCodeLine{309             \textcolor{keywordflow}{for} ( \textcolor{keywordtype}{int} j=0;j<4;j++ )}
\DoxyCodeLine{310             \{}
\DoxyCodeLine{311               \textcolor{keywordtype}{float} d= std::sqrt ( ( \textcolor{keywordtype}{float} ) ( approxCurve[j].x-\/approxCurve[ ( j+1 ) \%4].x ) * ( approxCurve[j].x-\/approxCurve[ ( j+1 ) \%4].x ) +}
\DoxyCodeLine{312                                    ( approxCurve[j].y-\/approxCurve[ ( j+1 ) \%4].y ) * ( approxCurve[j].y-\/approxCurve[ ( j+1 ) \%4].y ) );}
\DoxyCodeLine{313               \textcolor{comment}{//        norm(Mat(approxCurve[i]),Mat(approxCurve[(i+1)\%4]));}}
\DoxyCodeLine{314               \textcolor{keywordflow}{if} ( d<minDist ) minDist=d;}
\DoxyCodeLine{315             \}}
\DoxyCodeLine{316             \textcolor{comment}{//check that distance is not very small}}
\DoxyCodeLine{317             \textcolor{keywordflow}{if} ( minDist>10 )}
\DoxyCodeLine{318             \{}
\DoxyCodeLine{319               \textcolor{comment}{//add the points}}
\DoxyCodeLine{320               \textcolor{comment}{//          cout<<"{}ADDED"{}<<endl;}}
\DoxyCodeLine{321               MarkerCanditates.push\_back ( MarkerCandidate() );}
\DoxyCodeLine{322               MarkerCanditates.back().idx=i;}
\DoxyCodeLine{323               \textcolor{keywordflow}{for} ( \textcolor{keywordtype}{int} j=0;j<4;j++ )}
\DoxyCodeLine{324               \{}
\DoxyCodeLine{325                 MarkerCanditates.back().push\_back ( Point2f ( approxCurve[j].x,approxCurve[j].y ) );}
\DoxyCodeLine{326               \}}
\DoxyCodeLine{327             \}}
\DoxyCodeLine{328           \}}
\DoxyCodeLine{329         \}}
\DoxyCodeLine{330       \}}
\DoxyCodeLine{331     \}}
\DoxyCodeLine{332 }
\DoxyCodeLine{333     \textcolor{comment}{//                namedWindow("{}input"{});}}
\DoxyCodeLine{334     \textcolor{comment}{//          imshow("{}input"{},input);}}
\DoxyCodeLine{335     \textcolor{comment}{//                          waitKey(0);}}
\DoxyCodeLine{337 \textcolor{comment}{}    valarray<bool> swapped(\textcolor{keyword}{false},MarkerCanditates.size());\textcolor{comment}{//used later}}
\DoxyCodeLine{338     \textcolor{keywordflow}{for} ( \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} i=0;i<MarkerCanditates.size();i++ )}
\DoxyCodeLine{339     \{}
\DoxyCodeLine{340 }
\DoxyCodeLine{341       \textcolor{comment}{//trace a line between the first and second point.}}
\DoxyCodeLine{342       \textcolor{comment}{//if the thrid point is at the right side, then the points are anti-\/clockwise}}
\DoxyCodeLine{343       \textcolor{keywordtype}{double} dx1 = MarkerCanditates[i][1].x -\/ MarkerCanditates[i][0].x;}
\DoxyCodeLine{344       \textcolor{keywordtype}{double} dy1 =  MarkerCanditates[i][1].y -\/ MarkerCanditates[i][0].y;}
\DoxyCodeLine{345       \textcolor{keywordtype}{double} dx2 = MarkerCanditates[i][2].x -\/ MarkerCanditates[i][0].x;}
\DoxyCodeLine{346       \textcolor{keywordtype}{double} dy2 = MarkerCanditates[i][2].y -\/ MarkerCanditates[i][0].y;}
\DoxyCodeLine{347       \textcolor{keywordtype}{double} o = ( dx1*dy2 )-\/ ( dy1*dx2 );}
\DoxyCodeLine{348 }
\DoxyCodeLine{349       \textcolor{keywordflow}{if} ( o  < 0.0 )        \textcolor{comment}{//if the third point is in the left side, then sort in anti-\/clockwise order}}
\DoxyCodeLine{350       \{}
\DoxyCodeLine{351         swap ( MarkerCanditates[i][1],MarkerCanditates[i][3] );}
\DoxyCodeLine{352         swapped[i]=\textcolor{keyword}{true};}
\DoxyCodeLine{353         \textcolor{comment}{//sort the contour points}}
\DoxyCodeLine{354         \textcolor{comment}{//          reverse(MarkerCanditates[i].contour.begin(),MarkerCanditates[i].contour.end());//????}}
\DoxyCodeLine{355 }
\DoxyCodeLine{356       \}}
\DoxyCodeLine{357     \}}
\DoxyCodeLine{358 }
\DoxyCodeLine{360     \textcolor{comment}{//first detect candidates}}
\DoxyCodeLine{361 }
\DoxyCodeLine{362     vector<pair<int,int>  > TooNearCandidates;}
\DoxyCodeLine{363     \textcolor{keywordflow}{for} ( \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} i=0;i<MarkerCanditates.size();i++ )}
\DoxyCodeLine{364     \{}
\DoxyCodeLine{365       \textcolor{comment}{//    cout<<"{}Marker i="{}<<i<<MarkerCanditates[i]<<endl;}}
\DoxyCodeLine{366       \textcolor{comment}{//calculate the average distance of each corner to the nearest corner of the other marker candidate}}
\DoxyCodeLine{367       \textcolor{keywordflow}{for} ( \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} j=i+1;j<MarkerCanditates.size();j++ )}
\DoxyCodeLine{368       \{}
\DoxyCodeLine{369         \textcolor{keywordtype}{float} dist=0;}
\DoxyCodeLine{370         \textcolor{keywordflow}{for} ( \textcolor{keywordtype}{int} c=0;c<4;c++ )}
\DoxyCodeLine{371           dist+= sqrt ( ( MarkerCanditates[i][c].x-\/MarkerCanditates[j][c].x ) * ( MarkerCanditates[i][c].x-\/MarkerCanditates[j][c].x ) + ( MarkerCanditates[i][c].y-\/MarkerCanditates[j][c].y ) * ( MarkerCanditates[i][c].y-\/MarkerCanditates[j][c].y ) );}
\DoxyCodeLine{372         dist/=4;}
\DoxyCodeLine{373         \textcolor{comment}{//if distance is too small}}
\DoxyCodeLine{374         \textcolor{keywordflow}{if} ( dist< 10 )}
\DoxyCodeLine{375         \{}
\DoxyCodeLine{376           TooNearCandidates.push\_back ( pair<int,int> ( i,j ) );}
\DoxyCodeLine{377         \}}
\DoxyCodeLine{378       \}}
\DoxyCodeLine{379     \}}
\DoxyCodeLine{380 }
\DoxyCodeLine{381     \textcolor{comment}{//mark for removal the element of  the pair with smaller perimeter}}
\DoxyCodeLine{382     valarray<bool> toRemove ( \textcolor{keyword}{false},MarkerCanditates.size() );}
\DoxyCodeLine{383     \textcolor{keywordflow}{for} ( \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} i=0;i<TooNearCandidates.size();i++ )}
\DoxyCodeLine{384     \{}
\DoxyCodeLine{385       \textcolor{keywordflow}{if} ( \mbox{\hyperlink{classaruco_1_1MarkerDetector_a6a3008d48ede27c2a3f64123ef57b7c5}{perimeter}} ( MarkerCanditates[TooNearCandidates[i].first ] ) >\mbox{\hyperlink{classaruco_1_1MarkerDetector_a6a3008d48ede27c2a3f64123ef57b7c5}{perimeter}} ( MarkerCanditates[ TooNearCandidates[i].second] ) )}
\DoxyCodeLine{386         toRemove[TooNearCandidates[i].second]=\textcolor{keyword}{true};}
\DoxyCodeLine{387       \textcolor{keywordflow}{else} toRemove[TooNearCandidates[i].first]=\textcolor{keyword}{true};}
\DoxyCodeLine{388     \}}
\DoxyCodeLine{389 }
\DoxyCodeLine{390     \textcolor{comment}{//remove the invalid ones}}
\DoxyCodeLine{391     \textcolor{comment}{//     removeElements ( MarkerCanditates,toRemove );}}
\DoxyCodeLine{392     \textcolor{comment}{//finally, assign to the remaining candidates the contour}}
\DoxyCodeLine{393     OutMarkerCanditates.reserve(MarkerCanditates.size());}
\DoxyCodeLine{394     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{size\_t} i=0;i<MarkerCanditates.size();i++) \{}
\DoxyCodeLine{395       \textcolor{keywordflow}{if} (!toRemove[i]) \{}
\DoxyCodeLine{396         OutMarkerCanditates.push\_back(MarkerCanditates[i]);}
\DoxyCodeLine{397         OutMarkerCanditates.back().contour=contours2[ MarkerCanditates[i].idx];}
\DoxyCodeLine{398         \textcolor{keywordflow}{if} (swapped[i] \&\& \mbox{\hyperlink{classaruco_1_1MarkerDetector_a553912ba834b47dc2be5eb00db09a45f}{\_enableCylinderWarp}} )\textcolor{comment}{//if the corners where swapped, it is required to reverse here the points so that they are in the same order}}
\DoxyCodeLine{399           reverse(OutMarkerCanditates.back().contour.begin(),OutMarkerCanditates.back().contour.end());\textcolor{comment}{//????}}
\DoxyCodeLine{400       \}}
\DoxyCodeLine{401     \}}
\DoxyCodeLine{402 }
\DoxyCodeLine{403   \}}

\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=344pt]{classaruco_1_1MarkerDetector_a177784637b4527e9981bbde5f5117507_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classaruco_1_1MarkerDetector_a37be5db247987122dbc3e616da47e3e3}\label{classaruco_1_1MarkerDetector_a37be5db247987122dbc3e616da47e3e3}} 
\index{aruco::MarkerDetector@{aruco::MarkerDetector}!detectRectangles@{detectRectangles}}
\index{detectRectangles@{detectRectangles}!aruco::MarkerDetector@{aruco::MarkerDetector}}
\doxysubsubsection{\texorpdfstring{detectRectangles()}{detectRectangles()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily void aruco\+::\+Marker\+Detector\+::detect\+Rectangles (\begin{DoxyParamCaption}\item[{const cv\+::\+Mat \&}]{thres\+Img,  }\item[{vector$<$ std\+::vector$<$ cv\+::\+Point2f $>$ $>$ \&}]{candidates }\end{DoxyParamCaption})}

Detection of candidates to be markers, i.\+e., rectangles. This function returns in candidates all the rectangles found in a thresolded image 

Definition at line 261 of file markerdetector.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{262   \{}
\DoxyCodeLine{263     vector<MarkerCandidate>  candidates;}
\DoxyCodeLine{264     \mbox{\hyperlink{classaruco_1_1MarkerDetector_a37be5db247987122dbc3e616da47e3e3}{detectRectangles}}(thresold,candidates);}
\DoxyCodeLine{265     \textcolor{comment}{//create the output}}
\DoxyCodeLine{266     MarkerCanditates.resize(candidates.size());}
\DoxyCodeLine{267     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{size\_t} i=0;i<MarkerCanditates.size();i++)}
\DoxyCodeLine{268       MarkerCanditates[i]=candidates[i];}
\DoxyCodeLine{269   \}}

\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=194pt]{classaruco_1_1MarkerDetector_a37be5db247987122dbc3e616da47e3e3_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classaruco_1_1MarkerDetector_a351b148668f21c4a6650396d64927eb0}\label{classaruco_1_1MarkerDetector_a351b148668f21c4a6650396d64927eb0}} 
\index{aruco::MarkerDetector@{aruco::MarkerDetector}!draw@{draw}}
\index{draw@{draw}!aruco::MarkerDetector@{aruco::MarkerDetector}}
\doxysubsubsection{\texorpdfstring{draw()}{draw()}}
{\footnotesize\ttfamily void aruco\+::\+Marker\+Detector\+::draw (\begin{DoxyParamCaption}\item[{cv\+::\+Mat}]{out,  }\item[{const std\+::vector$<$ \mbox{\hyperlink{classaruco_1_1Marker}{Marker}} $>$ \&}]{markers }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 947 of file markerdetector.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{948   \{}
\DoxyCodeLine{949     \textcolor{keywordflow}{for} ( \textcolor{keywordtype}{size\_t} i=0;i<markers.size();++i )}
\DoxyCodeLine{950     \{}
\DoxyCodeLine{951       cv::line ( out,markers[i][0],markers[i][1],cvScalar ( 255,0,0 ),2,CV\_AA );}
\DoxyCodeLine{952       cv::line ( out,markers[i][1],markers[i][2],cvScalar ( 255,0,0 ),2,CV\_AA );}
\DoxyCodeLine{953       cv::line ( out,markers[i][2],markers[i][3],cvScalar ( 255,0,0 ),2,CV\_AA );}
\DoxyCodeLine{954       cv::line ( out,markers[i][3],markers[i][0],cvScalar ( 255,0,0 ),2,CV\_AA );}
\DoxyCodeLine{955     \}}
\DoxyCodeLine{956   \}}

\end{DoxyCode}
\mbox{\Hypertarget{classaruco_1_1MarkerDetector_a9d7a1bfe2daf7226fad2c8bec704e04d}\label{classaruco_1_1MarkerDetector_a9d7a1bfe2daf7226fad2c8bec704e04d}} 
\index{aruco::MarkerDetector@{aruco::MarkerDetector}!drawAllContours@{drawAllContours}}
\index{drawAllContours@{drawAllContours}!aruco::MarkerDetector@{aruco::MarkerDetector}}
\doxysubsubsection{\texorpdfstring{drawAllContours()}{drawAllContours()}}
{\footnotesize\ttfamily void aruco\+::\+Marker\+Detector\+::draw\+All\+Contours (\begin{DoxyParamCaption}\item[{cv\+::\+Mat}]{input,  }\item[{std\+::vector$<$ std\+::vector$<$ cv\+::\+Point $>$ $>$ \&}]{contours }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 914 of file markerdetector.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{915   \{}
\DoxyCodeLine{916     drawContours ( input,  contours, -\/1,Scalar ( 255,0,255 ) );}
\DoxyCodeLine{917   \}}

\end{DoxyCode}
\mbox{\Hypertarget{classaruco_1_1MarkerDetector_ac9146a2fa8d44211ad04945dbc097c09}\label{classaruco_1_1MarkerDetector_ac9146a2fa8d44211ad04945dbc097c09}} 
\index{aruco::MarkerDetector@{aruco::MarkerDetector}!drawApproxCurve@{drawApproxCurve}}
\index{drawApproxCurve@{drawApproxCurve}!aruco::MarkerDetector@{aruco::MarkerDetector}}
\doxysubsubsection{\texorpdfstring{drawApproxCurve()}{drawApproxCurve()}}
{\footnotesize\ttfamily void aruco\+::\+Marker\+Detector\+::draw\+Approx\+Curve (\begin{DoxyParamCaption}\item[{cv\+::\+Mat \&}]{in,  }\item[{std\+::vector$<$ cv\+::\+Point $>$ \&}]{approx\+Curve,  }\item[{cv\+::\+Scalar}]{color }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 933 of file markerdetector.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{934   \{}
\DoxyCodeLine{935     \textcolor{keywordflow}{for} ( \textcolor{keywordtype}{size\_t} i=0;i<contour.size();++i )}
\DoxyCodeLine{936     \{}
\DoxyCodeLine{937       cv::line ( in,contour[i],contour[ ( i+1 ) \%contour.size() ],color );}
\DoxyCodeLine{938     \}}
\DoxyCodeLine{939   \}}

\end{DoxyCode}
\mbox{\Hypertarget{classaruco_1_1MarkerDetector_a7bb7bf643750654e4f4435605e5d6c60}\label{classaruco_1_1MarkerDetector_a7bb7bf643750654e4f4435605e5d6c60}} 
\index{aruco::MarkerDetector@{aruco::MarkerDetector}!drawContour@{drawContour}}
\index{drawContour@{drawContour}!aruco::MarkerDetector@{aruco::MarkerDetector}}
\doxysubsubsection{\texorpdfstring{drawContour()}{drawContour()}}
{\footnotesize\ttfamily void aruco\+::\+Marker\+Detector\+::draw\+Contour (\begin{DoxyParamCaption}\item[{cv\+::\+Mat \&}]{in,  }\item[{std\+::vector$<$ cv\+::\+Point $>$ \&}]{contour,  }\item[{cv\+::\+Scalar}]{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 925 of file markerdetector.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{926   \{}
\DoxyCodeLine{927     \textcolor{keywordflow}{for} ( \textcolor{keywordtype}{size\_t} i=0;i<contour.size();++i )}
\DoxyCodeLine{928     \{}
\DoxyCodeLine{929       cv::rectangle ( in,contour[i],contour[i],color );}
\DoxyCodeLine{930     \}}
\DoxyCodeLine{931   \}}

\end{DoxyCode}
\mbox{\Hypertarget{classaruco_1_1MarkerDetector_a85d4908f578ea80f0815b11c912c31e0}\label{classaruco_1_1MarkerDetector_a85d4908f578ea80f0815b11c912c31e0}} 
\index{aruco::MarkerDetector@{aruco::MarkerDetector}!enableErosion@{enableErosion}}
\index{enableErosion@{enableErosion}!aruco::MarkerDetector@{aruco::MarkerDetector}}
\doxysubsubsection{\texorpdfstring{enableErosion()}{enableErosion()}}
{\footnotesize\ttfamily void aruco\+::\+Marker\+Detector\+::enable\+Erosion (\begin{DoxyParamCaption}\item[{bool}]{enable }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}

Enables/\+Disables erosion process that is REQUIRED for chessboard like boards. By default, this property is enabled 

Definition at line 173 of file markerdetector.\+h.


\begin{DoxyCode}{0}
\DoxyCodeLine{173 \{\mbox{\hyperlink{classaruco_1_1MarkerDetector_a3534fbcee660e087bbbf972a6ca8cd89}{\_doErosion}}=enable;\}}

\end{DoxyCode}
\mbox{\Hypertarget{classaruco_1_1MarkerDetector_a25bb4af8f8ea17ac41c14541c2387c12}\label{classaruco_1_1MarkerDetector_a25bb4af8f8ea17ac41c14541c2387c12}} 
\index{aruco::MarkerDetector@{aruco::MarkerDetector}!findBestCornerInRegion\_harris@{findBestCornerInRegion\_harris}}
\index{findBestCornerInRegion\_harris@{findBestCornerInRegion\_harris}!aruco::MarkerDetector@{aruco::MarkerDetector}}
\doxysubsubsection{\texorpdfstring{findBestCornerInRegion\_harris()}{findBestCornerInRegion\_harris()}}
{\footnotesize\ttfamily void aruco\+::\+Marker\+Detector\+::find\+Best\+Corner\+In\+Region\+\_\+harris (\begin{DoxyParamCaption}\item[{const cv\+::\+Mat \&}]{grey,  }\item[{vector$<$ cv\+::\+Point2f $>$ \&}]{Corners,  }\item[{int}]{block\+Size }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 727 of file markerdetector.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{728   \{}
\DoxyCodeLine{729     \textcolor{keywordtype}{int} halfSize=blockSize/2;}
\DoxyCodeLine{730     \textcolor{keywordflow}{for} ( \textcolor{keywordtype}{size\_t} i=0;i<Corners.size();i++ )}
\DoxyCodeLine{731     \{}
\DoxyCodeLine{732       \textcolor{comment}{//check that the region is into the image limits}}
\DoxyCodeLine{733       cv::Point2f min ( Corners[i].x-\/halfSize,Corners[i].y-\/halfSize );}
\DoxyCodeLine{734       cv::Point2f max ( Corners[i].x+halfSize,Corners[i].y+halfSize );}
\DoxyCodeLine{735       \textcolor{keywordflow}{if} ( min.x>=0  \&\&  min.y>=0 \&\& max.x<grey\_m.cols \&\& max.y<grey\_m.rows )}
\DoxyCodeLine{736       \{}
\DoxyCodeLine{737         cv::Mat response;}
\DoxyCodeLine{738         cv::Mat subImage ( grey\_m,cv::Rect ( Corners[i].x-\/halfSize,Corners[i].y-\/halfSize,blockSize ,blockSize ) );}
\DoxyCodeLine{739         vector<Point2f> corners2;}
\DoxyCodeLine{740         goodFeaturesToTrack ( subImage, corners2, 10, 0.001, halfSize );}
\DoxyCodeLine{741         \textcolor{keywordtype}{float} minD=9999;}
\DoxyCodeLine{742         \textcolor{keywordtype}{int} bIdx=-\/1;}
\DoxyCodeLine{743         cv::Point2f Center ( halfSize,halfSize );}
\DoxyCodeLine{744         \textcolor{keywordflow}{for} ( \textcolor{keywordtype}{size\_t} j=0;j<corners2.size();j++ )}
\DoxyCodeLine{745         \{}
\DoxyCodeLine{746           \textcolor{keywordtype}{float} dist=cv::norm ( corners2[j]-\/Center );}
\DoxyCodeLine{747           \textcolor{keywordflow}{if} ( dist<minD )}
\DoxyCodeLine{748           \{}
\DoxyCodeLine{749             minD=dist;}
\DoxyCodeLine{750             bIdx=j;}
\DoxyCodeLine{751           \}}
\DoxyCodeLine{752           \textcolor{keywordflow}{if} ( minD<halfSize ) Corners[i]+= ( corners2[bIdx]-\/Center );}
\DoxyCodeLine{753         \}}
\DoxyCodeLine{754       \}}
\DoxyCodeLine{755     \}}
\DoxyCodeLine{756   \}}

\end{DoxyCode}
\mbox{\Hypertarget{classaruco_1_1MarkerDetector_a6d42fe278bfc251659d4e28796601c2f}\label{classaruco_1_1MarkerDetector_a6d42fe278bfc251659d4e28796601c2f}} 
\index{aruco::MarkerDetector@{aruco::MarkerDetector}!getCandidates@{getCandidates}}
\index{getCandidates@{getCandidates}!aruco::MarkerDetector@{aruco::MarkerDetector}}
\doxysubsubsection{\texorpdfstring{getCandidates()}{getCandidates()}}
{\footnotesize\ttfamily const vector$<$std\+::vector$<$cv\+::\+Point2f$>$ $>$\& aruco\+::\+Marker\+Detector\+::get\+Candidates (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}

Returns a list candidates to be markers (rectangles), for which no valid id was found after calling detect\+Rectangles 

Definition at line 233 of file markerdetector.\+h.


\begin{DoxyCode}{0}
\DoxyCodeLine{233                                                          \{}
\DoxyCodeLine{234         \textcolor{keywordflow}{return} \mbox{\hyperlink{classaruco_1_1MarkerDetector_a9fda59f95b8b009596027f49a502bbfc}{\_candidates}};}
\DoxyCodeLine{235     \}}

\end{DoxyCode}
\mbox{\Hypertarget{classaruco_1_1MarkerDetector_ac6775c929bb5fc017cceaa1abdb5aca2}\label{classaruco_1_1MarkerDetector_ac6775c929bb5fc017cceaa1abdb5aca2}} 
\index{aruco::MarkerDetector@{aruco::MarkerDetector}!getCornerRefinementMethod@{getCornerRefinementMethod}}
\index{getCornerRefinementMethod@{getCornerRefinementMethod}!aruco::MarkerDetector@{aruco::MarkerDetector}}
\doxysubsubsection{\texorpdfstring{getCornerRefinementMethod()}{getCornerRefinementMethod()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classaruco_1_1MarkerDetector_ace0069f60aa5cef25a455be1e3d66dc1}{Corner\+Refinement\+Method}} aruco\+::\+Marker\+Detector\+::get\+Corner\+Refinement\+Method (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}



Definition at line 152 of file markerdetector.\+h.


\begin{DoxyCode}{0}
\DoxyCodeLine{152                                                             \{}
\DoxyCodeLine{153         \textcolor{keywordflow}{return} \mbox{\hyperlink{classaruco_1_1MarkerDetector_a26dbffecbb478d5e2198da4494345066}{\_cornerMethod}};}
\DoxyCodeLine{154     \}}

\end{DoxyCode}
\mbox{\Hypertarget{classaruco_1_1MarkerDetector_a4cfa657029c6398e6d2f6dacf37da354}\label{classaruco_1_1MarkerDetector_a4cfa657029c6398e6d2f6dacf37da354}} 
\index{aruco::MarkerDetector@{aruco::MarkerDetector}!getCrossPoint@{getCrossPoint}}
\index{getCrossPoint@{getCrossPoint}!aruco::MarkerDetector@{aruco::MarkerDetector}}
\doxysubsubsection{\texorpdfstring{getCrossPoint()}{getCrossPoint()}}
{\footnotesize\ttfamily Point2f aruco\+::\+Marker\+Detector\+::get\+Cross\+Point (\begin{DoxyParamCaption}\item[{const cv\+::\+Point3f \&}]{line1,  }\item[{const cv\+::\+Point3f \&}]{line2 }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 879 of file markerdetector.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{880   \{}
\DoxyCodeLine{881 }
\DoxyCodeLine{882     \textcolor{comment}{// create matrices of equation system}}
\DoxyCodeLine{883     Mat A(2,2,CV\_32FC1, Scalar(0));}
\DoxyCodeLine{884     Mat B(2,1,CV\_32FC1, Scalar(0));}
\DoxyCodeLine{885     Mat X;}
\DoxyCodeLine{886 }
\DoxyCodeLine{887     A.at<\textcolor{keywordtype}{float}>(0, 0) = line1.x;}
\DoxyCodeLine{888     A.at<\textcolor{keywordtype}{float}>(0, 1) = line1.y;}
\DoxyCodeLine{889     B.at<\textcolor{keywordtype}{float}>(0, 0) = -\/line1.z;}
\DoxyCodeLine{890 }
\DoxyCodeLine{891     A.at<\textcolor{keywordtype}{float}>(1, 0) = line2.x;}
\DoxyCodeLine{892     A.at<\textcolor{keywordtype}{float}>(1, 1) = line2.y;}
\DoxyCodeLine{893     B.at<\textcolor{keywordtype}{float}>(1, 0) = -\/line2.z;}
\DoxyCodeLine{894 }
\DoxyCodeLine{895     \textcolor{comment}{// solve system}}
\DoxyCodeLine{896     solve(A,B,X, DECOMP\_SVD);}
\DoxyCodeLine{897     \textcolor{keywordflow}{return} Point2f(X.at<\textcolor{keywordtype}{float}>(0,0), X.at<\textcolor{keywordtype}{float}>(1,0));}
\DoxyCodeLine{898 }
\DoxyCodeLine{899   \}}

\end{DoxyCode}
\mbox{\Hypertarget{classaruco_1_1MarkerDetector_a7076508d26ba9a3e0606052d2a570bb8}\label{classaruco_1_1MarkerDetector_a7076508d26ba9a3e0606052d2a570bb8}} 
\index{aruco::MarkerDetector@{aruco::MarkerDetector}!getDesiredSpeed@{getDesiredSpeed}}
\index{getDesiredSpeed@{getDesiredSpeed}!aruco::MarkerDetector@{aruco::MarkerDetector}}
\doxysubsubsection{\texorpdfstring{getDesiredSpeed()}{getDesiredSpeed()}}
{\footnotesize\ttfamily int aruco\+::\+Marker\+Detector\+::get\+Desired\+Speed (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}



Definition at line 185 of file markerdetector.\+h.


\begin{DoxyCode}{0}
\DoxyCodeLine{185                                \{}
\DoxyCodeLine{186         \textcolor{keywordflow}{return} \mbox{\hyperlink{classaruco_1_1MarkerDetector_a65f05a8ebd1dbfb9b56fba32e2e4f796}{\_speed}};}
\DoxyCodeLine{187     \}}

\end{DoxyCode}
\mbox{\Hypertarget{classaruco_1_1MarkerDetector_a79a701055cdccd7816f509c91887fa2b}\label{classaruco_1_1MarkerDetector_a79a701055cdccd7816f509c91887fa2b}} 
\index{aruco::MarkerDetector@{aruco::MarkerDetector}!getMinMaxSize@{getMinMaxSize}}
\index{getMinMaxSize@{getMinMaxSize}!aruco::MarkerDetector@{aruco::MarkerDetector}}
\doxysubsubsection{\texorpdfstring{getMinMaxSize()}{getMinMaxSize()}}
{\footnotesize\ttfamily void aruco\+::\+Marker\+Detector\+::get\+Min\+Max\+Size (\begin{DoxyParamCaption}\item[{float \&}]{min,  }\item[{float \&}]{max }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}

reads the min and max sizes employed 
\begin{DoxyParams}{Parameters}
{\em min} & output size of the contour to consider a possible marker as valid (0,1\mbox{]} \\
\hline
{\em max} & output size of the contour to consider a possible marker as valid \mbox{[}0,1) \\
\hline
\end{DoxyParams}


Definition at line 168 of file markerdetector.\+h.


\begin{DoxyCode}{0}
\DoxyCodeLine{168 \{min=\mbox{\hyperlink{classaruco_1_1MarkerDetector_a483bf4b430ccd79d2841ed17540fa16f}{\_minSize}};max=\mbox{\hyperlink{classaruco_1_1MarkerDetector_a976cf5f634ddab80ba50c4616b35cd14}{\_maxSize}};\}}

\end{DoxyCode}
\mbox{\Hypertarget{classaruco_1_1MarkerDetector_af5d46972fb431b3b147c78bdac2096f3}\label{classaruco_1_1MarkerDetector_af5d46972fb431b3b147c78bdac2096f3}} 
\index{aruco::MarkerDetector@{aruco::MarkerDetector}!getThresholdedImage@{getThresholdedImage}}
\index{getThresholdedImage@{getThresholdedImage}!aruco::MarkerDetector@{aruco::MarkerDetector}}
\doxysubsubsection{\texorpdfstring{getThresholdedImage()}{getThresholdedImage()}}
{\footnotesize\ttfamily const cv\+::\+Mat\& aruco\+::\+Marker\+Detector\+::get\+Thresholded\+Image (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}

Returns a reference to the internal image thresholded. It is for visualization purposes and to adjust manually the parameters 

Definition at line 139 of file markerdetector.\+h.


\begin{DoxyCode}{0}
\DoxyCodeLine{139                                         \{}
\DoxyCodeLine{140         \textcolor{keywordflow}{return} \mbox{\hyperlink{classaruco_1_1MarkerDetector_a9b34f63ac4459452b50f7975efad045a}{thres}};}
\DoxyCodeLine{141     \}}

\end{DoxyCode}
\mbox{\Hypertarget{classaruco_1_1MarkerDetector_a3b82148fd92145a36f24eb08aea75fb6}\label{classaruco_1_1MarkerDetector_a3b82148fd92145a36f24eb08aea75fb6}} 
\index{aruco::MarkerDetector@{aruco::MarkerDetector}!getThresholdMethod@{getThresholdMethod}}
\index{getThresholdMethod@{getThresholdMethod}!aruco::MarkerDetector@{aruco::MarkerDetector}}
\doxysubsubsection{\texorpdfstring{getThresholdMethod()}{getThresholdMethod()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classaruco_1_1MarkerDetector_a1d6ee5812484ae973ea2638aa054b389}{Threshold\+Methods}} aruco\+::\+Marker\+Detector\+::get\+Threshold\+Method (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}

Returns the current threshold method 

Definition at line 111 of file markerdetector.\+h.


\begin{DoxyCode}{0}
\DoxyCodeLine{111                                                \{}
\DoxyCodeLine{112         \textcolor{keywordflow}{return} \mbox{\hyperlink{classaruco_1_1MarkerDetector_a4d9d5280ef63b2fa70afb8ce3f89e1c8}{\_thresMethod}};}
\DoxyCodeLine{113     \}}

\end{DoxyCode}
\mbox{\Hypertarget{classaruco_1_1MarkerDetector_a6a3f7889bd057f47425ade483833953d}\label{classaruco_1_1MarkerDetector_a6a3f7889bd057f47425ade483833953d}} 
\index{aruco::MarkerDetector@{aruco::MarkerDetector}!getThresholdParams@{getThresholdParams}}
\index{getThresholdParams@{getThresholdParams}!aruco::MarkerDetector@{aruco::MarkerDetector}}
\doxysubsubsection{\texorpdfstring{getThresholdParams()}{getThresholdParams()}}
{\footnotesize\ttfamily void aruco\+::\+Marker\+Detector\+::get\+Threshold\+Params (\begin{DoxyParamCaption}\item[{double \&}]{param1,  }\item[{double \&}]{param2 }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}

Set the parameters of the threshold method We are currently using the Adptive threshold ee opencv doc of adaptive\+Threshold for more info param1\+: block\+Size of the pixel neighborhood that is used to calculate a threshold value for the pixel param2\+: The constant subtracted from the mean or weighted mean 

Definition at line 130 of file markerdetector.\+h.


\begin{DoxyCode}{0}
\DoxyCodeLine{130                                                                 \{}
\DoxyCodeLine{131         param1=\mbox{\hyperlink{classaruco_1_1MarkerDetector_acc8735a854af013a402ad796aeb42e4e}{\_thresParam1}};}
\DoxyCodeLine{132         param2=\mbox{\hyperlink{classaruco_1_1MarkerDetector_a805f25c325fa30cf42f6f1b6ee40f1a0}{\_thresParam2}};}
\DoxyCodeLine{133     \}}

\end{DoxyCode}
\mbox{\Hypertarget{classaruco_1_1MarkerDetector_a3e0bfae23d10f3e9c3ea4c4de7bea90b}\label{classaruco_1_1MarkerDetector_a3e0bfae23d10f3e9c3ea4c4de7bea90b}} 
\index{aruco::MarkerDetector@{aruco::MarkerDetector}!glGetProjectionMatrix@{glGetProjectionMatrix}}
\index{glGetProjectionMatrix@{glGetProjectionMatrix}!aruco::MarkerDetector@{aruco::MarkerDetector}}
\doxysubsubsection{\texorpdfstring{glGetProjectionMatrix()}{glGetProjectionMatrix()}}
{\footnotesize\ttfamily void aruco\+::\+Marker\+Detector\+::gl\+Get\+Projection\+Matrix (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classaruco_1_1CameraParameters}{Camera\+Parameters}} \&}]{Cam\+Matrix,  }\item[{cv\+::\+Size}]{org\+Img\+Size,  }\item[{cv\+::\+Size}]{size,  }\item[{double}]{proj\+\_\+matrix\mbox{[}16\mbox{]},  }\item[{double}]{gnear,  }\item[{double}]{gfar,  }\item[{bool}]{invert = {\ttfamily false} }\end{DoxyParamCaption}) throw ( cv\+::\+Exception) \hspace{0.3cm}{\ttfamily [static]}}

DEPRECATED!!! Use the member function in \mbox{\hyperlink{classaruco_1_1CameraParameters}{Camera\+Parameters}}

Given the intrinsic camera parameters returns the GL\+\_\+\+PROJECTION matrix for opengl. PLease NOTE that when using Open\+GL, it is assumed no camera distorsion! So, if it is not true, you should have undistor image


\begin{DoxyParams}{Parameters}
{\em Cam\+Matrix} & arameters of the camera specified. \\
\hline
{\em org\+Img\+Size} & size of the original image \\
\hline
{\em size} & of the image/window where to render (can be different from the real camera image). Please not that it must be related to Cam\+Matrix \\
\hline
{\em proj\+\_\+matrix} & output projection matrix to give to opengl \\
\hline
{\em gnear,gfar} & visible rendering range \\
\hline
{\em invert} & indicates if the output projection matrix has to yield a horizontally inverted image because image data has not been stored in the order of gl\+Draw\+Pixels\+: bottom-\/to-\/top. \\
\hline
\end{DoxyParams}


Definition at line 989 of file markerdetector.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{991   \{}
\DoxyCodeLine{992     cerr<<\textcolor{stringliteral}{"{}MarkerDetector::glGetProjectionMatrix . This a deprecated function. Use CameraParameters::glGetProjectionMatrix instead. "{}}<<\_\_FILE\_\_<<\textcolor{stringliteral}{"{} "{}}<<\_\_LINE\_\_<<endl;}
\DoxyCodeLine{993     CamMatrix.glGetProjectionMatrix ( orgImgSize,size,proj\_matrix,gnear,gfar,invert );}
\DoxyCodeLine{994   \}}

\end{DoxyCode}
\mbox{\Hypertarget{classaruco_1_1MarkerDetector_afff23657f5022efef54011546b8c60e0}\label{classaruco_1_1MarkerDetector_afff23657f5022efef54011546b8c60e0}} 
\index{aruco::MarkerDetector@{aruco::MarkerDetector}!interpolate2Dline@{interpolate2Dline}}
\index{interpolate2Dline@{interpolate2Dline}!aruco::MarkerDetector@{aruco::MarkerDetector}}
\doxysubsubsection{\texorpdfstring{interpolate2Dline()}{interpolate2Dline()}}
{\footnotesize\ttfamily void aruco\+::\+Marker\+Detector\+::interpolate2\+Dline (\begin{DoxyParamCaption}\item[{const vector$<$ cv\+::\+Point $>$ \&}]{in\+Points,  }\item[{cv\+::\+Point3f \&}]{out\+Line }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 824 of file markerdetector.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{825   \{}
\DoxyCodeLine{826 }
\DoxyCodeLine{827     \textcolor{keywordtype}{float} minX, maxX, minY, maxY;}
\DoxyCodeLine{828     minX = maxX = inPoints[0].x;}
\DoxyCodeLine{829     minY = maxY = inPoints[0].y;}
\DoxyCodeLine{830     \textcolor{keywordflow}{for}(\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} i=1; i<inPoints.size(); ++i)  \{}
\DoxyCodeLine{831       \textcolor{keywordflow}{if}(inPoints[i].x < minX) minX = inPoints[i].x;}
\DoxyCodeLine{832       \textcolor{keywordflow}{if}(inPoints[i].x > maxX) maxX = inPoints[i].x;}
\DoxyCodeLine{833       \textcolor{keywordflow}{if}(inPoints[i].y < minY) minY = inPoints[i].y;}
\DoxyCodeLine{834       \textcolor{keywordflow}{if}(inPoints[i].y > maxY) maxY = inPoints[i].y;}
\DoxyCodeLine{835     \}}
\DoxyCodeLine{836 }
\DoxyCodeLine{837     \textcolor{comment}{// create matrices of equation system}}
\DoxyCodeLine{838     Mat A(inPoints.size(),2,CV\_32FC1, Scalar(0));}
\DoxyCodeLine{839     Mat B(inPoints.size(),1,CV\_32FC1, Scalar(0));}
\DoxyCodeLine{840     Mat X;}
\DoxyCodeLine{841 }
\DoxyCodeLine{842     }
\DoxyCodeLine{843     }
\DoxyCodeLine{844     \textcolor{keywordflow}{if}( maxX-\/minX > maxY-\/minY ) \{}
\DoxyCodeLine{845       \textcolor{comment}{// Ax + C = y}}
\DoxyCodeLine{846       \textcolor{keywordflow}{for} (\textcolor{keywordtype}{size\_t} i=0; i<inPoints.size(); ++i) \{}
\DoxyCodeLine{847 }
\DoxyCodeLine{848         A.at<\textcolor{keywordtype}{float}>(i, 0) = inPoints[i].x;}
\DoxyCodeLine{849         A.at<\textcolor{keywordtype}{float}>(i, 1) = 1.;}
\DoxyCodeLine{850         B.at<\textcolor{keywordtype}{float}>(i, 0) = inPoints[i].y;}
\DoxyCodeLine{851 }
\DoxyCodeLine{852       \}}
\DoxyCodeLine{853 }
\DoxyCodeLine{854       \textcolor{comment}{// solve system}}
\DoxyCodeLine{855       solve(A,B,X, DECOMP\_SVD);}
\DoxyCodeLine{856       \textcolor{comment}{// return Ax + By + C}}
\DoxyCodeLine{857       outLine = Point3f(X.at<\textcolor{keywordtype}{float}>(0,0), -\/1., X.at<\textcolor{keywordtype}{float}>(1,0));}
\DoxyCodeLine{858     \}}
\DoxyCodeLine{859     \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{860       \textcolor{comment}{// By + C = x}}
\DoxyCodeLine{861       \textcolor{keywordflow}{for} (\textcolor{keywordtype}{size\_t} i=0; i<inPoints.size(); ++i) \{}
\DoxyCodeLine{862 }
\DoxyCodeLine{863         A.at<\textcolor{keywordtype}{float}>(i, 0) = inPoints[i].y;}
\DoxyCodeLine{864         A.at<\textcolor{keywordtype}{float}>(i, 1) = 1.;}
\DoxyCodeLine{865         B.at<\textcolor{keywordtype}{float}>(i, 0) = inPoints[i].x;}
\DoxyCodeLine{866 }
\DoxyCodeLine{867       \}}
\DoxyCodeLine{868 }
\DoxyCodeLine{869       \textcolor{comment}{// solve system}}
\DoxyCodeLine{870       solve(A,B,X, DECOMP\_SVD);}
\DoxyCodeLine{871       \textcolor{comment}{// return Ax + By + C}}
\DoxyCodeLine{872       outLine = Point3f(-\/1., X.at<\textcolor{keywordtype}{float}>(0,0), X.at<\textcolor{keywordtype}{float}>(1,0));}
\DoxyCodeLine{873     \}}
\DoxyCodeLine{874 }
\DoxyCodeLine{875   \}}

\end{DoxyCode}
\mbox{\Hypertarget{classaruco_1_1MarkerDetector_a29b5f940d888f76b491dd2b5affac0a7}\label{classaruco_1_1MarkerDetector_a29b5f940d888f76b491dd2b5affac0a7}} 
\index{aruco::MarkerDetector@{aruco::MarkerDetector}!isInto@{isInto}}
\index{isInto@{isInto}!aruco::MarkerDetector@{aruco::MarkerDetector}}
\doxysubsubsection{\texorpdfstring{isInto()}{isInto()}}
{\footnotesize\ttfamily bool aruco\+::\+Marker\+Detector\+::is\+Into (\begin{DoxyParamCaption}\item[{cv\+::\+Mat \&}]{contour,  }\item[{std\+::vector$<$ cv\+::\+Point2f $>$ \&}]{b }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 698 of file markerdetector.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{699   \{}
\DoxyCodeLine{700 }
\DoxyCodeLine{701     \textcolor{keywordflow}{for} ( \textcolor{keywordtype}{size\_t} i=0;i<b.size();i++ )}
\DoxyCodeLine{702       \textcolor{keywordflow}{if} ( pointPolygonTest ( contour,b[i],\textcolor{keyword}{false} ) >0 ) \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{703     \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{704   \}}

\end{DoxyCode}
\mbox{\Hypertarget{classaruco_1_1MarkerDetector_a6a3008d48ede27c2a3f64123ef57b7c5}\label{classaruco_1_1MarkerDetector_a6a3008d48ede27c2a3f64123ef57b7c5}} 
\index{aruco::MarkerDetector@{aruco::MarkerDetector}!perimeter@{perimeter}}
\index{perimeter@{perimeter}!aruco::MarkerDetector@{aruco::MarkerDetector}}
\doxysubsubsection{\texorpdfstring{perimeter()}{perimeter()}}
{\footnotesize\ttfamily int aruco\+::\+Marker\+Detector\+::perimeter (\begin{DoxyParamCaption}\item[{std\+::vector$<$ cv\+::\+Point2f $>$ \&}]{a }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 711 of file markerdetector.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{712   \{}
\DoxyCodeLine{713     \textcolor{keywordtype}{int} sum=0;}
\DoxyCodeLine{714     \textcolor{keywordflow}{for} ( \textcolor{keywordtype}{size\_t} i=0;i<a.size();i++ )}
\DoxyCodeLine{715     \{}
\DoxyCodeLine{716       \textcolor{keywordtype}{int} i2= ( i+1 ) \%a.size();}
\DoxyCodeLine{717       sum+= sqrt ( ( a[i].x-\/a[i2].x ) * ( a[i].x-\/a[i2].x ) + ( a[i].y-\/a[i2].y ) * ( a[i].y-\/a[i2].y ) ) ;}
\DoxyCodeLine{718     \}}
\DoxyCodeLine{719     \textcolor{keywordflow}{return} sum;}
\DoxyCodeLine{720   \}}

\end{DoxyCode}
\mbox{\Hypertarget{classaruco_1_1MarkerDetector_a8a6f10343676f588c64a2978f3091e74}\label{classaruco_1_1MarkerDetector_a8a6f10343676f588c64a2978f3091e74}} 
\index{aruco::MarkerDetector@{aruco::MarkerDetector}!pyrDown@{pyrDown}}
\index{pyrDown@{pyrDown}!aruco::MarkerDetector@{aruco::MarkerDetector}}
\doxysubsubsection{\texorpdfstring{pyrDown()}{pyrDown()}}
{\footnotesize\ttfamily void aruco\+::\+Marker\+Detector\+::pyr\+Down (\begin{DoxyParamCaption}\item[{unsigned int}]{level }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}

Use an smaller version of the input image for marker detection. If your marker is small enough, you can employ an smaller image to perform the detection without noticeable reduction in the precision. Internally, we are performing a pyrdown operation


\begin{DoxyParams}{Parameters}
{\em level} & number of times the image size is divided by 2. Internally, we are performing a pyrdown. \\
\hline
\end{DoxyParams}


Definition at line 214 of file markerdetector.\+h.


\begin{DoxyCode}{0}
\DoxyCodeLine{214 \{\mbox{\hyperlink{classaruco_1_1MarkerDetector_a922c5bba1739391191622de0b62b59c9}{pyrdown\_level}}=level;\}}

\end{DoxyCode}
\mbox{\Hypertarget{classaruco_1_1MarkerDetector_af81636179989d4eb8489025edf8d6cee}\label{classaruco_1_1MarkerDetector_af81636179989d4eb8489025edf8d6cee}} 
\index{aruco::MarkerDetector@{aruco::MarkerDetector}!refineCandidateLines@{refineCandidateLines}}
\index{refineCandidateLines@{refineCandidateLines}!aruco::MarkerDetector@{aruco::MarkerDetector}}
\doxysubsubsection{\texorpdfstring{refineCandidateLines()}{refineCandidateLines()}}
{\footnotesize\ttfamily void aruco\+::\+Marker\+Detector\+::refine\+Candidate\+Lines (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classaruco_1_1MarkerDetector_1_1MarkerCandidate}{Marker\+Detector\+::\+Marker\+Candidate}} \&}]{candidate }\end{DoxyParamCaption})}

Refine \mbox{\hyperlink{classaruco_1_1MarkerDetector_1_1MarkerCandidate}{Marker\+Candidate}} Corner using LINES method 
\begin{DoxyParams}{Parameters}
{\em candidate} & candidate to refine corners \\
\hline
\end{DoxyParams}


Definition at line 763 of file markerdetector.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{764   \{}
\DoxyCodeLine{765     \textcolor{comment}{// search corners on the contour vector}}
\DoxyCodeLine{766     vector<size\_t> cornerIndex;}
\DoxyCodeLine{767     cornerIndex.resize(4);}
\DoxyCodeLine{768     \textcolor{keywordflow}{for}(\textcolor{keywordtype}{size\_t} j=0; j<candidate.contour.size(); ++j) \{}
\DoxyCodeLine{769       \textcolor{keywordflow}{for}(\textcolor{keywordtype}{size\_t} k=0; k<4; ++k) \{}
\DoxyCodeLine{770 \textcolor{preprocessor}{\#pragma GCC diagnostic push}}
\DoxyCodeLine{771 \textcolor{preprocessor}{\#pragma GCC diagnostic ignored "{}-\/Wfloat-\/equal"{}}}
\DoxyCodeLine{772         \textcolor{keywordflow}{if}(candidate.contour[j].x==candidate[k].x \&\& candidate.contour[j].y==candidate[k].y) \{}
\DoxyCodeLine{773           cornerIndex[k] = j;}
\DoxyCodeLine{774         \}}
\DoxyCodeLine{775 \textcolor{preprocessor}{\#pragma GCC diagnostic pop }}
\DoxyCodeLine{776       \}}
\DoxyCodeLine{777     \}}
\DoxyCodeLine{778 }
\DoxyCodeLine{779     \textcolor{comment}{// contour pixel in inverse order or not?}}
\DoxyCodeLine{780     \textcolor{keywordtype}{bool} inverse;}
\DoxyCodeLine{781     \textcolor{keywordflow}{if}( (cornerIndex[1] > cornerIndex[0]) \&\& (cornerIndex[2]>cornerIndex[1] || cornerIndex[2]<cornerIndex[0]) )}
\DoxyCodeLine{782       inverse = \textcolor{keyword}{false};}
\DoxyCodeLine{783     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}( cornerIndex[2]>cornerIndex[1] \&\& cornerIndex[2]<cornerIndex[0] )}
\DoxyCodeLine{784       inverse = \textcolor{keyword}{false};}
\DoxyCodeLine{785     \textcolor{keywordflow}{else} inverse = \textcolor{keyword}{true};}
\DoxyCodeLine{786 }
\DoxyCodeLine{787 }
\DoxyCodeLine{788     \textcolor{comment}{// get pixel vector for each line of the marker}}
\DoxyCodeLine{789     \textcolor{keywordtype}{int} inc = 1;}
\DoxyCodeLine{790     \textcolor{keywordflow}{if}(inverse) inc = -\/1;}
\DoxyCodeLine{791 }
\DoxyCodeLine{792     vector<std::vector<cv::Point> > contourLines;}
\DoxyCodeLine{793     contourLines.resize(4);}
\DoxyCodeLine{794     \textcolor{keywordflow}{for}(\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} l=0; l<4; ++l) \{}
\DoxyCodeLine{795       \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} j=(\textcolor{keywordtype}{int})cornerIndex[l]; j!=(int)cornerIndex[(l+1)\%4]; j+=inc) \{}
\DoxyCodeLine{796         \textcolor{keywordflow}{if}(j==(\textcolor{keywordtype}{int})candidate.contour.size() \&\& !inverse) j=0;}
\DoxyCodeLine{797         \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(j==0 \&\& inverse) j=candidate.contour.size()-\/1;}
\DoxyCodeLine{798         contourLines[l].push\_back(candidate.contour[j]);}
\DoxyCodeLine{799         \textcolor{keywordflow}{if}(j==(\textcolor{keywordtype}{int})cornerIndex[(l+1)\%4]) \textcolor{keywordflow}{break}; \textcolor{comment}{// this has to be added because of the previous ifs}}
\DoxyCodeLine{800       \}}
\DoxyCodeLine{801 }
\DoxyCodeLine{802     \}}
\DoxyCodeLine{803 }
\DoxyCodeLine{804     \textcolor{comment}{// interpolate marker lines}}
\DoxyCodeLine{805     vector<Point3f> lines;}
\DoxyCodeLine{806     lines.resize(4);}
\DoxyCodeLine{807     \textcolor{keywordflow}{for}(\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} j=0; j<lines.size(); ++j)}
\DoxyCodeLine{808       \mbox{\hyperlink{classaruco_1_1MarkerDetector_afff23657f5022efef54011546b8c60e0}{interpolate2Dline}}(contourLines[j], lines[j]);}
\DoxyCodeLine{809 }
\DoxyCodeLine{810     \textcolor{comment}{// get cross points of lines}}
\DoxyCodeLine{811     vector<Point2f> crossPoints;}
\DoxyCodeLine{812     crossPoints.resize(4);}
\DoxyCodeLine{813     \textcolor{keywordflow}{for}(\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} i=0; i<4; ++i)}
\DoxyCodeLine{814       crossPoints[i] = \mbox{\hyperlink{classaruco_1_1MarkerDetector_a4cfa657029c6398e6d2f6dacf37da354}{getCrossPoint}}( lines[(i-\/1)\%4], lines[i] );}
\DoxyCodeLine{815 }
\DoxyCodeLine{816     \textcolor{comment}{// reassing points}}
\DoxyCodeLine{817     \textcolor{keywordflow}{for}(\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} j=0; j<4; ++j)}
\DoxyCodeLine{818       candidate[j] = crossPoints[j];}
\DoxyCodeLine{819   \}}

\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=344pt]{classaruco_1_1MarkerDetector_af81636179989d4eb8489025edf8d6cee_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classaruco_1_1MarkerDetector_adfe27f2dc4d057ee803ef24b2671d77b}\label{classaruco_1_1MarkerDetector_adfe27f2dc4d057ee803ef24b2671d77b}} 
\index{aruco::MarkerDetector@{aruco::MarkerDetector}!removeElements@{removeElements}}
\index{removeElements@{removeElements}!aruco::MarkerDetector@{aruco::MarkerDetector}}
\doxysubsubsection{\texorpdfstring{removeElements()}{removeElements()}}
{\footnotesize\ttfamily template$<$typename T $>$ \\
void aruco\+::\+Marker\+Detector\+::remove\+Elements (\begin{DoxyParamCaption}\item[{vector$<$ T $>$ \&}]{vinout,  }\item[{const vector$<$ bool $>$ \&}]{to\+Remove }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [private]}}

Given a vector vinout with elements and a boolean vector indicating the lements from it to remove, this function remove the elements 
\begin{DoxyParams}{Parameters}
{\em vinout} & \\
\hline
{\em to\+Remove} & \\
\hline
\end{DoxyParams}


Definition at line 331 of file markerdetector.\+h.


\begin{DoxyCode}{0}
\DoxyCodeLine{332     \{}
\DoxyCodeLine{333        \textcolor{comment}{//remove the invalid ones by setting the valid in the positions left by the invalids}}
\DoxyCodeLine{334       \textcolor{keywordtype}{size\_t} indexValid=0;}
\DoxyCodeLine{335       \textcolor{keywordflow}{for} (\textcolor{keywordtype}{size\_t} i=0;i<toRemove.size();i++) \{}
\DoxyCodeLine{336         \textcolor{keywordflow}{if} (!toRemove[i]) \{}
\DoxyCodeLine{337             \textcolor{keywordflow}{if} (indexValid!=i) vinout[indexValid]=vinout[i];}
\DoxyCodeLine{338             indexValid++;}
\DoxyCodeLine{339         \}}
\DoxyCodeLine{340       \}}
\DoxyCodeLine{341       vinout.resize(indexValid);}
\DoxyCodeLine{342     \}}

\end{DoxyCode}
\mbox{\Hypertarget{classaruco_1_1MarkerDetector_ae46e37f9795c2d95084fab9f46a36a7a}\label{classaruco_1_1MarkerDetector_ae46e37f9795c2d95084fab9f46a36a7a}} 
\index{aruco::MarkerDetector@{aruco::MarkerDetector}!setCornerRefinementMethod@{setCornerRefinementMethod}}
\index{setCornerRefinementMethod@{setCornerRefinementMethod}!aruco::MarkerDetector@{aruco::MarkerDetector}}
\doxysubsubsection{\texorpdfstring{setCornerRefinementMethod()}{setCornerRefinementMethod()}}
{\footnotesize\ttfamily void aruco\+::\+Marker\+Detector\+::set\+Corner\+Refinement\+Method (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classaruco_1_1MarkerDetector_ace0069f60aa5cef25a455be1e3d66dc1}{Corner\+Refinement\+Method}}}]{method }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Definition at line 147 of file markerdetector.\+h.


\begin{DoxyCode}{0}
\DoxyCodeLine{147                                                                   \{}
\DoxyCodeLine{148         \mbox{\hyperlink{classaruco_1_1MarkerDetector_a26dbffecbb478d5e2198da4494345066}{\_cornerMethod}}=method;}
\DoxyCodeLine{149     \}}

\end{DoxyCode}
\mbox{\Hypertarget{classaruco_1_1MarkerDetector_a334888d444947beff4b92b7c37cf4a6a}\label{classaruco_1_1MarkerDetector_a334888d444947beff4b92b7c37cf4a6a}} 
\index{aruco::MarkerDetector@{aruco::MarkerDetector}!setDesiredSpeed@{setDesiredSpeed}}
\index{setDesiredSpeed@{setDesiredSpeed}!aruco::MarkerDetector@{aruco::MarkerDetector}}
\doxysubsubsection{\texorpdfstring{setDesiredSpeed()}{setDesiredSpeed()}}
{\footnotesize\ttfamily void aruco\+::\+Marker\+Detector\+::set\+Desired\+Speed (\begin{DoxyParamCaption}\item[{int}]{val }\end{DoxyParamCaption})}

Specifies a value to indicate the required speed for the internal processes. If you need maximum speed (at the cost of a lower detection rate), use the value 3, If you rather a more precise and slow detection, set it to 0.

Actually, the main differences are that in highspeed mode, we employ set\+Corner\+Refinement\+Method(\+NONE) and internally, we use a small canonical image to detect the marker. In low speed mode, we use set\+Corner\+Refinement\+Method(\+HARRIS) and a bigger size for the canonical marker image 

Definition at line 78 of file markerdetector.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{79   \{}
\DoxyCodeLine{80     \textcolor{keywordflow}{if} ( val<0 ) val=0;}
\DoxyCodeLine{81     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} ( val>3 ) val=2;}
\DoxyCodeLine{82 }
\DoxyCodeLine{83     \mbox{\hyperlink{classaruco_1_1MarkerDetector_a65f05a8ebd1dbfb9b56fba32e2e4f796}{\_speed}}=val;}
\DoxyCodeLine{84     \textcolor{keywordflow}{switch} ( \mbox{\hyperlink{classaruco_1_1MarkerDetector_a65f05a8ebd1dbfb9b56fba32e2e4f796}{\_speed}} )}
\DoxyCodeLine{85     \{}
\DoxyCodeLine{86 }
\DoxyCodeLine{87     \textcolor{keywordflow}{case} 0:}
\DoxyCodeLine{88       \mbox{\hyperlink{classaruco_1_1MarkerDetector_a1e5759f7f1cdfd30cb3f747fab669337}{\_markerWarpSize}}=56;}
\DoxyCodeLine{89       \mbox{\hyperlink{classaruco_1_1MarkerDetector_a26dbffecbb478d5e2198da4494345066}{\_cornerMethod}}=\mbox{\hyperlink{classaruco_1_1MarkerDetector_ace0069f60aa5cef25a455be1e3d66dc1a6a41c357297ab089899bad573f91cc58}{SUBPIX}};}
\DoxyCodeLine{90       \mbox{\hyperlink{classaruco_1_1MarkerDetector_a3534fbcee660e087bbbf972a6ca8cd89}{\_doErosion}}=\textcolor{keyword}{true};}
\DoxyCodeLine{91       \textcolor{keywordflow}{break};}
\DoxyCodeLine{92 }
\DoxyCodeLine{93     \textcolor{keywordflow}{case} 1:}
\DoxyCodeLine{94     \textcolor{keywordflow}{case} 2:}
\DoxyCodeLine{95       \mbox{\hyperlink{classaruco_1_1MarkerDetector_a1e5759f7f1cdfd30cb3f747fab669337}{\_markerWarpSize}}=28;}
\DoxyCodeLine{96       \mbox{\hyperlink{classaruco_1_1MarkerDetector_a26dbffecbb478d5e2198da4494345066}{\_cornerMethod}}=\mbox{\hyperlink{classaruco_1_1MarkerDetector_ace0069f60aa5cef25a455be1e3d66dc1a818e862759af62704385015cf0ca2239}{NONE}};}
\DoxyCodeLine{97       \textcolor{keywordflow}{break};}
\DoxyCodeLine{98     \};}
\DoxyCodeLine{99   \}}

\end{DoxyCode}
\mbox{\Hypertarget{classaruco_1_1MarkerDetector_a016caa551b0d14ca74913fa2036d0b5c}\label{classaruco_1_1MarkerDetector_a016caa551b0d14ca74913fa2036d0b5c}} 
\index{aruco::MarkerDetector@{aruco::MarkerDetector}!setMakerDetectorFunction@{setMakerDetectorFunction}}
\index{setMakerDetectorFunction@{setMakerDetectorFunction}!aruco::MarkerDetector@{aruco::MarkerDetector}}
\doxysubsubsection{\texorpdfstring{setMakerDetectorFunction()}{setMakerDetectorFunction()}}
{\footnotesize\ttfamily void aruco\+::\+Marker\+Detector\+::set\+Maker\+Detector\+Function (\begin{DoxyParamCaption}\item[{int($\ast$)(const cv\+::\+Mat \&in, int \&n\+Rotations)}]{markerdetector\+\_\+func }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}

Allows to specify the function that identifies a marker. Therefore, you can create your own type of markers different from these employed by default in the library. The marker function must have the following structure\+:

int my\+Marker\+Identifier(const cv\+::\+Mat \&in,int \&n\+Rotations);

The marker function receives the image \textquotesingle{}in\textquotesingle{} with the region that migh contain one of your markers. These are the rectangular regions with black in the image.

As output your marker function must indicate the following information. First, the output parameter n\+Rotations must indicate how many times the marker must be rotated clockwise 90 deg to be in its ideal position. (The way you would see it when you print it). This is employed to know always which is the corner that acts as reference system. Second, the function must return -\/1 if the image does not contains one of your markers, and its id otherwise. 

Definition at line 204 of file markerdetector.\+h.


\begin{DoxyCode}{0}
\DoxyCodeLine{204                                                                                                  \{}
\DoxyCodeLine{205         \mbox{\hyperlink{classaruco_1_1MarkerDetector_ac9dae9c42a0b3535fb5669bba684db5e}{markerIdDetector\_ptrfunc}}=markerdetector\_func;}
\DoxyCodeLine{206     \}}

\end{DoxyCode}
\mbox{\Hypertarget{classaruco_1_1MarkerDetector_a759698a524bb93ff3dd2a30dcb7e3d87}\label{classaruco_1_1MarkerDetector_a759698a524bb93ff3dd2a30dcb7e3d87}} 
\index{aruco::MarkerDetector@{aruco::MarkerDetector}!setMinMaxSize@{setMinMaxSize}}
\index{setMinMaxSize@{setMinMaxSize}!aruco::MarkerDetector@{aruco::MarkerDetector}}
\doxysubsubsection{\texorpdfstring{setMinMaxSize()}{setMinMaxSize()}}
{\footnotesize\ttfamily void aruco\+::\+Marker\+Detector\+::set\+Min\+Max\+Size (\begin{DoxyParamCaption}\item[{float}]{min = {\ttfamily 0.03},  }\item[{float}]{max = {\ttfamily 0.5} }\end{DoxyParamCaption}) throw ( cv\+::\+Exception) }

Specifies the min and max sizes of the markers as a fraction of the image size. By size we mean the maximum of cols and rows. 
\begin{DoxyParams}{Parameters}
{\em min} & size of the contour to consider a possible marker as valid (0,1\mbox{]} \\
\hline
{\em max} & size of the contour to consider a possible marker as valid \mbox{[}0,1) \\
\hline
\end{DoxyParams}


Definition at line 1003 of file markerdetector.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{1004   \{}
\DoxyCodeLine{1005     \textcolor{keywordflow}{if} (min<=0 || min>1) \textcolor{keywordflow}{throw} cv::Exception(1,\textcolor{stringliteral}{"{} min parameter out of range"{}},\textcolor{stringliteral}{"{}MarkerDetector::setMinMaxSize"{}},\_\_FILE\_\_,\_\_LINE\_\_);}
\DoxyCodeLine{1006     \textcolor{keywordflow}{if} (max<=0 || max>1) \textcolor{keywordflow}{throw} cv::Exception(1,\textcolor{stringliteral}{"{} max parameter out of range"{}},\textcolor{stringliteral}{"{}MarkerDetector::setMinMaxSize"{}},\_\_FILE\_\_,\_\_LINE\_\_);}
\DoxyCodeLine{1007     \textcolor{keywordflow}{if} (min>max) \textcolor{keywordflow}{throw} cv::Exception(1,\textcolor{stringliteral}{"{} min>max"{}},\textcolor{stringliteral}{"{}MarkerDetector::setMinMaxSize"{}},\_\_FILE\_\_,\_\_LINE\_\_);}
\DoxyCodeLine{1008     \mbox{\hyperlink{classaruco_1_1MarkerDetector_a483bf4b430ccd79d2841ed17540fa16f}{\_minSize}}=min;}
\DoxyCodeLine{1009     \mbox{\hyperlink{classaruco_1_1MarkerDetector_a976cf5f634ddab80ba50c4616b35cd14}{\_maxSize}}=max;}
\DoxyCodeLine{1010   \}}

\end{DoxyCode}
\mbox{\Hypertarget{classaruco_1_1MarkerDetector_af9f4d48cb107559f29a5c594ef6260b7}\label{classaruco_1_1MarkerDetector_af9f4d48cb107559f29a5c594ef6260b7}} 
\index{aruco::MarkerDetector@{aruco::MarkerDetector}!setThresholdMethod@{setThresholdMethod}}
\index{setThresholdMethod@{setThresholdMethod}!aruco::MarkerDetector@{aruco::MarkerDetector}}
\doxysubsubsection{\texorpdfstring{setThresholdMethod()}{setThresholdMethod()}}
{\footnotesize\ttfamily void aruco\+::\+Marker\+Detector\+::set\+Threshold\+Method (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classaruco_1_1MarkerDetector_a1d6ee5812484ae973ea2638aa054b389}{Threshold\+Methods}}}]{m }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}

Sets the threshold method 

Definition at line 106 of file markerdetector.\+h.


\begin{DoxyCode}{0}
\DoxyCodeLine{106                                                 \{}
\DoxyCodeLine{107         \mbox{\hyperlink{classaruco_1_1MarkerDetector_a4d9d5280ef63b2fa70afb8ce3f89e1c8}{\_thresMethod}}=m;}
\DoxyCodeLine{108     \}}

\end{DoxyCode}
\mbox{\Hypertarget{classaruco_1_1MarkerDetector_ae62e6b62bc82793d640c9c04ff00335c}\label{classaruco_1_1MarkerDetector_ae62e6b62bc82793d640c9c04ff00335c}} 
\index{aruco::MarkerDetector@{aruco::MarkerDetector}!setThresholdParams@{setThresholdParams}}
\index{setThresholdParams@{setThresholdParams}!aruco::MarkerDetector@{aruco::MarkerDetector}}
\doxysubsubsection{\texorpdfstring{setThresholdParams()}{setThresholdParams()}}
{\footnotesize\ttfamily void aruco\+::\+Marker\+Detector\+::set\+Threshold\+Params (\begin{DoxyParamCaption}\item[{double}]{param1,  }\item[{double}]{param2 }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}

Set the parameters of the threshold method We are currently using the Adptive threshold ee opencv doc of adaptive\+Threshold for more info 
\begin{DoxyParams}{Parameters}
{\em param1} & block\+Size of the pixel neighborhood that is used to calculate a threshold value for the pixel \\
\hline
{\em param2} & The constant subtracted from the mean or weighted mean \\
\hline
\end{DoxyParams}


Definition at line 120 of file markerdetector.\+h.


\begin{DoxyCode}{0}
\DoxyCodeLine{120                                                          \{}
\DoxyCodeLine{121         \mbox{\hyperlink{classaruco_1_1MarkerDetector_acc8735a854af013a402ad796aeb42e4e}{\_thresParam1}}=param1;}
\DoxyCodeLine{122         \mbox{\hyperlink{classaruco_1_1MarkerDetector_a805f25c325fa30cf42f6f1b6ee40f1a0}{\_thresParam2}}=param2;}
\DoxyCodeLine{123     \}}

\end{DoxyCode}
\mbox{\Hypertarget{classaruco_1_1MarkerDetector_a0c45520746ab01c710b1e6dcc550c0db}\label{classaruco_1_1MarkerDetector_a0c45520746ab01c710b1e6dcc550c0db}} 
\index{aruco::MarkerDetector@{aruco::MarkerDetector}!thresHold@{thresHold}}
\index{thresHold@{thresHold}!aruco::MarkerDetector@{aruco::MarkerDetector}}
\doxysubsubsection{\texorpdfstring{thresHold()}{thresHold()}}
{\footnotesize\ttfamily void aruco\+::\+Marker\+Detector\+::thres\+Hold (\begin{DoxyParamCaption}\item[{int}]{method,  }\item[{const cv\+::\+Mat \&}]{grey,  }\item[{cv\+::\+Mat \&}]{thres\+Img,  }\item[{double}]{param1 = {\ttfamily -\/1},  }\item[{double}]{param2 = {\ttfamily -\/1} }\end{DoxyParamCaption}) throw ( cv\+::\+Exception) }

\DoxyHorRuler{0}
 Methods you may not need \hypertarget{classaruco_1_1MarkerDetector_autotoc_md1}{}\doxysubsubsection{Thesde methods do the hard work. They have been set public in case you want to do customizations}\label{classaruco_1_1MarkerDetector_autotoc_md1}
Thesholds the passed image with the specified method. 

Definition at line 411 of file markerdetector.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{412   \{}
\DoxyCodeLine{413 \textcolor{preprocessor}{\#pragma GCC diagnostic push}}
\DoxyCodeLine{414 \textcolor{preprocessor}{\#pragma GCC diagnostic ignored "{}-\/Wfloat-\/equal"{}}}
\DoxyCodeLine{415     \textcolor{keywordflow}{if} (param1==-\/1) param1=\mbox{\hyperlink{classaruco_1_1MarkerDetector_acc8735a854af013a402ad796aeb42e4e}{\_thresParam1}};}
\DoxyCodeLine{416     \textcolor{keywordflow}{if} (param2==-\/1) param2=\mbox{\hyperlink{classaruco_1_1MarkerDetector_a805f25c325fa30cf42f6f1b6ee40f1a0}{\_thresParam2}};}
\DoxyCodeLine{417 \textcolor{preprocessor}{\#pragma GCC diagnostic pop }}
\DoxyCodeLine{418 }
\DoxyCodeLine{419     \textcolor{keywordflow}{if} ( grey\_m.type() !=CV\_8UC1 )     \textcolor{keywordflow}{throw} cv::Exception ( 9001,\textcolor{stringliteral}{"{}grey\_m.type()!=CV\_8UC1"{}},\textcolor{stringliteral}{"{}MarkerDetector::thresHold"{}},\_\_FILE\_\_,\_\_LINE\_\_ );}
\DoxyCodeLine{420     \textcolor{keywordflow}{switch} ( method )}
\DoxyCodeLine{421     \{}
\DoxyCodeLine{422     \textcolor{keywordflow}{case} \mbox{\hyperlink{classaruco_1_1MarkerDetector_a1d6ee5812484ae973ea2638aa054b389abbc9aaab9cd6580cfc292b76bb287fe5}{FIXED\_THRES}}:}
\DoxyCodeLine{423       cv::threshold ( grey\_m, out, param1,255, CV\_THRESH\_BINARY\_INV );}
\DoxyCodeLine{424       \textcolor{keywordflow}{break};}
\DoxyCodeLine{425     \textcolor{keywordflow}{case} \mbox{\hyperlink{classaruco_1_1MarkerDetector_a1d6ee5812484ae973ea2638aa054b389afdbf9cecf1d818516da5701666639c67}{ADPT\_THRES}}:\textcolor{comment}{//currently, this is the best method}}
\DoxyCodeLine{426       \textcolor{comment}{//ensure that \_thresParam1\%2==1}}
\DoxyCodeLine{427       \textcolor{keywordflow}{if} ( param1<3 ) param1=3;}
\DoxyCodeLine{428       \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} ( ( ( \textcolor{keywordtype}{int} ) param1 ) \%2 !=1 ) param1= ( int ) ( param1+1 );}
\DoxyCodeLine{429 }
\DoxyCodeLine{430       cv::adaptiveThreshold ( grey\_m,out,255,ADAPTIVE\_THRESH\_MEAN\_C,THRESH\_BINARY\_INV,param1,param2 );}
\DoxyCodeLine{431       \textcolor{keywordflow}{break};}
\DoxyCodeLine{432     \textcolor{keywordflow}{case} \mbox{\hyperlink{classaruco_1_1MarkerDetector_a1d6ee5812484ae973ea2638aa054b389a597d69a6a2c7166947ed5c885d63b65c}{CANNY}}:}
\DoxyCodeLine{433     \{}
\DoxyCodeLine{434       \textcolor{comment}{//this should be the best method, and generally it is.}}
\DoxyCodeLine{435       \textcolor{comment}{//However, some times there are small holes in the marker contour that makes}}
\DoxyCodeLine{436       \textcolor{comment}{//the contour detector not to find it properly}}
\DoxyCodeLine{437       \textcolor{comment}{//if there is a missing pixel}}
\DoxyCodeLine{438       cv::Canny ( grey\_m, out, 10, 220 );}
\DoxyCodeLine{439       \textcolor{comment}{//I've tried a closing but it add many more points that some}}
\DoxyCodeLine{440       \textcolor{comment}{//times makes this even worse}}
\DoxyCodeLine{441       \textcolor{comment}{//              Mat aux;}}
\DoxyCodeLine{442       \textcolor{comment}{//              cv::morphologyEx(thres,aux,MORPH\_CLOSE,Mat());}}
\DoxyCodeLine{443       \textcolor{comment}{//              out=aux;}}
\DoxyCodeLine{444     \}}
\DoxyCodeLine{445       \textcolor{keywordflow}{break};}
\DoxyCodeLine{446     \}}
\DoxyCodeLine{447   \}}

\end{DoxyCode}
\mbox{\Hypertarget{classaruco_1_1MarkerDetector_aedcd73ff274bad9885b3086d3b216b08}\label{classaruco_1_1MarkerDetector_aedcd73ff274bad9885b3086d3b216b08}} 
\index{aruco::MarkerDetector@{aruco::MarkerDetector}!warp@{warp}}
\index{warp@{warp}!aruco::MarkerDetector@{aruco::MarkerDetector}}
\doxysubsubsection{\texorpdfstring{warp()}{warp()}}
{\footnotesize\ttfamily bool aruco\+::\+Marker\+Detector\+::warp (\begin{DoxyParamCaption}\item[{cv\+::\+Mat \&}]{in,  }\item[{cv\+::\+Mat \&}]{out,  }\item[{cv\+::\+Size}]{size,  }\item[{std\+::vector$<$ cv\+::\+Point2f $>$}]{points }\end{DoxyParamCaption}) throw ( cv\+::\+Exception) }

Given the iput image with markers, creates an output image with it in the canonical position 
\begin{DoxyParams}{Parameters}
{\em in} & input image \\
\hline
{\em out} & image with the marker \\
\hline
{\em size} & of out \\
\hline
{\em points} & 4 corners of the marker in the image in \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
true if the operation succeed 
\end{DoxyReturn}


Definition at line 454 of file markerdetector.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{455   \{}
\DoxyCodeLine{456 }
\DoxyCodeLine{457     \textcolor{keywordflow}{if} ( points.size() !=4 )    \textcolor{keywordflow}{throw} cv::Exception ( 9001,\textcolor{stringliteral}{"{}point.size()!=4"{}},\textcolor{stringliteral}{"{}MarkerDetector::warp"{}},\_\_FILE\_\_,\_\_LINE\_\_ );}
\DoxyCodeLine{458     \textcolor{comment}{//obtain the perspective transform}}
\DoxyCodeLine{459     Point2f  pointsRes[4],pointsIn[4];}
\DoxyCodeLine{460     \textcolor{keywordflow}{for} ( \textcolor{keywordtype}{int} i=0;i<4;i++ ) pointsIn[i]=points[i];}
\DoxyCodeLine{461     pointsRes[0]= ( Point2f ( 0,0 ) );}
\DoxyCodeLine{462     pointsRes[1]= Point2f ( size.width-\/1,0 );}
\DoxyCodeLine{463     pointsRes[2]= Point2f ( size.width-\/1,size.height-\/1 );}
\DoxyCodeLine{464     pointsRes[3]= Point2f ( 0,size.height-\/1 );}
\DoxyCodeLine{465     Mat M=getPerspectiveTransform ( pointsIn,pointsRes );}
\DoxyCodeLine{466     cv::warpPerspective ( in, out,  M, size,cv::INTER\_NEAREST );}
\DoxyCodeLine{467     \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{468   \}}

\end{DoxyCode}
\mbox{\Hypertarget{classaruco_1_1MarkerDetector_a2095fdc39ea281d13adcd1f919d24a2f}\label{classaruco_1_1MarkerDetector_a2095fdc39ea281d13adcd1f919d24a2f}} 
\index{aruco::MarkerDetector@{aruco::MarkerDetector}!warp\_cylinder@{warp\_cylinder}}
\index{warp\_cylinder@{warp\_cylinder}!aruco::MarkerDetector@{aruco::MarkerDetector}}
\doxysubsubsection{\texorpdfstring{warp\_cylinder()}{warp\_cylinder()}}
{\footnotesize\ttfamily bool aruco\+::\+Marker\+Detector\+::warp\+\_\+cylinder (\begin{DoxyParamCaption}\item[{cv\+::\+Mat \&}]{in,  }\item[{cv\+::\+Mat \&}]{out,  }\item[{cv\+::\+Size}]{size,  }\item[{\mbox{\hyperlink{classaruco_1_1MarkerDetector_1_1MarkerCandidate}{Marker\+Candidate}} \&}]{mc }\end{DoxyParamCaption}) throw ( cv\+::\+Exception) \hspace{0.3cm}{\ttfamily [private]}}



Definition at line 557 of file markerdetector.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{558   \{}
\DoxyCodeLine{559 }
\DoxyCodeLine{560     \textcolor{keywordflow}{if} ( mcand.size() !=4 )    \textcolor{keywordflow}{throw} cv::Exception ( 9001,\textcolor{stringliteral}{"{}point.size()!=4"{}},\textcolor{stringliteral}{"{}MarkerDetector::warp"{}},\_\_FILE\_\_,\_\_LINE\_\_ );}
\DoxyCodeLine{561 }
\DoxyCodeLine{562     \textcolor{comment}{//check first the real need for cylinder warping}}
\DoxyCodeLine{563     \textcolor{comment}{//     cout<<"{}im="{}<<mcand.contour.size()<<endl;}}
\DoxyCodeLine{564 }
\DoxyCodeLine{565     \textcolor{comment}{//     for (size\_t i=0;i<mcand.contour.size();i++) \{}}
\DoxyCodeLine{566     \textcolor{comment}{//         cv::rectangle(\_ssImC ,mcand.contour[i],mcand.contour[i],cv::Scalar(111,111,111),-\/1 );}}
\DoxyCodeLine{567     \textcolor{comment}{//     \}}}
\DoxyCodeLine{568     \textcolor{comment}{//     mcand.draw(imC,cv::Scalar(0,255,0));}}
\DoxyCodeLine{569     \textcolor{comment}{//find the 4 different segments of the contour}}
\DoxyCodeLine{570     vector<int> idxSegments;}
\DoxyCodeLine{571     \mbox{\hyperlink{namespacearuco_a202c0375a21968bf39111816f2a5b3d3}{findCornerPointsInContour}}(mcand,mcand.contour,idxSegments);}
\DoxyCodeLine{572     \textcolor{comment}{//let us rearrange the points so that the first corner is the one whith smaller idx}}
\DoxyCodeLine{573     \textcolor{keywordtype}{int} minIdx=0;}
\DoxyCodeLine{574     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i=1;i<4;i++)}
\DoxyCodeLine{575       \textcolor{keywordflow}{if} (idxSegments[i] <idxSegments[minIdx]) minIdx=i;}
\DoxyCodeLine{576     \textcolor{comment}{//now, rotate the points to be in this order}}
\DoxyCodeLine{577     \mbox{\hyperlink{aruco__selectoptimalmarkers_8cpp_af53e62c5432a8b8312c781a7c85891bd}{std::rotate}}(idxSegments.begin(),idxSegments.begin()+minIdx,idxSegments.end());}
\DoxyCodeLine{578     \mbox{\hyperlink{aruco__selectoptimalmarkers_8cpp_af53e62c5432a8b8312c781a7c85891bd}{std::rotate}}(mcand.begin(),mcand.begin()+minIdx,mcand.end());}
\DoxyCodeLine{579 }
\DoxyCodeLine{580     \textcolor{comment}{//     cout<<"{}idxSegments="{}<<idxSegments[0]<< "{} "{}<<idxSegments[1]<< "{} "{}<<idxSegments[2]<<"{} "{}<<idxSegments[3]<<endl;}}
\DoxyCodeLine{581     \textcolor{comment}{//now, determine the sides that are deformated by cylinder perspective}}
\DoxyCodeLine{582     \textcolor{keywordtype}{int} defrmdSide=\mbox{\hyperlink{namespacearuco_a8987b1e430f340003ea28d9440f19fcf}{findDeformedSidesIdx}}(mcand.contour,idxSegments);}
\DoxyCodeLine{583     \textcolor{comment}{//     cout<<"{}Def="{}<<defrmdSide<<endl;}}
\DoxyCodeLine{584 }
\DoxyCodeLine{585     \textcolor{comment}{//instead of removing perspective distortion  of the rectangular region}}
\DoxyCodeLine{586     \textcolor{comment}{//given by the rectangle, we enlarge it a bit to include the deformed parts}}
\DoxyCodeLine{587     Point2f enlargedRegion[4];}
\DoxyCodeLine{588     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i=0;i<4;i++) enlargedRegion[i]=mcand[i];}
\DoxyCodeLine{589     \textcolor{keywordflow}{if} (defrmdSide==0) \{}
\DoxyCodeLine{590       enlargedRegion[0]=mcand[0]+(mcand[3]-\/mcand[0])*1.2;}
\DoxyCodeLine{591       enlargedRegion[1]=mcand[1]+(mcand[2]-\/mcand[1])*1.2;}
\DoxyCodeLine{592       enlargedRegion[2]=mcand[2]+(mcand[1]-\/mcand[2])*1.2;}
\DoxyCodeLine{593       enlargedRegion[3]=mcand[3]+(mcand[0]-\/mcand[3])*1.2;}
\DoxyCodeLine{594     \}}
\DoxyCodeLine{595     \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{596       enlargedRegion[0]=mcand[0]+(mcand[1]-\/mcand[0])*1.2;}
\DoxyCodeLine{597       enlargedRegion[1]=mcand[1]+(mcand[0]-\/mcand[1])*1.2;}
\DoxyCodeLine{598       enlargedRegion[2]=mcand[2]+(mcand[3]-\/mcand[2])*1.2;}
\DoxyCodeLine{599       enlargedRegion[3]=mcand[3]+(mcand[2]-\/mcand[3])*1.2;}
\DoxyCodeLine{600     \}}
\DoxyCodeLine{601     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{size\_t} i=0;i<4;i++)}
\DoxyCodeLine{602       \mbox{\hyperlink{namespacearuco_a58f14fa6c21f19c308b6ca0124e9a8e2}{setPointIntoImage}}(enlargedRegion[i],in.size());}
\DoxyCodeLine{603 }
\DoxyCodeLine{604     \textcolor{comment}{/*}}
\DoxyCodeLine{605 \textcolor{comment}{        cv::Scalar colors[4]=\{cv::Scalar(0,0,255),cv::Scalar(255,0,0),cv::Scalar(0,255,0),cv::Scalar(111,111,0)\};}}
\DoxyCodeLine{606 \textcolor{comment}{        for (int i=0;i<4;i++) \{}}
\DoxyCodeLine{607 \textcolor{comment}{            cv::rectangle(\_ssImC,mcand.contour[idxSegments[i]]-\/cv::Point(2,2),mcand.contour[idxSegments[i]]+cv::Point(2,2),colors[i],-\/1 );}}
\DoxyCodeLine{608 \textcolor{comment}{            cv::rectangle(\_ssImC,enlargedRegion[i]-\/cv::Point2f(2,2),enlargedRegion[i]+cv::Point2f(2,2),colors[i],-\/1 );}}
\DoxyCodeLine{609 \textcolor{comment}{}}
\DoxyCodeLine{610 \textcolor{comment}{        \}*/}}
\DoxyCodeLine{611     \textcolor{comment}{//     cv::imshow("{}imC"{},\_ssImC);}}
\DoxyCodeLine{612 }
\DoxyCodeLine{613 }
\DoxyCodeLine{614     \textcolor{comment}{//calculate the max distance from each contour point the line of the corresponding segment it belongs to}}
\DoxyCodeLine{615     \textcolor{comment}{//     calculate}}
\DoxyCodeLine{616     \textcolor{comment}{//      cv::waitKey(0);}}
\DoxyCodeLine{617     \textcolor{comment}{//check that the region is into image limits}}
\DoxyCodeLine{618     \textcolor{comment}{//obtain the perspective transform}}
\DoxyCodeLine{619     Point2f  pointsRes[4];}
\DoxyCodeLine{620 }
\DoxyCodeLine{621     cv::Size enlargedSize=size;}
\DoxyCodeLine{622     enlargedSize.width+=2*enlargedSize.width*0.2;}
\DoxyCodeLine{623     pointsRes[0]= ( Point2f ( 0,0 ) );}
\DoxyCodeLine{624     pointsRes[1]= Point2f ( enlargedSize.width-\/1,0 );}
\DoxyCodeLine{625     pointsRes[2]= Point2f ( enlargedSize.width-\/1,enlargedSize.height-\/1 );}
\DoxyCodeLine{626     pointsRes[3]= Point2f ( 0,enlargedSize.height-\/1 );}
\DoxyCodeLine{627     \textcolor{comment}{//rotate to ensure that deformed sides are in the horizontal axis when warping}}
\DoxyCodeLine{628     \textcolor{keywordflow}{if} (defrmdSide==0) \mbox{\hyperlink{aruco__selectoptimalmarkers_8cpp_af53e62c5432a8b8312c781a7c85891bd}{rotate}}(pointsRes,pointsRes+1,pointsRes+4);}
\DoxyCodeLine{629     cv::Mat imAux,imAux2(enlargedSize,CV\_8UC1);}
\DoxyCodeLine{630     Mat M=getPerspectiveTransform ( enlargedRegion,pointsRes );}
\DoxyCodeLine{631     cv::warpPerspective ( in, imAux,  M, enlargedSize,cv::INTER\_NEAREST);}
\DoxyCodeLine{632 }
\DoxyCodeLine{633     \textcolor{comment}{//now, transform all points to the new image}}
\DoxyCodeLine{634     vector<cv::Point> pointsCO(mcand.contour.size());}
\DoxyCodeLine{635     assert(M.type()==CV\_64F);}
\DoxyCodeLine{636     assert(M.cols==3 \&\& M.rows==3);}
\DoxyCodeLine{637     \textcolor{comment}{//     cout<<M<<endl;}}
\DoxyCodeLine{638     \textcolor{keywordtype}{double} *mptr=M.ptr<\textcolor{keywordtype}{double}>(0);}
\DoxyCodeLine{639     imAux2.setTo(cv::Scalar::all(0));}
\DoxyCodeLine{640 }
\DoxyCodeLine{641 }
\DoxyCodeLine{642     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{size\_t} i=0;i<mcand.contour.size();i++) \{}
\DoxyCodeLine{643       \textcolor{keywordtype}{float} inX=mcand.contour[i].x;}
\DoxyCodeLine{644       \textcolor{keywordtype}{float} inY=mcand.contour[i].y;}
\DoxyCodeLine{645       \textcolor{keywordtype}{float} w= inX * mptr[6]+inY * mptr[7]+mptr[8];}
\DoxyCodeLine{646       cv::Point2f pres;}
\DoxyCodeLine{647       pointsCO[i].x=( (inX * mptr[0]+inY* mptr[1]+mptr[2])/w)+0.5;}
\DoxyCodeLine{648       pointsCO[i].y=( (inX * mptr[3]+inY* mptr[4]+mptr[5])/w)+0.5;}
\DoxyCodeLine{649       \textcolor{comment}{//make integers}}
\DoxyCodeLine{650       \mbox{\hyperlink{namespacearuco_a58f14fa6c21f19c308b6ca0124e9a8e2}{setPointIntoImage}}(pointsCO[i],imAux.size());\textcolor{comment}{//ensure points are into image limits}}
\DoxyCodeLine{651       \textcolor{comment}{//    cout<<"{}p="{}<<pointsCO[i]<<"{} "{}<<imAux.size().width<<"{} "{}<<imAux.size().height<<endl;}}
\DoxyCodeLine{652       imAux2.at<uchar>(pointsCO[i].y,pointsCO[i].x)=255;}
\DoxyCodeLine{653       \textcolor{keywordflow}{if} (pointsCO[i].y>0)}
\DoxyCodeLine{654         imAux2.at<uchar>(pointsCO[i].y-\/1,pointsCO[i].x)=255;}
\DoxyCodeLine{655       \textcolor{keywordflow}{if} (pointsCO[i].y<imAux2.rows-\/1 )}
\DoxyCodeLine{656         imAux2.at<uchar>(pointsCO[i].y+1,pointsCO[i].x)=255;}
\DoxyCodeLine{657     \}}
\DoxyCodeLine{658 }
\DoxyCodeLine{659     cv::Mat outIm(enlargedSize,CV\_8UC1);}
\DoxyCodeLine{660     outIm.setTo(cv::Scalar::all(0));}
\DoxyCodeLine{661     \textcolor{comment}{//now, scan in lines to determine the required displacement}}
\DoxyCodeLine{662     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} y=0;y<imAux2.rows;y++) \{}
\DoxyCodeLine{663       uchar *\_offInfo=imAux2.ptr<uchar>(y);}
\DoxyCodeLine{664       \textcolor{keywordtype}{int} start=-\/1,end=-\/1;}
\DoxyCodeLine{665       \textcolor{comment}{//determine the start and end of markerd regions}}
\DoxyCodeLine{666       \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} x=0;x<imAux.cols;x++) \{}
\DoxyCodeLine{667         \textcolor{keywordflow}{if} (\_offInfo[x]) \{}
\DoxyCodeLine{668           \textcolor{keywordflow}{if} (start==-\/1) start=x;}
\DoxyCodeLine{669           \textcolor{keywordflow}{else} end=x;}
\DoxyCodeLine{670         \}}
\DoxyCodeLine{671       \}}
\DoxyCodeLine{672       \textcolor{comment}{//       cout<<"{}S="{}<<start<<"{} "{}<<end<<"{} "{}<<end-\/start<<"{} "{}<<(size.width>>1)<<endl;}}
\DoxyCodeLine{673       \textcolor{comment}{//check that the size is big enough and}}
\DoxyCodeLine{674       assert(start!=-\/1 \&\& end!=-\/1 \&\& (end-\/start)> size.width>>1);}
\DoxyCodeLine{675       uchar *In\_image=imAux.ptr<uchar>(y);}
\DoxyCodeLine{676       uchar *Out\_image=outIm.ptr<uchar>(y);}
\DoxyCodeLine{677       memcpy(Out\_image,In\_image+start,imAux.cols-\/start );}
\DoxyCodeLine{678     \}}
\DoxyCodeLine{679 }
\DoxyCodeLine{680 }
\DoxyCodeLine{681     \textcolor{comment}{//     cout<<"{}SS="{}<<mcand.contour.size()<<"{} "{}<<pointsCO.size()<<endl;}}
\DoxyCodeLine{682     \textcolor{comment}{//get the central region with the size specified}}
\DoxyCodeLine{683     cv::Mat centerReg=outIm(cv::Range::all(),cv::Range(0,size.width));}
\DoxyCodeLine{684     out=centerReg.clone();}
\DoxyCodeLine{685     \textcolor{comment}{//     cv::perspectiveTransform(mcand.contour,pointsCO,M);}}
\DoxyCodeLine{686     \textcolor{comment}{//draw them}}
\DoxyCodeLine{687     \textcolor{comment}{//     cv::imshow("{}out2"{},out);}}
\DoxyCodeLine{688     \textcolor{comment}{//     cv::imshow("{}imm"{},imAux2);}}
\DoxyCodeLine{689     \textcolor{comment}{//     cv::waitKey(0);}}
\DoxyCodeLine{690     \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{691   \}}

\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classaruco_1_1MarkerDetector_a2095fdc39ea281d13adcd1f919d24a2f_cgraph}
\end{center}
\end{figure}


The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
aruco/include/aruco/\mbox{\hyperlink{markerdetector_8h}{markerdetector.\+h}}\item 
aruco/src/aruco/\mbox{\hyperlink{markerdetector_8cpp}{markerdetector.\+cpp}}\end{DoxyCompactItemize}
