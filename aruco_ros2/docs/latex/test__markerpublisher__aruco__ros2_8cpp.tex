\hypertarget{test__markerpublisher__aruco__ros2_8cpp}{}\doxysection{aruco\+\_\+ros2/test/test\+\_\+markerpublisher\+\_\+aruco\+\_\+ros2.cpp File Reference}
\label{test__markerpublisher__aruco__ros2_8cpp}\index{aruco\_ros2/test/test\_markerpublisher\_aruco\_ros2.cpp@{aruco\_ros2/test/test\_markerpublisher\_aruco\_ros2.cpp}}
{\ttfamily \#include $<$memory$>$}\newline
{\ttfamily \#include $<$vector$>$}\newline
{\ttfamily \#include $<$string$>$}\newline
{\ttfamily \#include $<$map$>$}\newline
{\ttfamily \#include \char`\"{}aruco\+\_\+ros/test\+\_\+markerpublisher\+\_\+aruco\+\_\+ros2.\+hpp\char`\"{}}\newline
Include dependency graph for test\+\_\+markerpublisher\+\_\+aruco\+\_\+ros2.\+cpp\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{test__markerpublisher__aruco__ros2_8cpp__incl}
\end{center}
\end{figure}
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{test__markerpublisher__aruco__ros2_8cpp_a90e544674725e6e961d3d60d84b5ad6a}{TEST}} (aruco\+\_\+ros2\+\_\+wrapper\+\_\+test, test\+\_\+caminfo)
\item 
\mbox{\hyperlink{test__markerpublisher__aruco__ros2_8cpp_abd249fca309da83cbf15ae58c4b16072}{TEST}} (aruco\+\_\+ros2\+\_\+wrapper\+\_\+test, test\+\_\+caminfo2)
\item 
\mbox{\hyperlink{test__markerpublisher__aruco__ros2_8cpp_a78f8dff60e4b88254e85f8e1860d3c74}{TEST}} (aruco\+\_\+ros2\+\_\+wrapper\+\_\+test, test\+\_\+aruco\+\_\+detected\+\_\+\+ID)
\item 
\mbox{\hyperlink{test__markerpublisher__aruco__ros2_8cpp_a0989943f9ce7e0b1663c668c78699fb9}{TEST}} (aruco\+\_\+ros2\+\_\+wrapper\+\_\+test, test\+\_\+aruco\+\_\+detected\+\_\+position)
\item 
\mbox{\hyperlink{test__markerpublisher__aruco__ros2_8cpp_abeef71a0e63a14130d94559d00c444f3}{TEST}} (aruco\+\_\+ros2\+\_\+wrapper\+\_\+test, test\+\_\+aruco\+\_\+detected\+\_\+position2)
\item 
\mbox{\hyperlink{test__markerpublisher__aruco__ros2_8cpp_a4a43fdad6344d79f6c420765a8a2bff4}{TEST}} (aruco\+\_\+ros2\+\_\+wrapper\+\_\+test, test\+\_\+aruco\+\_\+detected\+\_\+multiple\+\_\+id)
\item 
\mbox{\hyperlink{test__markerpublisher__aruco__ros2_8cpp_afa54520893133df5ab19459b8d9108ad}{TEST}} (aruco\+\_\+ros2\+\_\+wrapper\+\_\+test, test\+\_\+aruco\+\_\+detected\+\_\+multiple\+\_\+id\+\_\+pose)
\item 
int \mbox{\hyperlink{test__markerpublisher__aruco__ros2_8cpp_a3c04138a5bfe5d72780bb7e82a18e627}{main}} (int argc, char $\ast$$\ast$argv)
\end{DoxyCompactItemize}


\doxysubsection{Function Documentation}
\mbox{\Hypertarget{test__markerpublisher__aruco__ros2_8cpp_a3c04138a5bfe5d72780bb7e82a18e627}\label{test__markerpublisher__aruco__ros2_8cpp_a3c04138a5bfe5d72780bb7e82a18e627}} 
\index{test\_markerpublisher\_aruco\_ros2.cpp@{test\_markerpublisher\_aruco\_ros2.cpp}!main@{main}}
\index{main@{main}!test\_markerpublisher\_aruco\_ros2.cpp@{test\_markerpublisher\_aruco\_ros2.cpp}}
\doxysubsubsection{\texorpdfstring{main()}{main()}}
{\footnotesize\ttfamily int main (\begin{DoxyParamCaption}\item[{int}]{argc,  }\item[{char $\ast$$\ast$}]{argv }\end{DoxyParamCaption})}



Definition at line 299 of file test\+\_\+markerpublisher\+\_\+aruco\+\_\+ros2.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{300 \{}
\DoxyCodeLine{301   rclcpp::init(argc, argv);}
\DoxyCodeLine{302   testing::InitGoogleTest(\&argc, argv);}
\DoxyCodeLine{303   \textcolor{keywordflow}{return} RUN\_ALL\_TESTS();}
\DoxyCodeLine{304 \}}

\end{DoxyCode}
\mbox{\Hypertarget{test__markerpublisher__aruco__ros2_8cpp_a78f8dff60e4b88254e85f8e1860d3c74}\label{test__markerpublisher__aruco__ros2_8cpp_a78f8dff60e4b88254e85f8e1860d3c74}} 
\index{test\_markerpublisher\_aruco\_ros2.cpp@{test\_markerpublisher\_aruco\_ros2.cpp}!TEST@{TEST}}
\index{TEST@{TEST}!test\_markerpublisher\_aruco\_ros2.cpp@{test\_markerpublisher\_aruco\_ros2.cpp}}
\doxysubsubsection{\texorpdfstring{TEST()}{TEST()}\hspace{0.1cm}{\footnotesize\ttfamily [1/7]}}
{\footnotesize\ttfamily TEST (\begin{DoxyParamCaption}\item[{aruco\+\_\+ros2\+\_\+wrapper\+\_\+test}]{,  }\item[{test\+\_\+aruco\+\_\+detected\+\_\+\+ID}]{ }\end{DoxyParamCaption})}



Definition at line 99 of file test\+\_\+markerpublisher\+\_\+aruco\+\_\+ros2.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{100 \{}
\DoxyCodeLine{101   sensor\_msgs::msg::CameraInfo::SharedPtr camera\_info =}
\DoxyCodeLine{102     std::make\_shared<sensor\_msgs::msg::CameraInfo>();}
\DoxyCodeLine{103   camera\_info-\/>height = 720;}
\DoxyCodeLine{104   camera\_info-\/>width = 1280;}
\DoxyCodeLine{105   camera\_info-\/>distortion\_model = \textcolor{stringliteral}{"{}plumb\_bob"{}};}
\DoxyCodeLine{106   array<double,}
\DoxyCodeLine{107     9> veck = \{783.8192972, 0.0, 649.1396957, 0.0, 786.38339479, 345.07377121, 0.0, 0.0, 1.0\};}
\DoxyCodeLine{108   camera\_info-\/>k = veck;}
\DoxyCodeLine{109   vector<double> vecd = \{0.10258321, -\/0.2406874, -\/0.00259027, -\/0.00244419, 0.11205082\};}
\DoxyCodeLine{110   camera\_info-\/>d = vecd;}
\DoxyCodeLine{111   array<double, 9> vecr = \{1.0, 0.0, 0.0, 0.0, 1.0, 0.0, 0.0, 0.0, 1.0\};}
\DoxyCodeLine{112   camera\_info-\/>r = vecr;}
\DoxyCodeLine{113   array<double,}
\DoxyCodeLine{114     12> vecp =}
\DoxyCodeLine{115   \{852.395142, 0.0, 565.89763, 0.0, 0.0, 922.066223, 386.58625, 0.0, 0.0, 0.0, 1.0, 0.0\};}
\DoxyCodeLine{116   camera\_info-\/>p = vecp;}
\DoxyCodeLine{117 }
\DoxyCodeLine{118   \textcolor{keyword}{auto} node = std::make\_shared<ArucoMarkerPublisher>(rclcpp::NodeOptions());}
\DoxyCodeLine{119   node-\/>marker\_size\_ = 0.1;}
\DoxyCodeLine{120   node-\/>cam\_info\_callback(camera\_info);}
\DoxyCodeLine{121   EXPECT\_EQ(node-\/>cam\_info\_received, \textcolor{keyword}{true});}
\DoxyCodeLine{122   \textcolor{keywordtype}{string} path\_to\_test\_image1 = \textcolor{stringliteral}{"{}test/1test.jpg"{}};}
\DoxyCodeLine{123   cv::Mat rgb\_frame = cv::imread(path\_to\_test\_image1, cv::IMREAD\_COLOR);}
\DoxyCodeLine{124   sensor\_msgs::msg::Image::SharedPtr input\_msg =}
\DoxyCodeLine{125     cv\_bridge::CvImage(std\_msgs::msg::Header(), \textcolor{stringliteral}{"{}bgr8"{}}, rgb\_frame).toImageMsg();}
\DoxyCodeLine{126   node-\/>image\_callback(input\_msg);}
\DoxyCodeLine{127 }
\DoxyCodeLine{128   EXPECT\_EQ(node-\/>markers\_.size(), 1);}
\DoxyCodeLine{129   EXPECT\_EQ(node-\/>markers\_[0].id, 590);}
\DoxyCodeLine{130   tf2::Transform x = \mbox{\hyperlink{namespacearuco__ros_a01ddfb8b1a95fd19d8c2d6da8fc18583}{aruco\_ros::arucoMarker2Tf}}(node-\/>markers\_[0], \textcolor{keyword}{false});}
\DoxyCodeLine{131   tf2::Transform y = \mbox{\hyperlink{namespacearuco__ros_a01ddfb8b1a95fd19d8c2d6da8fc18583}{aruco\_ros::arucoMarker2Tf}}(node-\/>markers\_[0], \textcolor{keyword}{true});}
\DoxyCodeLine{132   \textcolor{comment}{// EXPECT\_NE(x, y);}}
\DoxyCodeLine{133 \}}

\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=292pt]{test__markerpublisher__aruco__ros2_8cpp_a78f8dff60e4b88254e85f8e1860d3c74_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{test__markerpublisher__aruco__ros2_8cpp_a4a43fdad6344d79f6c420765a8a2bff4}\label{test__markerpublisher__aruco__ros2_8cpp_a4a43fdad6344d79f6c420765a8a2bff4}} 
\index{test\_markerpublisher\_aruco\_ros2.cpp@{test\_markerpublisher\_aruco\_ros2.cpp}!TEST@{TEST}}
\index{TEST@{TEST}!test\_markerpublisher\_aruco\_ros2.cpp@{test\_markerpublisher\_aruco\_ros2.cpp}}
\doxysubsubsection{\texorpdfstring{TEST()}{TEST()}\hspace{0.1cm}{\footnotesize\ttfamily [2/7]}}
{\footnotesize\ttfamily TEST (\begin{DoxyParamCaption}\item[{aruco\+\_\+ros2\+\_\+wrapper\+\_\+test}]{,  }\item[{test\+\_\+aruco\+\_\+detected\+\_\+multiple\+\_\+id}]{ }\end{DoxyParamCaption})}



Definition at line 218 of file test\+\_\+markerpublisher\+\_\+aruco\+\_\+ros2.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{219 \{}
\DoxyCodeLine{220   sensor\_msgs::msg::CameraInfo::SharedPtr camera\_info =}
\DoxyCodeLine{221     std::make\_shared<sensor\_msgs::msg::CameraInfo>();}
\DoxyCodeLine{222   camera\_info-\/>height = 720;}
\DoxyCodeLine{223   camera\_info-\/>width = 1280;}
\DoxyCodeLine{224   camera\_info-\/>distortion\_model = \textcolor{stringliteral}{"{}plumb\_bob"{}};}
\DoxyCodeLine{225   array<double,}
\DoxyCodeLine{226     9> veck = \{783.8192972, 0.0, 649.1396957, 0.0, 786.38339479, 345.07377121, 0.0, 0.0, 1.0\};}
\DoxyCodeLine{227   camera\_info-\/>k = veck;}
\DoxyCodeLine{228   vector<double> vecd = \{0.10258321, -\/0.2406874, -\/0.00259027, -\/0.00244419, 0.11205082\};}
\DoxyCodeLine{229   camera\_info-\/>d = vecd;}
\DoxyCodeLine{230   array<double, 9> vecr = \{1.0, 0.0, 0.0, 0.0, 1.0, 0.0, 0.0, 0.0, 1.0\};}
\DoxyCodeLine{231   camera\_info-\/>r = vecr;}
\DoxyCodeLine{232   array<double,}
\DoxyCodeLine{233     12> vecp =}
\DoxyCodeLine{234   \{852.395142, 0.0, 565.89763, 0.0, 0.0, 922.066223, 386.58625, 0.0, 0.0, 0.0, 1.0, 0.0\};}
\DoxyCodeLine{235   camera\_info-\/>p = vecp;}
\DoxyCodeLine{236 }
\DoxyCodeLine{237   \textcolor{keyword}{auto} node = std::make\_shared<ArucoMarkerPublisher>(rclcpp::NodeOptions());}
\DoxyCodeLine{238   node-\/>cam\_info\_callback(camera\_info);}
\DoxyCodeLine{239   EXPECT\_EQ(node-\/>cam\_info\_received, \textcolor{keyword}{true});}
\DoxyCodeLine{240   \textcolor{keywordtype}{string} path\_to\_test\_image2 = \textcolor{stringliteral}{"{}test/71test.jpg"{}};}
\DoxyCodeLine{241   cv::Mat rgb\_frame = cv::imread(path\_to\_test\_image2, cv::IMREAD\_COLOR);}
\DoxyCodeLine{242   sensor\_msgs::msg::Image::SharedPtr input\_msg =}
\DoxyCodeLine{243     cv\_bridge::CvImage(std\_msgs::msg::Header(), \textcolor{stringliteral}{"{}bgr8"{}}, rgb\_frame).toImageMsg();}
\DoxyCodeLine{244   node-\/>image\_callback(input\_msg);}
\DoxyCodeLine{245 }
\DoxyCodeLine{246   EXPECT\_EQ(node-\/>markers\_.size(), 4);}
\DoxyCodeLine{247   vector<int> anw = \{4, 12, 1011, 1019\};}
\DoxyCodeLine{248 }
\DoxyCodeLine{249   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; node-\/>markers\_.size() > i; i++) \{}
\DoxyCodeLine{250     anw.erase(std::remove(anw.begin(), anw.end(), node-\/>markers\_[i].id), anw.end());}
\DoxyCodeLine{251   \}}
\DoxyCodeLine{252   EXPECT\_EQ(anw.size(), 0);}
\DoxyCodeLine{253 \}}

\end{DoxyCode}
\mbox{\Hypertarget{test__markerpublisher__aruco__ros2_8cpp_afa54520893133df5ab19459b8d9108ad}\label{test__markerpublisher__aruco__ros2_8cpp_afa54520893133df5ab19459b8d9108ad}} 
\index{test\_markerpublisher\_aruco\_ros2.cpp@{test\_markerpublisher\_aruco\_ros2.cpp}!TEST@{TEST}}
\index{TEST@{TEST}!test\_markerpublisher\_aruco\_ros2.cpp@{test\_markerpublisher\_aruco\_ros2.cpp}}
\doxysubsubsection{\texorpdfstring{TEST()}{TEST()}\hspace{0.1cm}{\footnotesize\ttfamily [3/7]}}
{\footnotesize\ttfamily TEST (\begin{DoxyParamCaption}\item[{aruco\+\_\+ros2\+\_\+wrapper\+\_\+test}]{,  }\item[{test\+\_\+aruco\+\_\+detected\+\_\+multiple\+\_\+id\+\_\+pose}]{ }\end{DoxyParamCaption})}



Definition at line 255 of file test\+\_\+markerpublisher\+\_\+aruco\+\_\+ros2.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{256 \{}
\DoxyCodeLine{257   sensor\_msgs::msg::CameraInfo::SharedPtr camera\_info =}
\DoxyCodeLine{258     std::make\_shared<sensor\_msgs::msg::CameraInfo>();}
\DoxyCodeLine{259   camera\_info-\/>height = 720;}
\DoxyCodeLine{260   camera\_info-\/>width = 1280;}
\DoxyCodeLine{261   camera\_info-\/>distortion\_model = \textcolor{stringliteral}{"{}plumb\_bob"{}};}
\DoxyCodeLine{262   array<double,}
\DoxyCodeLine{263     9> veck = \{783.8192972, 0.0, 649.1396957, 0.0, 786.38339479, 345.07377121, 0.0, 0.0, 1.0\};}
\DoxyCodeLine{264   camera\_info-\/>k = veck;}
\DoxyCodeLine{265   vector<double> vecd = \{0.10258321, -\/0.2406874, -\/0.00259027, -\/0.00244419, 0.11205082\};}
\DoxyCodeLine{266   camera\_info-\/>d = vecd;}
\DoxyCodeLine{267   array<double, 9> vecr = \{1.0, 0.0, 0.0, 0.0, 1.0, 0.0, 0.0, 0.0, 1.0\};}
\DoxyCodeLine{268   camera\_info-\/>r = vecr;}
\DoxyCodeLine{269   array<double,}
\DoxyCodeLine{270     12> vecp =}
\DoxyCodeLine{271   \{852.395142, 0.0, 565.89763, 0.0, 0.0, 922.066223, 386.58625, 0.0, 0.0, 0.0, 1.0, 0.0\};}
\DoxyCodeLine{272   camera\_info-\/>p = vecp;}
\DoxyCodeLine{273 }
\DoxyCodeLine{274   \textcolor{keyword}{auto} node = std::make\_shared<ArucoMarkerPublisher>(rclcpp::NodeOptions());}
\DoxyCodeLine{275   node-\/>cam\_info\_callback(camera\_info);}
\DoxyCodeLine{276   EXPECT\_EQ(node-\/>cam\_info\_received, \textcolor{keyword}{true});}
\DoxyCodeLine{277   \textcolor{keywordtype}{string} path\_to\_test\_image2 = \textcolor{stringliteral}{"{}test/71test.jpg"{}};}
\DoxyCodeLine{278   cv::Mat rgb\_frame = cv::imread(path\_to\_test\_image2, cv::IMREAD\_COLOR);}
\DoxyCodeLine{279   sensor\_msgs::msg::Image::SharedPtr input\_msg =}
\DoxyCodeLine{280     cv\_bridge::CvImage(std\_msgs::msg::Header(), \textcolor{stringliteral}{"{}bgr8"{}}, rgb\_frame).toImageMsg();}
\DoxyCodeLine{281   node-\/>image\_callback(input\_msg);}
\DoxyCodeLine{282 }
\DoxyCodeLine{283   EXPECT\_EQ(node-\/>markers\_.size(), 4);}
\DoxyCodeLine{284 }
\DoxyCodeLine{285   std::map<int, cv::Mat> dict = \{}
\DoxyCodeLine{286     \{4, (cv::Mat\_<float>(3, 1) << 0.062779844, -\/0.021255242, 0.59162313)\},}
\DoxyCodeLine{287     \{12, (cv::Mat\_<float>(3, 1) << -\/0.21943684, -\/0.020362956, 0.55540878)\},}
\DoxyCodeLine{288     \{1011, (cv::Mat\_<float>(3, 1) << -\/0.08835607, -\/0.020665415, 0.57255763)\},}
\DoxyCodeLine{289     \{1019, (cv::Mat\_<float>(3, 1) << 0.19429082, -\/0.021743566, 0.60168642)\}}
\DoxyCodeLine{290   \};}
\DoxyCodeLine{291 }
\DoxyCodeLine{292   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; node-\/>markers\_.size() > i; i++) \{}
\DoxyCodeLine{293     cv::Mat k = dict[node-\/>markers\_[i].id] -\/ node-\/>markers\_[i].Tvec;}
\DoxyCodeLine{294     \textcolor{keywordtype}{float} p = cv::norm(k);}
\DoxyCodeLine{295     EXPECT\_EQ((p < 0.01), \textcolor{keyword}{true});}
\DoxyCodeLine{296   \}}
\DoxyCodeLine{297 \}}

\end{DoxyCode}
\mbox{\Hypertarget{test__markerpublisher__aruco__ros2_8cpp_a0989943f9ce7e0b1663c668c78699fb9}\label{test__markerpublisher__aruco__ros2_8cpp_a0989943f9ce7e0b1663c668c78699fb9}} 
\index{test\_markerpublisher\_aruco\_ros2.cpp@{test\_markerpublisher\_aruco\_ros2.cpp}!TEST@{TEST}}
\index{TEST@{TEST}!test\_markerpublisher\_aruco\_ros2.cpp@{test\_markerpublisher\_aruco\_ros2.cpp}}
\doxysubsubsection{\texorpdfstring{TEST()}{TEST()}\hspace{0.1cm}{\footnotesize\ttfamily [4/7]}}
{\footnotesize\ttfamily TEST (\begin{DoxyParamCaption}\item[{aruco\+\_\+ros2\+\_\+wrapper\+\_\+test}]{,  }\item[{test\+\_\+aruco\+\_\+detected\+\_\+position}]{ }\end{DoxyParamCaption})}



Definition at line 135 of file test\+\_\+markerpublisher\+\_\+aruco\+\_\+ros2.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{136 \{}
\DoxyCodeLine{137   sensor\_msgs::msg::CameraInfo::SharedPtr camera\_info =}
\DoxyCodeLine{138     std::make\_shared<sensor\_msgs::msg::CameraInfo>();}
\DoxyCodeLine{139   camera\_info-\/>height = 720;}
\DoxyCodeLine{140   camera\_info-\/>width = 1280;}
\DoxyCodeLine{141   camera\_info-\/>distortion\_model = \textcolor{stringliteral}{"{}plumb\_bob"{}};}
\DoxyCodeLine{142   array<double,}
\DoxyCodeLine{143     9> veck = \{783.8192972, 0.0, 649.1396957, 0.0, 786.38339479, 345.07377121, 0.0, 0.0, 1.0\};}
\DoxyCodeLine{144   camera\_info-\/>k = veck;}
\DoxyCodeLine{145   vector<double> vecd = \{0.10258321, -\/0.2406874, -\/0.00259027, -\/0.00244419, 0.11205082\};}
\DoxyCodeLine{146   camera\_info-\/>d = vecd;}
\DoxyCodeLine{147   array<double, 9> vecr = \{1.0, 0.0, 0.0, 0.0, 1.0, 0.0, 0.0, 0.0, 1.0\};}
\DoxyCodeLine{148   camera\_info-\/>r = vecr;}
\DoxyCodeLine{149   array<double,}
\DoxyCodeLine{150     12> vecp =}
\DoxyCodeLine{151   \{852.395142, 0.0, 565.89763, 0.0, 0.0, 922.066223, 386.58625, 0.0, 0.0, 0.0, 1.0, 0.0\};}
\DoxyCodeLine{152   camera\_info-\/>p = vecp;}
\DoxyCodeLine{153 }
\DoxyCodeLine{154   \textcolor{keyword}{auto} node = std::make\_shared<ArucoMarkerPublisher>(rclcpp::NodeOptions());}
\DoxyCodeLine{155   node-\/>cam\_info\_callback(camera\_info);}
\DoxyCodeLine{156   EXPECT\_EQ(node-\/>cam\_info\_received, \textcolor{keyword}{true});}
\DoxyCodeLine{157   \textcolor{keywordtype}{string} path\_to\_test\_image1 = \textcolor{stringliteral}{"{}test/1test.jpg"{}};}
\DoxyCodeLine{158   cv::Mat rgb\_frame = cv::imread(path\_to\_test\_image1, cv::IMREAD\_COLOR);}
\DoxyCodeLine{159   sensor\_msgs::msg::Image::SharedPtr input\_msg =}
\DoxyCodeLine{160     cv\_bridge::CvImage(std\_msgs::msg::Header(), \textcolor{stringliteral}{"{}bgr8"{}}, rgb\_frame).toImageMsg();}
\DoxyCodeLine{161   node-\/>image\_callback(input\_msg);}
\DoxyCodeLine{162 }
\DoxyCodeLine{163   EXPECT\_EQ(node-\/>markers\_.size(), 1);}
\DoxyCodeLine{164 }
\DoxyCodeLine{165   cv::Mat answertvec = (cv::Mat\_<float>(3, 1) << -\/0.46442503,}
\DoxyCodeLine{166     0.035325821,}
\DoxyCodeLine{167     1.3718389);}
\DoxyCodeLine{168 }
\DoxyCodeLine{169   cv::Mat different = node-\/>markers\_[0].Tvec -\/ answertvec;}
\DoxyCodeLine{170   \textcolor{keywordtype}{float} p = cv::norm(different);}
\DoxyCodeLine{171   EXPECT\_EQ((p < 0.01), \textcolor{keyword}{true});}
\DoxyCodeLine{172 \}}

\end{DoxyCode}
\mbox{\Hypertarget{test__markerpublisher__aruco__ros2_8cpp_abeef71a0e63a14130d94559d00c444f3}\label{test__markerpublisher__aruco__ros2_8cpp_abeef71a0e63a14130d94559d00c444f3}} 
\index{test\_markerpublisher\_aruco\_ros2.cpp@{test\_markerpublisher\_aruco\_ros2.cpp}!TEST@{TEST}}
\index{TEST@{TEST}!test\_markerpublisher\_aruco\_ros2.cpp@{test\_markerpublisher\_aruco\_ros2.cpp}}
\doxysubsubsection{\texorpdfstring{TEST()}{TEST()}\hspace{0.1cm}{\footnotesize\ttfamily [5/7]}}
{\footnotesize\ttfamily TEST (\begin{DoxyParamCaption}\item[{aruco\+\_\+ros2\+\_\+wrapper\+\_\+test}]{,  }\item[{test\+\_\+aruco\+\_\+detected\+\_\+position2}]{ }\end{DoxyParamCaption})}



Definition at line 173 of file test\+\_\+markerpublisher\+\_\+aruco\+\_\+ros2.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{174 \{}
\DoxyCodeLine{175   sensor\_msgs::msg::CameraInfo::SharedPtr camera\_info =}
\DoxyCodeLine{176     std::make\_shared<sensor\_msgs::msg::CameraInfo>();}
\DoxyCodeLine{177   camera\_info-\/>height = 720;}
\DoxyCodeLine{178   camera\_info-\/>width = 1280;}
\DoxyCodeLine{179   camera\_info-\/>distortion\_model = \textcolor{stringliteral}{"{}plumb\_bob"{}};}
\DoxyCodeLine{180   array<double,}
\DoxyCodeLine{181     9> veck = \{783.8192972, 0.0, 649.1396957, 0.0, 786.38339479, 345.07377121, 0.0, 0.0, 1.0\};}
\DoxyCodeLine{182   camera\_info-\/>k = veck;}
\DoxyCodeLine{183   vector<double> vecd = \{0.10258321, -\/0.2406874, -\/0.00259027, -\/0.00244419, 0.11205082\};}
\DoxyCodeLine{184   camera\_info-\/>d = vecd;}
\DoxyCodeLine{185   array<double, 9> vecr = \{1.0, 0.0, 0.0, 0.0, 1.0, 0.0, 0.0, 0.0, 1.0\};}
\DoxyCodeLine{186   camera\_info-\/>r = vecr;}
\DoxyCodeLine{187   array<double,}
\DoxyCodeLine{188     12> vecp =}
\DoxyCodeLine{189   \{852.395142, 0.0, 565.89763, 0.0, 0.0, 922.066223, 386.58625, 0.0, 0.0, 0.0, 1.0, 0.0\};}
\DoxyCodeLine{190   camera\_info-\/>p = vecp;}
\DoxyCodeLine{191 }
\DoxyCodeLine{192   std::vector<rclcpp::Parameter> initial\_parameters =}
\DoxyCodeLine{193   \{rclcpp::Parameter(\textcolor{stringliteral}{"{}reference\_frame"{}}, std::string(\textcolor{stringliteral}{"{}testframe"{}})),}
\DoxyCodeLine{194     rclcpp::Parameter(\textcolor{stringliteral}{"{}image\_is\_rectified"{}}, \textcolor{keyword}{false})\};}
\DoxyCodeLine{195   rclcpp::NodeOptions node\_options;}
\DoxyCodeLine{196   node\_options.allow\_undeclared\_parameters(\textcolor{keyword}{true});}
\DoxyCodeLine{197   node\_options.automatically\_declare\_parameters\_from\_overrides(\textcolor{keyword}{true});}
\DoxyCodeLine{198   node\_options.parameter\_overrides(initial\_parameters);}
\DoxyCodeLine{199   \textcolor{keyword}{auto} node = std::make\_shared<ArucoMarkerPublisher>(node\_options);}
\DoxyCodeLine{200   node-\/>cam\_info\_callback(camera\_info);}
\DoxyCodeLine{201   EXPECT\_EQ(node-\/>cam\_info\_received, \textcolor{keyword}{true});}
\DoxyCodeLine{202   \textcolor{keywordtype}{string} path\_to\_test\_image1 = \textcolor{stringliteral}{"{}test/1test.jpg"{}};}
\DoxyCodeLine{203   cv::Mat rgb\_frame = cv::imread(path\_to\_test\_image1, cv::IMREAD\_COLOR);}
\DoxyCodeLine{204   sensor\_msgs::msg::Image::SharedPtr input\_msg =}
\DoxyCodeLine{205     cv\_bridge::CvImage(std\_msgs::msg::Header(), \textcolor{stringliteral}{"{}bgr8"{}}, rgb\_frame).toImageMsg();}
\DoxyCodeLine{206   node-\/>image\_callback(input\_msg);}
\DoxyCodeLine{207 }
\DoxyCodeLine{208   \textcolor{comment}{// EXPECT\_EQ(node-\/>markers\_.size(), 1);}}
\DoxyCodeLine{209 }
\DoxyCodeLine{210   \textcolor{comment}{// cv::Mat answertvec = (cv::Mat\_<float>(3, 1) << -\/0.46442503,}}
\DoxyCodeLine{211   \textcolor{comment}{//   0.035325821,}}
\DoxyCodeLine{212   \textcolor{comment}{//   1.3718389);}}
\DoxyCodeLine{213 }
\DoxyCodeLine{214   \textcolor{comment}{// cv::Mat different = node-\/>markers\_[0].Tvec -\/ answertvec;}}
\DoxyCodeLine{215   \textcolor{comment}{// float p = cv::norm(different);}}
\DoxyCodeLine{216   \textcolor{comment}{// EXPECT\_EQ((p < 0.01), true);}}
\DoxyCodeLine{217 \}}

\end{DoxyCode}
\mbox{\Hypertarget{test__markerpublisher__aruco__ros2_8cpp_a90e544674725e6e961d3d60d84b5ad6a}\label{test__markerpublisher__aruco__ros2_8cpp_a90e544674725e6e961d3d60d84b5ad6a}} 
\index{test\_markerpublisher\_aruco\_ros2.cpp@{test\_markerpublisher\_aruco\_ros2.cpp}!TEST@{TEST}}
\index{TEST@{TEST}!test\_markerpublisher\_aruco\_ros2.cpp@{test\_markerpublisher\_aruco\_ros2.cpp}}
\doxysubsubsection{\texorpdfstring{TEST()}{TEST()}\hspace{0.1cm}{\footnotesize\ttfamily [6/7]}}
{\footnotesize\ttfamily TEST (\begin{DoxyParamCaption}\item[{aruco\+\_\+ros2\+\_\+wrapper\+\_\+test}]{,  }\item[{test\+\_\+caminfo}]{ }\end{DoxyParamCaption})}



Definition at line 45 of file test\+\_\+markerpublisher\+\_\+aruco\+\_\+ros2.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{46 \{}
\DoxyCodeLine{47   sensor\_msgs::msg::CameraInfo::SharedPtr camera\_info =}
\DoxyCodeLine{48     std::make\_shared<sensor\_msgs::msg::CameraInfo>();}
\DoxyCodeLine{49   camera\_info-\/>height = 720;}
\DoxyCodeLine{50   camera\_info-\/>width = 1280;}
\DoxyCodeLine{51   camera\_info-\/>distortion\_model = \textcolor{stringliteral}{"{}plumb\_bob"{}};}
\DoxyCodeLine{52   array<double,}
\DoxyCodeLine{53     9> veck = \{783.8192972, 0.0, 649.1396957, 0.0, 786.38339479, 345.07377121, 0.0, 0.0, 1.0\};}
\DoxyCodeLine{54   camera\_info-\/>k = veck;}
\DoxyCodeLine{55   vector<double> vecd = \{0.10258321, -\/0.2406874, -\/0.00259027, -\/0.00244419, 0.11205082\};}
\DoxyCodeLine{56   camera\_info-\/>d = vecd;}
\DoxyCodeLine{57   array<double, 9> vecr = \{1.0, 0.0, 0.0, 0.0, 1.0, 0.0, 0.0, 0.0, 1.0\};}
\DoxyCodeLine{58   camera\_info-\/>r = vecr;}
\DoxyCodeLine{59   array<double,}
\DoxyCodeLine{60     12> vecp =}
\DoxyCodeLine{61   \{852.395142, 0.0, 565.89763, 0.0, 0.0, 922.066223, 386.58625, 0.0, 0.0, 0.0, 1.0, 0.0\};}
\DoxyCodeLine{62   camera\_info-\/>p = vecp;}
\DoxyCodeLine{63 }
\DoxyCodeLine{64   \textcolor{keyword}{auto} node = std::make\_shared<ArucoMarkerPublisher>(rclcpp::NodeOptions());}
\DoxyCodeLine{65   node-\/>useRectifiedImages\_ = \textcolor{keyword}{false};}
\DoxyCodeLine{66   node-\/>cam\_info\_callback(camera\_info);}
\DoxyCodeLine{67   EXPECT\_EQ(node-\/>cam\_info\_received, \textcolor{keyword}{true});}
\DoxyCodeLine{68   EXPECT\_EQ((\textcolor{keywordtype}{int})node-\/>camParam\_.CamSize.width, (\textcolor{keywordtype}{int})camera\_info-\/>width);}
\DoxyCodeLine{69   EXPECT\_EQ((\textcolor{keywordtype}{int})node-\/>camParam\_.CamSize.height, (\textcolor{keywordtype}{int})camera\_info-\/>height);}
\DoxyCodeLine{70 }
\DoxyCodeLine{71   EXPECT\_EQ(node-\/>camParam\_.CameraMatrix.at<\textcolor{keywordtype}{float}>(0, 0), (\textcolor{keywordtype}{float})camera\_info-\/>k[0]);}
\DoxyCodeLine{72   EXPECT\_EQ(node-\/>camParam\_.CameraMatrix.at<\textcolor{keywordtype}{float}>(1, 1), (\textcolor{keywordtype}{float})camera\_info-\/>k[4]);}
\DoxyCodeLine{73   EXPECT\_EQ(node-\/>camParam\_.CameraMatrix.at<\textcolor{keywordtype}{float}>(0, 2), (\textcolor{keywordtype}{float})camera\_info-\/>k[2]);}
\DoxyCodeLine{74   EXPECT\_EQ(node-\/>camParam\_.CameraMatrix.at<\textcolor{keywordtype}{float}>(1, 2), (\textcolor{keywordtype}{float})camera\_info-\/>k[5]);}
\DoxyCodeLine{75 \}}

\end{DoxyCode}
\mbox{\Hypertarget{test__markerpublisher__aruco__ros2_8cpp_abd249fca309da83cbf15ae58c4b16072}\label{test__markerpublisher__aruco__ros2_8cpp_abd249fca309da83cbf15ae58c4b16072}} 
\index{test\_markerpublisher\_aruco\_ros2.cpp@{test\_markerpublisher\_aruco\_ros2.cpp}!TEST@{TEST}}
\index{TEST@{TEST}!test\_markerpublisher\_aruco\_ros2.cpp@{test\_markerpublisher\_aruco\_ros2.cpp}}
\doxysubsubsection{\texorpdfstring{TEST()}{TEST()}\hspace{0.1cm}{\footnotesize\ttfamily [7/7]}}
{\footnotesize\ttfamily TEST (\begin{DoxyParamCaption}\item[{aruco\+\_\+ros2\+\_\+wrapper\+\_\+test}]{,  }\item[{test\+\_\+caminfo2}]{ }\end{DoxyParamCaption})}



Definition at line 76 of file test\+\_\+markerpublisher\+\_\+aruco\+\_\+ros2.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{77 \{}
\DoxyCodeLine{78   sensor\_msgs::msg::CameraInfo::SharedPtr camera\_info =}
\DoxyCodeLine{79     std::make\_shared<sensor\_msgs::msg::CameraInfo>();}
\DoxyCodeLine{80   camera\_info-\/>height = 720;}
\DoxyCodeLine{81   camera\_info-\/>width = 1280;}
\DoxyCodeLine{82   camera\_info-\/>distortion\_model = \textcolor{stringliteral}{"{}plumb\_bob"{}};}
\DoxyCodeLine{83   array<double,}
\DoxyCodeLine{84     9> veck = \{783.8192972, 0.0, 649.1396957, 0.0, 786.38339479, 345.07377121, 0.0, 0.0, 1.0\};}
\DoxyCodeLine{85   camera\_info-\/>k = veck;}
\DoxyCodeLine{86   vector<double> vecd = \{0.10258321, -\/0.2406874, -\/0.00259027, -\/0.00244419, 0.11205082\};}
\DoxyCodeLine{87   camera\_info-\/>d = vecd;}
\DoxyCodeLine{88   array<double, 9> vecr = \{1.0, 0.0, 0.0, 0.0, 1.0, 0.0, 0.0, 0.0, 1.0\};}
\DoxyCodeLine{89   camera\_info-\/>r = vecr;}
\DoxyCodeLine{90   array<double,}
\DoxyCodeLine{91     12> vecp =}
\DoxyCodeLine{92   \{852.395142, 0.0, 565.89763, 0.0, 0.0, 922.066223, 386.58625, 0.0, 0.0, 0.0, 1.0, 0.0\};}
\DoxyCodeLine{93   camera\_info-\/>p = vecp;}
\DoxyCodeLine{94 }
\DoxyCodeLine{95   \textcolor{keyword}{auto} node = std::make\_shared<ArucoMarkerPublisher>(rclcpp::NodeOptions());}
\DoxyCodeLine{96   node-\/>useRectifiedImages\_ = \textcolor{keyword}{true};}
\DoxyCodeLine{97   node-\/>cam\_info\_callback(camera\_info);}
\DoxyCodeLine{98 \}}

\end{DoxyCode}
